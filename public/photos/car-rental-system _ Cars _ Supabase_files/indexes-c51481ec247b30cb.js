try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="256ab483-f80c-457b-9716-c693dcece4c2",e._sentryDebugIdIdentifier="sentry-dbid-256ab483-f80c-457b-9716-c693dcece4c2")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[18966],{1374:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]])},1560:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ex});var a=n(80263),s=n(86510),l=n(14506),r=n.n(l),i=n(12123),c=n(31092),d=n(33922),o=n(23850),u=n(53239),m=n(73969),x=n(22891),h=n(44168),p=n(15040),y=n(84438),f=n(53931),g=n(51355),j=n(80210),v=n(59356),S=n(63185);async function b(e){let{projectRef:t,connectionString:n,name:a,schema:s}=e,l='drop index if exists "'.concat(s,'"."').concat(a,'"'),{result:r}=await (0,v.E)({projectRef:t,connectionString:n,sql:l,queryKey:["indexes"]});return r}let N=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,g.jE)();return(0,j.n)({mutationFn:e=>b(e),async onSuccess(t,n,s){let{projectRef:l}=n;await a.invalidateQueries({queryKey:S.K.list(l)}),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?m.oR.error("Failed to delete database index: ".concat(e.message)):t(e,n,a)},...n})};var _=n(67850);async function C(e,t){let{schema:n,projectRef:a,connectionString:s}=e;if(!n)throw Error("schema is required");let l=(e=>{let{schema:t}=e;return'\nSELECT schemaname as "schema",\n  tablename as "table",\n  indexname as "name",\n  indexdef as "definition"\nFROM pg_indexes\nWHERE schemaname = \''.concat(t,"';\n").trim()})({schema:n}),{result:r}=await (0,v.E)({projectRef:a,connectionString:s,sql:l,queryKey:["indexes",n]},t);return r}let A=function(e){let{projectRef:t,connectionString:n,schema:a}=e,{enabled:s=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_.I)({queryKey:S.K.list(t,a),queryFn:e=>{let{signal:s}=e;return C({projectRef:t,connectionString:n,schema:a},s)},enabled:s&&void 0!==t&&void 0!==a,...l})};var w=n(32775),E=n(57384),k=n(9620),P=n(46087),I=n(63335),T=n(80421),R=n(99779),q=n(78039),L=n(78511),D=n(79861),M=n(68421),F=n(35693),z=n(32157),O=n(23892),W=n(73886),V=n(52555),H=n.n(V),B=n(41273);async function G(e){let{projectRef:t,connectionString:n,payload:a}=e,{schema:s,entity:l,type:r,columns:i}=a,c='\n  CREATE INDEX ON "'.concat(s,'"."').concat(l,'" USING ').concat(r," (").concat(i.map(e=>'"'.concat(e,'"')).join(", "),");\n  ").trim(),{result:d}=await (0,v.E)({projectRef:t,connectionString:n,sql:c,queryKey:["indexes",s]});return d}let $=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,g.jE)();return(0,j.n)({mutationFn:e=>G(e),async onSuccess(t,n,s){let{projectRef:l}=n;await a.invalidateQueries({queryKey:S.K.list(l)}),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?m.oR.error("Failed to create database index: ".concat(e.message)):t(e,n,a)},...n})};var K=n(28669),U=n(68011),Y=n(85039),Q=n(61548),X=n(29244),Z=n(97757),J=n(80100),ee=n(66329),et=n(44725),en=n(54207),ea=n(44053);let es=[{name:"B-Tree",value:"btree",description:"For querying data with equality or range conditions on columns.\nThis is the default index type that Postgres uses."},{name:"Hash",value:"hash",description:"For querying exact matches on columns"},{name:"GiST",value:"gist",description:"For querying complex data types or custom-defined operators"},{name:"SP-GiST",value:"spgist",description:"Similar to GiST, but is more specialized and customizable"},{name:"GIN",value:"gin",description:"For querying multi-valued data such as arrays or full-text search scenarios"},{name:"BRIN",value:"brin",description:"For querying large tables with sorted data"}],el=e=>{var t,n;let{visible:s,onClose:l}=e,{data:r}=(0,k.YA)(),i=(0,k.W0)(),[c,d]=(0,u.useState)("public"),[o,x]=(0,u.useState)(void 0),[h,y]=(0,u.useState)([]),[g,j]=(0,u.useState)(es[0].value),[v,S]=(0,u.useState)(!1),[b,N]=(0,u.useState)(!1),[_,C]=(0,u.useState)(""),{data:A}=(0,w.w$)({projectRef:null==r?void 0:r.ref,connectionString:null==r?void 0:r.connectionString}),{data:E,isLoading:P}=(0,U.kD)({schemas:[c],sort:"alphabetical",search:_,projectRef:null==r?void 0:r.ref,connectionString:null==r?void 0:r.connectionString}),{data:I,isLoading:T,isSuccess:q}=(0,K.HJ)({schema:c,table:o,projectRef:null==r?void 0:r.ref,connectionString:null==r?void 0:r.connectionString}),{mutate:L,isPending:M}=$({onSuccess:()=>{l(),m.oR.success("Successfully created index")}}),F=(0,u.useMemo)(()=>(null==E?void 0:E.pages.flatMap(e=>e.data.entities))||[],[null==E?void 0:E.pages]);function V(e){C(e)}let G=(null!=(n=null==I||null==(t=I[0])?void 0:t.columns)?n:[]).filter(e=>null!==e).map(e=>({id:e.attname,value:e.attname,name:e.attname,disabled:!1})),el='\nCREATE INDEX ON "'.concat(c,'"."').concat(o,'" USING ').concat(g," (").concat(h.map(e=>'"'.concat(e,'"')).join(", "),");\n").trim();(0,u.useEffect)(()=>{s&&(d("public"),x(""),y([]),j(es[0].value))},[s]),(0,u.useEffect)(()=>{x(""),y([]),j(es[0].value)},[c]),(0,u.useEffect)(()=>{y([]),j(es[0].value)},[o]);let er=0===F.length;return(0,a.jsx)(D.Ay,{size:"large",header:"Create new index",visible:s,onCancel:l,onConfirm:()=>r?o?void L({projectRef:r.ref,connectionString:r.connectionString,payload:{schema:c,entity:o,type:g,columns:h}}):console.error("Entity is required"):console.error("Project is required"),loading:M,confirmText:"Create index","data-sentry-element":"SidePanel","data-sentry-component":"CreateIndexSidePanel","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)("div",{className:"py-6 space-y-6",children:[(0,a.jsxs)(D.Ay.Content,{className:"space-y-6","data-sentry-element":"SidePanel.Content","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(ea.M,{label:"Select a schema",name:"select-schema",isReactForm:!1,"data-sentry-element":"FormItemLayout","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)(Q.AM,{modal:!1,open:v,onOpenChange:S,"data-sentry-element":"Popover_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(Q.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsx)(R.$,{type:"default",size:"medium",className:"w-full [&>span]:w-full text-left",iconRight:(0,a.jsx)(z.A,{className:"text-foreground-muted",strokeWidth:2,size:14}),"data-sentry-element":"Button","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:void 0!==c&&""!==c?c:"Choose a schema"})}),(0,a.jsx)(Q.hl,{className:"p-0",side:"bottom",align:"start",sameWidthAsTrigger:!0,"data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)(X.uB,{"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(X.G7,{placeholder:"Find table...",value:_,onValueChange:V,"data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx"}),(0,a.jsxs)(X.oI,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(X.xL,{"data-sentry-element":"CommandEmpty_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:"No schemas found"}),(0,a.jsx)(X.L$,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsx)(Z.FK,{className:(A||[]).length>7?"h-[210px]":"","data-sentry-element":"ScrollArea","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(null!=A?A:[]).map(e=>(0,a.jsxs)(X.h_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{d(e.name),S(!1)},onClick:()=>{d(e.name),S(!1)},children:[(0,a.jsx)("span",{children:e.name}),o===e.name&&(0,a.jsx)(O.A,{className:"text-brand",strokeWidth:2,size:16})]},e.name))})})]})]})})]})}),(0,a.jsx)(ea.M,{label:"Select a table",name:"select-table",description:er&&!P&&"Create a table in this schema via the Table or SQL editor first",isReactForm:!1,"data-sentry-element":"FormItemLayout","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)(Q.AM,{modal:!1,open:b,onOpenChange:N,"data-sentry-element":"Popover_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(Q.Wv,{asChild:!0,disabled:er||P,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsx)(R.$,{type:"default",size:"medium",className:(0,J.cn)("w-full [&>span]:w-full text-left",""===o&&"text-foreground-lighter"),iconRight:(0,a.jsx)(z.A,{className:"text-foreground-muted",strokeWidth:2,size:14}),"data-sentry-element":"Button","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:void 0!==o&&""!==o?o:er?"No tables available in schema":"Choose a table"})}),(0,a.jsx)(Q.hl,{className:"p-0",side:"bottom",align:"start",sameWidthAsTrigger:!0,"data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)(X.uB,{shouldFilter:!1,"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(X.G7,{placeholder:"Find table...",value:_,onValueChange:V,"data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx"}),(0,a.jsxs)(X.oI,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(X.xL,{"data-sentry-element":"CommandEmpty_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:P?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-center justify-center",children:[(0,a.jsx)(W.A,{size:12,className:"animate-spin"}),"Loading..."]}):"No tables found"}),(0,a.jsx)(X.L$,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsx)(Z.FK,{className:(F||[]).length>7?"h-[210px]":"","data-sentry-element":"ScrollArea","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(null!=F?F:[]).map(e=>(0,a.jsxs)(X.h_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{x(e.name),N(!1)},onClick:()=>{x(e.name),N(!1)},children:[(0,a.jsx)("span",{children:e.name}),o===e.name&&(0,a.jsx)(O.A,{className:"text-brand",strokeWidth:2,size:16})]},e.name))})})]})]})})]})}),o&&(0,a.jsxs)(ea.M,{label:"Select up to 32 columns",isReactForm:!1,children:[T&&(0,a.jsx)(f.Ay,{className:"py-4"}),q&&(0,a.jsx)(en._,{options:G,placeholder:"Choose which columns to create an index on",searchPlaceholder:"Search for a column",value:h,onChange:y})]})]}),h.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D.Ay.Separator,{}),(0,a.jsxs)(D.Ay.Content,{className:"space-y-6",children:[(0,a.jsx)(ea.M,{label:"Select an index type",name:"selected-index-type",isReactForm:!1,children:(0,a.jsxs)(ee.l6,{disabled:i,value:g,onValueChange:j,name:"selected-index-type",children:[(0,a.jsx)(ee.bq,{size:"small",children:(0,a.jsx)(ee.yv,{className:"font-mono",children:g})}),(0,a.jsx)(ee.gC,{children:es.map((e,t)=>(0,a.jsxs)(u.Fragment,{children:[(0,a.jsx)(ee.eb,{value:e.value,children:(0,a.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,a.jsx)("span",{children:e.name}),e.description.split("\n").map((t,n)=>(0,a.jsx)("span",{className:"text-foreground-lighter group-focus:text-foreground-light group-data-[state=checked]:text-foreground-light",children:t},"".concat(e.value,"-description-").concat(n)))]})}),t<es.length-1&&(0,a.jsx)(ee.mi,{})]},e.name))})]})}),i&&(0,a.jsx)(et.Z,{type:"default",className:"!mt-2",title:"OrioleDB currently only supports the B-tree index type",description:"More index types may be supported when OrioleDB is no longer in preview",children:(0,a.jsx)(B.A,{className:"mt-2",abbrev:!1,href:"".concat(Y.aq)})})]}),(0,a.jsx)(D.Ay.Separator,{}),(0,a.jsx)(D.Ay.Content,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm",children:"Preview of SQL statement"}),(0,a.jsx)(R.$,{asChild:!0,type:"default",children:(0,a.jsx)(H(),{href:void 0!==r?"/project/".concat(r.ref,"/sql/new?content=").concat(el):"/",children:"Open in SQL Editor"})})]})}),(0,a.jsx)("div",{className:"h-[200px] !mt-2",children:(0,a.jsx)("div",{className:"relative h-full",children:(0,a.jsx)(p.A,{isReadOnly:!0,autofocus:!1,id:"".concat(c,"-").concat(o,"-").concat(h.join(","),"-").concat(g),language:"pgsql",defaultValue:el})})})]})]})})},er=()=>{var e,t;let{data:n}=(0,k.YA)(),{schema:s,table:l}=(0,x.g)(),[g,j]=(0,u.useState)(""),{selectedSchema:v,setSelectedSchema:S}=(0,E.k)(),b=(0,u.useRef)(null),{data:_,error:C,isLoading:z,isSuccess:O,isError:W}=A({schema:v,projectRef:null==n?void 0:n.ref,connectionString:null==n?void 0:n.connectionString}),[V,H]=(0,o.ZA)("new",o.cr.withDefault(!1).withOptions({history:"push",clearOnDefault:!0})),{setValue:B,value:G}=(0,P.s)({urlKey:"edit",select:e=>e?null==_?void 0:_.find(t=>t.name===e):void 0,enabled:!!_,onError:()=>m.oR.error("Index not found")}),{setValue:$,value:K}=(0,P.s)({urlKey:"delete",select:e=>e?null==_?void 0:_.find(t=>t.name===e):void 0,enabled:!!_,onError:(e,t)=>(0,P.$)(b,t,"Index not found")}),{data:U,isLoading:Y,isSuccess:Q,isError:X}=(0,w.w$)({projectRef:null==n?void 0:n.ref,connectionString:null==n?void 0:n.connectionString}),{mutate:Z,isPending:J}=N({onSuccess:async()=>{$(null),m.oR.success("Successfully deleted index")}}),{isSchemaLocked:ee}=(0,I.BQ)({schema:v}),et=r()(null!=_?_:[],e=>e.name.toLocaleLowerCase()),en=g.length>0?et.filter(e=>e.name.includes(g)||e.table.includes(g)):et;return(0,u.useEffect)(()=>{if(void 0!==s){let e=null==U?void 0:U.find(e=>e.name===s);void 0!==e&&S(e.name)}},[s,Q]),(0,u.useEffect)(()=>{void 0!==l&&j(l)},[l]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"pb-8",children:(0,a.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[Y&&(0,a.jsx)(f.Ay,{className:"w-[260px]"}),X&&(0,a.jsxs)("div",{className:"w-[260px] text-foreground-light text-sm border px-3 py-1.5 rounded flex items-center space-x-2",children:[(0,a.jsx)(i.A,{strokeWidth:2,size:16}),(0,a.jsx)("p",{children:"Failed to load schemas"})]}),Q&&(0,a.jsx)(y.A,{className:"w-full lg:w-[180px]",size:"tiny",showError:!1,selectedSchemaName:v,onSelectSchema:S}),(0,a.jsx)(T.A,{size:"tiny",value:g,className:"w-full lg:w-52",onChange:e=>j(e.target.value),placeholder:"Search for an index",icon:(0,a.jsx)(c.A,{size:14}),"data-sentry-element":"Input","data-sentry-source-file":"Indexes.tsx"}),!ee&&(0,a.jsx)(R.$,{className:"ml-auto flex-grow lg:flex-grow-0",type:"primary",onClick:()=>H(!0),disabled:!Q,children:"Create index"})]}),ee&&(0,a.jsx)(F.i,{schema:v,entity:"indexes"}),z&&(0,a.jsx)(f.yV,{}),W&&(0,a.jsx)(h.A,{error:C,subject:"Failed to retrieve database indexes"}),O&&(0,a.jsx)("div",{className:"w-full overflow-hidden",children:(0,a.jsx)(q.Zp,{children:(0,a.jsxs)(L.XI,{children:[(0,a.jsx)(L.A0,{children:(0,a.jsxs)(L.Hj,{children:[(0,a.jsx)(L.nd,{children:"Schema"},"schema"),(0,a.jsx)(L.nd,{children:"Table"},"table"),(0,a.jsx)(L.nd,{children:"Name"},"name"),(0,a.jsx)(L.nd,{},"buttons")]})}),(0,a.jsxs)(L.BF,{children:[0===et.length&&0===g.length&&(0,a.jsx)(L.Hj,{children:(0,a.jsxs)(L.nA,{colSpan:4,children:[(0,a.jsx)("p",{className:"text-sm text-foreground",children:"No indexes created yet"}),(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:['There are no indexes found in the schema "',v,'"']})]})}),0===et.length&&g.length>0&&(0,a.jsx)(L.Hj,{children:(0,a.jsxs)(L.nA,{colSpan:4,children:[(0,a.jsx)("p",{className:"text-sm text-foreground",children:"No results found"}),(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:['Your search for "',g,'" did not return any results']})]})}),en.length>0&&en.map(e=>(0,a.jsxs)(L.Hj,{children:[(0,a.jsx)(L.nA,{children:(0,a.jsx)("p",{title:e.schema,children:e.schema})}),(0,a.jsx)(L.nA,{children:(0,a.jsx)("p",{title:e.table,children:e.table})}),(0,a.jsx)(L.nA,{children:(0,a.jsx)("p",{title:e.name,children:e.name})}),(0,a.jsx)(L.nA,{children:(0,a.jsxs)("div",{className:"flex justify-end items-center space-x-2",children:[(0,a.jsx)(R.$,{type:"default",onClick:()=>B(e.name),children:"View definition"}),!ee&&(0,a.jsx)(R.$,{"aria-label":"Delete index",type:"text",className:"px-1",icon:(0,a.jsx)(d.A,{}),onClick:()=>$(e.name)})]})})]},e.name))]})]})})})]})}),(0,a.jsx)(D.Ay,{size:"xlarge",visible:!!G,header:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Index:"}),(0,a.jsx)("code",{className:"text-sm ml-2",children:null==G?void 0:G.name})]}),onCancel:()=>B(null),"data-sentry-element":"SidePanel","data-sentry-source-file":"Indexes.tsx",children:(0,a.jsx)("div",{className:"h-full",children:(0,a.jsx)("div",{className:"relative h-full",children:(0,a.jsx)(p.A,{isReadOnly:!0,id:null!=(e=null==G?void 0:G.name)?e:"",language:"pgsql",defaultValue:null!=(t=null==G?void 0:G.definition)?t:"","data-sentry-element":"CodeEditor","data-sentry-source-file":"Indexes.tsx"})})})}),(0,a.jsx)(el,{visible:V,onClose:()=>H(!1),"data-sentry-element":"CreateIndexSidePanel","data-sentry-source-file":"Indexes.tsx"}),(0,a.jsx)(M.A,{variant:"warning",size:"medium",loading:J,visible:!!K,title:(0,a.jsxs)(a.Fragment,{children:["Confirm to delete index ",(0,a.jsx)("code",{className:"text-sm",children:null==K?void 0:K.name})]}),confirmLabel:"Confirm delete",confirmLabelLoading:"Deleting...",onConfirm:()=>void 0!==K?(e=>{if(!n)return console.error("Project is required");b.current=e.name,Z({projectRef:n.ref,connectionString:n.connectionString,name:e.name,schema:v})})(K):{},onCancel:()=>$(null),alert:{title:"This action cannot be undone",description:"Deleting an index that is still in use will cause queries to slow down, and in some cases causing significant performance issues."},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"Indexes.tsx",children:(0,a.jsx)("ul",{className:"mt-4 space-y-5",children:(0,a.jsx)("li",{className:"flex gap-3",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:"text-sm",children:"Before deleting this index, consider:"}),(0,a.jsxs)("ul",{className:"space-y-2 mt-2 text-sm text-foreground-light",children:[(0,a.jsx)("li",{className:"list-disc ml-6",children:"This index is no longer in use"}),(0,a.jsx)("li",{className:"list-disc ml-6",children:"The table which the index is on is not currently in use, as dropping an index requires a short exclusive access lock on the table."})]})]})})})})]})};var ei=n(68296),ec=n(10508),ed=n(45218),eo=n(30688),eu=n(14354);let em=()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eo.zY,{size:"large","data-sentry-element":"PageHeader","data-sentry-source-file":"indexes.tsx",children:(0,a.jsxs)(eo.Ys,{"data-sentry-element":"PageHeaderMeta","data-sentry-source-file":"indexes.tsx",children:[(0,a.jsxs)(eo.tq,{"data-sentry-element":"PageHeaderSummary","data-sentry-source-file":"indexes.tsx",children:[(0,a.jsx)(eo.RR,{"data-sentry-element":"PageHeaderTitle","data-sentry-source-file":"indexes.tsx",children:"Database Indexes"}),(0,a.jsx)(eo.NV,{"data-sentry-element":"PageHeaderDescription","data-sentry-source-file":"indexes.tsx",children:"Improve query performance against your database"})]}),(0,a.jsxs)(eo.vT,{"data-sentry-element":"PageHeaderAside","data-sentry-source-file":"indexes.tsx",children:[(0,a.jsx)(B.A,{className:"no-underline",href:"".concat(Y.aq,"/guides/database/query-optimization"),"data-sentry-element":"DocsButton","data-sentry-source-file":"indexes.tsx"}),(0,a.jsx)(R.$,{asChild:!0,type:"default",icon:(0,a.jsx)(s.A,{strokeWidth:1.5}),"data-sentry-element":"Button","data-sentry-source-file":"indexes.tsx",children:(0,a.jsx)("a",{target:"_blank",rel:"noreferrer",className:"no-underline",href:"".concat(Y.aq,"/guides/database/extensions/index_advisor"),children:"Index Advisor"})})]})]})}),(0,a.jsx)(ed.L,{size:"large","data-sentry-element":"PageContainer","data-sentry-source-file":"indexes.tsx",children:(0,a.jsx)(eu.d8,{"data-sentry-element":"PageSection","data-sentry-source-file":"indexes.tsx",children:(0,a.jsx)(eu.KP,{"data-sentry-element":"PageSectionContent","data-sentry-source-file":"indexes.tsx",children:(0,a.jsx)(er,{"data-sentry-element":"Indexes","data-sentry-source-file":"indexes.tsx"})})})})]});em.getLayout=e=>(0,a.jsx)(ec.A,{children:(0,a.jsx)(ei.A,{title:"Indexes",children:e})});let ex=em},13655:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]])},14354:(e,t,n)=>{"use strict";n.d(t,{KP:()=>o,Nu:()=>d,d8:()=>i,l3:()=>c});var a=n(80263),s=n(79279);n(53239);var l=n(80100);let r=(0,s.F)(["pt-12 last:pb-12 gap-6"],{variants:{orientation:{horizontal:"grid @3xl:grid-cols-[1fr_2fr] @3xl:gap-12",vertical:"flex flex-col"}},defaultVariants:{orientation:"vertical"}}),i=e=>{let{className:t,orientation:n="vertical",children:s,...i}=e;return(0,a.jsx)("div",{"data-slot":"page-section","data-orientation":n,className:(0,l.cn)(r({orientation:n}),t),...i,"data-sentry-component":"PageSectionRoot","data-sentry-source-file":"index.tsx",children:s})};i.displayName="PageSectionRoot";let c=e=>{let{className:t,children:n,...s}=e;return(0,a.jsx)("div",{"data-slot":"page-section-summary",className:(0,l.cn)("flex flex-col gap-1",t),...s,"data-sentry-component":"PageSectionSummary","data-sentry-source-file":"index.tsx",children:n})};c.displayName="PageSectionSummary";let d=e=>{let{className:t,children:n,...s}=e;return(0,a.jsx)("h2",{"data-slot":"page-section-title",className:(0,l.cn)("heading-section",t),...s,"data-sentry-component":"PageSectionTitle","data-sentry-source-file":"index.tsx",children:n})};d.displayName="PageSectionTitle";let o=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{"data-slot":"page-section-content",className:(0,l.cn)(t),...n,"data-sentry-component":"PageSectionContent","data-sentry-source-file":"index.tsx"})};o.displayName="PageSectionContent"},22730:(e,t,n)=>{"use strict";n.d(t,{z:()=>o});var a=n(78510),s=n(67850),l=n(24523),r=n(9620),i=n(85039),c=n(87727);async function d(e,t,n){let{projectRef:s,connectionString:r}=e;if(!s)throw Error("projectRef is required");let i=new Headers(n);r&&i.set("x-connection-encrypted",r);let{data:c,error:d}=await (0,l.Jt)("/platform/pg-meta/{ref}/extensions",{params:{header:{"x-connection-encrypted":r,"x-pg-application-name":a.r},path:{ref:s}},headers:i,signal:t});return d&&(0,l.H4)(d),c}let o=function(e){let{projectRef:t,connectionString:n}=e,{enabled:a=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{data:o}=(0,r.YA)(),u=(null==o?void 0:o.status)===i.BU.ACTIVE_HEALTHY;return(0,s.I)({queryKey:c.I.list(t),queryFn:e=>{let{signal:a}=e;return d({projectRef:t,connectionString:n},a)},enabled:a&&void 0!==t&&u,...l})}},28669:(e,t,n)=>{"use strict";n.d(t,{HJ:()=>i});var a=n(67850),s=n(59356),l=n(32510);async function r(e,t){let{projectRef:n,connectionString:a,table:l,schema:r}=e,i=(e=>{let{table:t,schema:n}=e,a=[];t&&a.push("tablename = '".concat(t,"'")),n&&a.push("schemaname = '".concat(n,"'"));let s=a.length>0?"WHERE ".concat(a.join(" AND ")):"";return"\n  \n  SELECT\n    tbl.schemaname,\n    tbl.tablename,\n    tbl.quoted_name,\n    tbl.is_table,\n    json_agg(a) as columns\n  FROM\n    (\n      SELECT\n        n.nspname as schemaname,\n        c.relname as tablename,\n        (quote_ident(n.nspname) || '.' || quote_ident(c.relname)) as quoted_name,\n        true as is_table\n      FROM\n        pg_catalog.pg_class c\n        JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\n      WHERE\n        c.relkind = 'r'\n        AND n.nspname not in ('information_schema', 'pg_catalog', 'pg_toast')\n        AND n.nspname not like 'pg_temp_%'\n        AND n.nspname not like 'pg_toast_temp_%'\n        AND has_schema_privilege(n.oid, 'USAGE') = true\n        AND has_table_privilege(quote_ident(n.nspname) || '.' || quote_ident(c.relname), 'SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER') = true\n      union all\n      SELECT\n        n.nspname as schemaname,\n        c.relname as tablename,\n        (quote_ident(n.nspname) || '.' || quote_ident(c.relname)) as quoted_name,\n        false as is_table\n      FROM\n        pg_catalog.pg_class c\n        JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\n      WHERE\n        c.relkind in ('v', 'm')\n        AND n.nspname not in ('information_schema', 'pg_catalog', 'pg_toast')\n        AND n.nspname not like 'pg_temp_%'\n        AND n.nspname not like 'pg_toast_temp_%'\n        AND has_schema_privilege(n.oid, 'USAGE') = true\n        AND has_table_privilege(quote_ident(n.nspname) || '.' || quote_ident(c.relname), 'SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER') = true\n    ) as tbl\n    LEFT JOIN (\n      SELECT\n        attrelid,\n        attname,\n        format_type(atttypid, atttypmod) as data_type,\n        attnum,\n        attisdropped\n      FROM\n        pg_attribute\n    ) as a ON (\n      a.attrelid = tbl.quoted_name::regclass\n      AND a.attnum > 0\n      AND NOT a.attisdropped\n      AND has_column_privilege(tbl.quoted_name, a.attname, 'SELECT, INSERT, UPDATE, REFERENCES')\n    )\n  ".concat(s,"\n  GROUP BY schemaname, tablename, quoted_name, is_table;\n").trim()})({table:l,schema:r}),{result:c}=await (0,s.E)({projectRef:n,connectionString:a,sql:i,queryKey:["table-columns",r,l]},t);return c}let i=function(e){let{projectRef:t,connectionString:n,schema:s,table:i}=e,{enabled:c=!0,...d}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.I)({queryKey:l.c.tableColumns(t,s,i),queryFn:e=>{let{signal:a}=e;return r({projectRef:t,connectionString:n,schema:s,table:i},a)},enabled:c&&void 0!==t,...d})}},29948:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},30788:(e,t,n)=>{var a=n(98198),s=n(33312);e.exports=function(e,t,n,l){return null==e?[]:(s(t)||(t=null==t?[]:[t]),s(n=l?void 0:n)||(n=null==n?[]:[n]),a(e,t,n))}},31626:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},35693:(e,t,n)=>{"use strict";n.d(t,{i:()=>o});var a=n(80263),s=n(53239),l=n(95137),r=n(99779),i=n(63335),c=n(44725);let d=e=>{let{onClose:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:(0,a.jsx)(l.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:"Schemas managed by Supabase"})}),(0,a.jsx)(l.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"ProtectedSchemaWarning.tsx"}),(0,a.jsxs)(l.OO,{className:"space-y-2 prose","data-sentry-element":"DialogSection","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:[(0,a.jsx)("p",{className:"text-sm",children:"The following schemas are managed by Supabase and are currently protected from write access through the dashboard."}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:i.$O.map(e=>(0,a.jsx)("code",{className:"text-xs",children:e},e))}),(0,a.jsx)("p",{className:"text-sm !mt-4",children:"These schemas are critical to the functionality of your Supabase project and hence we highly recommend not altering them."}),(0,a.jsx)("p",{className:"text-sm",children:"You can, however, still interact with those schemas through the SQL Editor although we advise you only do so if you know what you are doing."})]}),(0,a.jsx)(l.Es,{"data-sentry-element":"DialogFooter","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:(0,a.jsx)("div",{className:"flex items-center justify-end space-x-2",children:(0,a.jsx)(r.$,{type:"default",onClick:t,"data-sentry-element":"Button","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:"Understood"})})})]})},o=e=>{let{size:t="md",schema:n,entity:o}=e,[u,m]=(0,s.useState)(!1),{isSchemaLocked:x,reason:h,fdwType:p}=(0,i.BQ)({schema:n});return x?(0,a.jsx)(c.Z,{showIcon:"sm"!==t,type:"note",title:"sm"===t?"Viewing protected schema":"Viewing ".concat(o," from a protected schema"),className:"[&_p]:!m-0","data-sentry-element":"Admonition","data-sentry-component":"ProtectedSchemaWarning","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:"fdw"===h&&"iceberg"===p?(0,a.jsxs)("p",{children:["The ",(0,a.jsx)("code",{className:"text-code-inline",children:n})," schema is used by Supabase to connect to analytics buckets and is read-only through the dashboard."]}):"fdw"===h&&"s3_vectors"===p?(0,a.jsxs)("p",{children:["The ",(0,a.jsx)("code",{className:"text-xs",children:n})," schema is used by Supabase to connect to vector buckets and is read-only through the dashboard."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"mb-2",children:["The ",(0,a.jsx)("code",{className:"text-code-inline",children:n})," schema is managed by Supabase and is read-only through the dashboard."]}),(0,a.jsxs)(l.lG,{open:u,onOpenChange:m,children:[(0,a.jsx)(l.zM,{asChild:!0,children:(0,a.jsx)(r.$,{type:"default",size:"tiny",onClick:()=>m(!0),children:"Learn more"})}),(0,a.jsx)(l.Cf,{children:(0,a.jsx)(d,{onClose:()=>m(!1)})})]})]})}):null}},37048:(e,t,n)=>{"use strict";n.d(t,{a:()=>l,h:()=>r});var a=n(80263),s=n(68152);let l=e=>{let{name:t}=e;return(0,a.jsx)("div",{className:"text-typography-body-light [[data-theme*=dark]_&]:text-typography-body-dark flex cursor-not-allowed items-center space-x-2 rounded bg-gray-600 py-0.5 px-2 text-sm","data-sentry-component":"BadgeDisabled","data-sentry-source-file":"Badges.tsx",children:(0,a.jsx)("span",{className:"opacity-50",children:t})})},r=e=>{let{name:t,handleRemove:n}=e;return(0,a.jsxs)("div",{className:"text-typography-body-light [[data-theme*=dark]_&]:text-typography-body-dark flex items-center space-x-2 rounded bg-surface-300 py-0.5 px-2 text-sm",onClick:e=>e.preventDefault(),"data-sentry-component":"BadgeSelected","data-sentry-source-file":"Badges.tsx",children:[(0,a.jsx)("span",{children:t}),(0,a.jsx)(s.A,{size:12,className:"cursor-pointer opacity-50 transition hover:opacity-100",onClick:e=>{e.preventDefault(),e.stopPropagation(),n()},"data-sentry-element":"X","data-sentry-source-file":"Badges.tsx"})]})}},37253:(e,t,n)=>{var a=n(48550),s=n(92479),l=n(50084);e.exports=s(function(e,t){return l(e)?a(e,t):[]})},46087:(e,t,n)=>{"use strict";n.d(t,{$:()=>i,s:()=>r});var a=n(53239),s=n(23850),l=n(73969);function r(e){let{enabled:t,urlKey:n,select:l,onError:r}=e,[i,c]=(0,s.ZA)(n,s.tU.withOptions({history:"push",clearOnDefault:!0})),d=(0,a.useMemo)(()=>i?l(i):void 0,[i,l]);return(0,a.useEffect)(()=>{t&&i&&!d&&(r(Error("not found"),i),c(null))},[t,r,i,c,d]),{value:d,setValue:c}}let i=(e,t,n)=>{t!==e.current?l.oR.error(n):e.current=null}},48550:(e,t,n)=>{var a=n(45558),s=n(10116),l=n(59568),r=n(71057),i=n(10876),c=n(99582);e.exports=function(e,t,n,d){var o=-1,u=s,m=!0,x=e.length,h=[],p=t.length;if(!x)return h;n&&(t=r(t,i(n))),d?(u=l,m=!1):t.length>=200&&(u=c,m=!1,t=new a(t));e:for(;++o<x;){var y=e[o],f=null==n?y:n(y);if(y=d||0!==y?y:0,m&&f==f){for(var g=p;g--;)if(t[g]===f)continue e;h.push(y)}else u(t,f,d)||h.push(y)}return h}},53407:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]])},54207:(e,t,n)=>{"use strict";n.d(t,{_:()=>y});var a=n(80263),s=n(30788),l=n.n(s),r=n(37253),i=n.n(r),c=n(76174),d=n(23892),o=n(53239),u=n(61548),m=n(80100),x=n(29244),h=n(97757),p=n(37048);let y=e=>{let{options:t,value:n,placeholder:s,searchPlaceholder:r="Search for option",disabled:y=!1,onChange:f=()=>{}}=e,[g,j]=(0,o.useState)(!1),[v,S]=(0,o.useState)(n||[]),b=n||v,N=l()(t,["disabled"],["desc"]),_=e=>{let n=void 0!==(b||[]).find(t=>t===e.value)?[...i()(b,e.value)]:[...b.concat([e.value])],a=t.filter(e=>e.disabled).map(e=>e.name),s=[...new Set(n.concat(a))];S(s),f(s)};return(0,a.jsx)("div",{className:y?"pointer-events-none opacity-50":"","data-sentry-component":"MultiSelectV2","data-sentry-source-file":"MultiSelectV2.tsx",children:(0,a.jsxs)(u.AM,{open:g,onOpenChange:j,modal:!1,"data-sentry-element":"Popover_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:[(0,a.jsx)(u.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:(0,a.jsxs)("div",{className:(0,m.cn)("relative border border-strong bg-control rounded","flex w-full flex-wrap items-start gap-1.5 p-1.5 cursor-pointer","".concat(0===b.length?"h-9":"")),onClick:()=>j(!0),children:[0===b.length&&s&&(0,a.jsx)("div",{className:"px-2 text-sm text-foreground-light h-full flex items-center",children:s}),b.map((e,t)=>{var n;let s="".concat(e,"-").concat(t),l=N.find(t=>t.value===e),r=null!=(n=null==l?void 0:l.disabled)&&n;return l?r?(0,a.jsx)(p.a,{name:l.name},s):(0,a.jsx)(p.h,{name:l.name,handleRemove:()=>_(l)},s):(0,a.jsx)(a.Fragment,{})}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pl-3 pr-2 flex space-x-1 items-center cursor-pointer ",children:(0,a.jsx)(c.A,{size:16,strokeWidth:2,className:"text-foreground-lighter","data-sentry-element":"ChevronDown","data-sentry-source-file":"MultiSelectV2.tsx"})})]})}),(0,a.jsx)(u.hl,{className:"p-0 w-96 border-strong",side:"bottom",align:"start","data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:(0,a.jsxs)(x.uB,{"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:[(0,a.jsx)(x.G7,{placeholder:r,"data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx"}),(0,a.jsxs)(x.oI,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:[(0,a.jsx)(x.xL,{"data-sentry-element":"CommandEmpty_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:"No options found"}),(0,a.jsx)(x.L$,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:(0,a.jsx)(h.FK,{className:(0,m.cn)(N.length>7?"h-[210px]":""),"data-sentry-element":"ScrollArea","data-sentry-source-file":"MultiSelectV2.tsx",children:null==N?void 0:N.map(e=>{let t=!!(b&&b.find(t=>t===e.value));return(0,a.jsx)(x.h_,{value:e.value,className:"cursor-pointer w-full",onClick:()=>_(e),onSelect:()=>_(e),children:(0,a.jsxs)("div",{className:"w-full flex items-center justify-between",children:[e.name,t&&(0,a.jsx)(d.A,{size:14})]})},e.id)})})})]})]})})]})})}},54831:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},56748:(e,t,n)=>{"use strict";n.d(t,{Y:()=>a});let a={list:e=>["projects",e,"fdws"]}},57384:(e,t,n)=>{"use strict";n.d(t,{k:()=>r});var a=n(23850),s=n(53239),l=n(22891);let r=()=>{var e;let{ref:t}=(0,l.g)(),n=t&&t.length>0&&window.localStorage.getItem(l.rS.LAST_SELECTED_SCHEMA(t))||"public",[r,i]=(e=(0,s.useMemo)(()=>n,[t]),(0,a.ZA)("schema",a.tU.withDefault(e).withOptions({clearOnDefault:!1})));return(0,s.useEffect)(()=>{t&&t.length>0&&window.localStorage.setItem(l.rS.LAST_SELECTED_SCHEMA(t),r)},[r,t]),{selectedSchema:r,setSelectedSchema:i}}},66959:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("DatabaseZap",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]])},67317:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/database/indexes",function(){return n(1560)}])},68296:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var a=n(80263),s=n(80814),l=n(91958),r=n(93873),i=n(22730),c=n(78937),d=n(2657),o=n(9620),u=n(9497),m=n(29471),x=n(54278);let h=()=>{let{data:e}=(0,o.YA)(),t=(0,s.useRouter)().pathname.split("/")[4],{data:n}=(0,i.z)({projectRef:null==e?void 0:e.ref,connectionString:null==e?void 0:e.connectionString}),{data:u}=(0,c.Q)({projectRef:null==e?void 0:e.ref}),m=void 0!==(null!=n?n:[]).find(e=>"pg_net"===e.name),h=(null==u?void 0:u.selected_addons.find(e=>"pitr"===e.type))!==void 0,p=(0,l.p4)(),{databaseReplication:y,databaseRoles:f,integrationsWrappers:g}=(0,d.x)(["database:replication","database:roles","integrations:wrappers"]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(r.l,{page:t,menu:(0,x.k)(e,{pgNetExtensionExists:m,pitrEnabled:h,columnLevelPrivileges:p,showPgReplicate:y,showRoles:f,showWrappers:g}),"data-sentry-element":"ProductMenu","data-sentry-source-file":"DatabaseLayout.tsx"})})},p=(0,u.r)(e=>{let{children:t}=e;return(0,a.jsx)(m.k,{product:"Database",productMenu:(0,a.jsx)(h,{}),isBlocking:!1,"data-sentry-element":"ProjectLayout","data-sentry-component":"DatabaseLayout","data-sentry-source-file":"DatabaseLayout.tsx",children:t})})},69988:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]])},74195:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]])},74310:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},77444:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},84438:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var a=n(80263),s=n(72112),l=n(32157),r=n(23892),i=n(90376),c=n(53239),d=n(32775),o=n(80090),u=n(9620),m=n(99779),x=n(73640),h=n(20033),p=n(61548),y=n(29244),f=n(97757);let g=e=>{let{className:t,disabled:n=!1,size:g="tiny",showError:j=!0,selectedSchemaName:v,supportSelectAll:S=!1,excludedSchemas:b=[],onSelectSchema:N,onSelectCreateSchema:_,portal:C=!0,align:A="start"}=e,[w,E]=(0,c.useState)(!1),{can:k}=(0,o.Qp)(s.aG.TENANT_SQL_ADMIN_WRITE,"schemas"),{data:P}=(0,u.YA)(),{data:I,isLoading:T,isSuccess:R,isError:q,error:L,refetch:D}=(0,d.w$)({projectRef:null==P?void 0:P.ref,connectionString:null==P?void 0:P.connectionString}),M=(I||[]).filter(e=>!b.includes(e.name)).sort((e,t)=>e.name.localeCompare(t.name));return(0,a.jsxs)("div",{className:t,"data-sentry-component":"SchemaSelector","data-sentry-source-file":"SchemaSelector.tsx",children:[T&&(0,a.jsx)(m.$,{type:"default",className:"w-full [&>span]:w-full",size:g,disabled:!0,children:(0,a.jsx)(x.E,{className:"w-full h-3 bg-foreground-muted"})},"schema-selector-skeleton"),j&&q&&(0,a.jsxs)(h.Fc,{variant:"warning",className:"!px-3 !py-3",children:[(0,a.jsx)(h.XL,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,a.jsxs)(h.TN,{className:"text-xs mb-2 break-words",children:["Error: ",null==L?void 0:L.message]}),(0,a.jsx)(m.$,{type:"default",size:"tiny",onClick:()=>D(),children:"Reload schemas"})]}),R&&(0,a.jsxs)(p.AM,{open:w,onOpenChange:E,modal:!1,children:[(0,a.jsx)(p.Wv,{asChild:!0,children:(0,a.jsx)(m.$,{size:g,disabled:n,type:"default","data-testid":"schema-selector",className:"w-full [&>span]:w-full !pr-1 space-x-1",iconRight:(0,a.jsx)(l.A,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:v?(0,a.jsxs)("div",{className:"w-full flex gap-1",children:[(0,a.jsx)("p",{className:"text-foreground-lighter",children:"schema"}),(0,a.jsx)("p",{className:"text-foreground",children:"*"===v?"All schemas":v})]}):(0,a.jsx)("div",{className:"w-full flex gap-1",children:(0,a.jsx)("p",{className:"text-foreground-lighter",children:"Choose a schema..."})})})}),(0,a.jsx)(p.hl,{className:"p-0 min-w-[200px] pointer-events-auto",side:"bottom",align:A,portal:C,sameWidthAsTrigger:!0,children:(0,a.jsxs)(y.uB,{children:[(0,a.jsx)(y.G7,{placeholder:"Find schema..."}),(0,a.jsxs)(y.oI,{children:[(0,a.jsx)(y.xL,{children:"No schemas found"}),(0,a.jsx)(y.L$,{children:(0,a.jsxs)(f.FK,{className:(M||[]).length>7?"h-[210px]":"",children:[S&&(0,a.jsxs)(y.h_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{N("*"),E(!1)},onClick:()=>{N("*"),E(!1)},children:[(0,a.jsx)("span",{children:"All schemas"}),"*"===v&&(0,a.jsx)(r.A,{className:"text-brand",strokeWidth:2,size:16})]},"select-all"),null==M?void 0:M.map(e=>(0,a.jsxs)(y.h_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{N(e.name),E(!1)},onClick:()=>{N(e.name),E(!1)},children:[(0,a.jsx)("span",{children:e.name}),v===e.name&&(0,a.jsx)(r.A,{className:"text-brand",strokeWidth:2,size:16})]},e.id))]})}),void 0!==_&&k&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.fx,{}),(0,a.jsx)(y.L$,{children:(0,a.jsxs)(y.h_,{className:"cursor-pointer flex items-center gap-x-2 w-full",onSelect:()=>{_(),E(!1)},onClick:()=>{_(),E(!1)},children:[(0,a.jsx)(i.A,{size:12}),"Create a new schema"]})})]})]})]})})]})]})}},98103:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]])},99940:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])}},e=>{e.O(0,[60858,15599,16110,27764,36538,44033,26616,76984,72391,35035,40545,596,10508,48340,75187,29471,91312,63335,90636,46593,38792],()=>e(e.s=67317)),_N_E=e.O()}]);