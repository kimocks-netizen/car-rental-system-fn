try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="98196b4e-ba01-4c4a-8957-6d999860ce40",e._sentryDebugIdIdentifier="sentry-dbid-98196b4e-ba01-4c4a-8957-6d999860ce40")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65214],{11053:(e,t,s)=>{"use strict";s.d(t,{o:()=>l});var a=s(67850),n=s(24523),r=s(24735);async function i(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let{data:a,error:r}=await (0,n.Jt)("/v1/projects/{ref}/config/auth/signing-keys/legacy",{params:{path:{ref:s}},signal:t});return r&&(0,n.H4)(r),a}let l=function(e){let{projectRef:t}=e,{enabled:s,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.I)({queryKey:r.H.legacy(t),queryFn:e=>{let{signal:s}=e;return i({projectRef:t},s)},enabled:s&&!!t,retry:!1,refetchOnWindowFocus:!1,...n})}},14589:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/settings/jwt/signing-keys",function(){return s(15922)}])},15922:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eq});var a=s(80263),n=s(72112),r=s(88712),i=s(12123),l=s(33200),o=s(63685),d=s(53239),c=s(73969),u=s(22891),y=s(25580),x=s(53931),m=s(18563),h=s(51355),g=s(80210),p=s(24523),f=s(24735);async function j(e){if(!e.projectRef)throw Error("projectRef is required");let{data:t,error:s}=await (0,p.yH)("/v1/projects/{ref}/config/auth/signing-keys/{id}",{params:{path:{ref:e.projectRef,id:e.keyId}}});return s&&(0,p.H4)(s),t}let v=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,h.jE)();return(0,g.n)({mutationFn:e=>j(e),async onSuccess(t,s,n){let{projectRef:r}=s;await a.invalidateQueries({queryKey:f.H.list(r)}),await (null==e?void 0:e(t,s,n))},async onError(e,s,a){void 0===t?c.oR.error("Failed to delete JWT signing key: ".concat(e.message)):t(e,s,a)},...s})};async function k(e){if(!e.projectRef)throw Error("projectRef is required");let{data:t,error:s}=await (0,p.F6)("/v1/projects/{ref}/config/auth/signing-keys/{id}",{params:{path:{ref:e.projectRef,id:e.keyId}},body:{status:e.status}});return s&&(0,p.H4)(s),t}let b=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,h.jE)();return(0,g.n)({mutationFn:e=>k(e),async onSuccess(t,s,n){let{projectRef:r}=s;await a.invalidateQueries({queryKey:f.H.list(r)}),await (null==e?void 0:e(t,s,n))},async onError(e,s,a){void 0===t?c.oR.error("Failed to update new JWT signing key: ".concat(e.message)):t(e,s,a)},...s})};var w=s(67850);async function N(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let{data:a,error:n}=await (0,p.Jt)("/v1/projects/{ref}/config/auth/signing-keys",{params:{path:{ref:s}},signal:t});return n&&(0,p.H4)(n),a}let S=function(e){let{projectRef:t}=e,{enabled:s,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,w.I)({queryKey:f.H.list(t),queryFn:e=>{let{signal:s}=e;return N({projectRef:t},s)},enabled:s&&!!t,...a})};async function A(e){if(!e.projectRef)throw Error("projectRef is required");let{data:t,error:s}=await (0,p.bE)("/v1/projects/{ref}/config/auth/signing-keys/legacy",{params:{path:{ref:e.projectRef}}});return s&&(0,p.H4)(s),t}let C=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,h.jE)();return(0,g.n)({mutationFn:e=>A(e),async onSuccess(t,s,n){let{projectRef:r}=s;await a.invalidateQueries({queryKey:f.H.legacy(r)}),await a.invalidateQueries({queryKey:f.H.list(r)}),await (null==e?void 0:e(t,s,n))},async onError(e,s,a){void 0===t?c.oR.error("Failed to enable use of JWT signing keys with legacy JWT secret: ".concat(e.message)):t(e,s,a)},...s})};var T=s(11053),R=s(9620),_=s(78039),P=s(78511),J=s(95137),E=s(99779),I=s(22806),D=s(94335),K=s(74195),F=s(85372);let W=()=>(0,a.jsx)(F.T,{bgAlt:!0,className:"pb-10","data-sentry-element":"FeatureBanner","data-sentry-component":"SigningKeysComingSoonBanner","data-sentry-source-file":"signing-keys-coming-soon.tsx",children:(0,a.jsxs)("div",{className:"flex flex-col gap-0 z-[2]",children:[(0,a.jsx)("p",{className:"text-sm text-foreground",children:"JWT signing keys are coming soon"}),(0,a.jsx)("p",{className:"text-sm text-foreground-lighter lg:max-w-sm 2xl:max-w-none",children:"We're rolling out JWT signing keys to better support your application needs."}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(E.$,{type:"default",icon:(0,a.jsx)(K.A,{}),"data-sentry-element":"Button","data-sentry-source-file":"signing-keys-coming-soon.tsx",children:(0,a.jsx)("a",{href:"https://github.com/orgs/supabase/discussions/29289",target:"_blank",rel:"noreferrer",children:"Learn more"})})})]})});var L=s(86841);let H=e=>{let{onClick:t,isLoading:s}=e;return(0,a.jsx)(F.T,{bgAlt:!0,"data-sentry-element":"FeatureBanner","data-sentry-component":"StartUsingJwtSigningKeysBanner","data-sentry-source-file":"start-using-keys-banner.tsx",children:(0,a.jsxs)("div",{className:"flex flex-col gap-0 z-[2]",children:[(0,a.jsx)("p",{className:"text-sm text-foreground",children:"Start using JWT signing keys"}),(0,a.jsx)("p",{className:"text-sm text-foreground-lighter lg:max-w-sm 2xl:max-w-none",children:"Right now your project is using the legacy JWT secret. To start taking advantage of the new JWT signing keys, migrate your project's secret to the new set up."}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(E.$,{type:"primary",icon:(0,a.jsx)(L.A,{}),onClick:t,loading:s,"data-sentry-element":"Button","data-sentry-source-file":"start-using-keys-banner.tsx",children:"Migrate JWT secret"})})]})})},q=(0,d.forwardRef)((e,t)=>{let{title:s,description:n,buttonLabel:r,onClick:i,loading:l,icon:o,type:d,...c}=e;return(0,a.jsx)(_.Zp,{className:"first:rounded-b-none last:rounded-t-none shadow-none only:rounded-lg",ref:t,...c,children:(0,a.jsxs)(_.aR,{className:"lg:flex-row lg:items-center gap-3 lg:gap-10 py-4 border-0",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 flex-1 grow",children:[(0,a.jsx)(_.ZB,{className:"text-sm",children:s}),(0,a.jsx)(_.BT,{className:"max-w-xl",children:n})]}),(0,a.jsx)("div",{className:"flex lg:justify-end flex-",children:(0,a.jsx)(E.$,{onClick:i,loading:l,icon:o,type:d,children:r})})]})})});q.displayName="ActionPanel";var z=s(53434),O=s.n(z);async function B(e){if(!e.projectRef)throw Error("projectRef is required");let{data:t,error:s}=await (0,p.bE)("/v1/projects/{ref}/config/auth/signing-keys",{params:{path:{ref:e.projectRef}},body:{algorithm:e.algorithm,status:e.status,...e.private_jwk?{private_jwk:e.private_jwk}:null}});return s&&(0,p.H4)(s),t}let M=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,h.jE)();return(0,g.n)({mutationFn:e=>B(e),async onSuccess(t,s,n){let{projectRef:r}=s;await a.invalidateQueries({queryKey:f.H.list(r)}),await (null==e?void 0:e(t,s,n))},async onError(e,s,a){void 0===t?c.oR.error("Failed to create new JWT signing key: ".concat(e.message)):t(e,s,a)},...s})},U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Z=" 	\n\r=".split("");function G(e,t,s){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;)s(U[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6;else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;)s(U[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6}(()=>{let e=Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Z.length;t+=1)e[Z[t].charCodeAt(0)]=-2;for(let t=0;t<U.length;t+=1)e[U[t].charCodeAt(0)]=t})();var Q=s(883),V=s(66329),Y=s(21650),$=s(48156),X=s(80100);let ee=d.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("textarea",{className:(0,X.cn)("flex min-h-[80px] w-full rounded-md border border-control bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-foreground-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...n})});ee.displayName="Textarea";let et=["kty","n","e","p","q","d","dq","dp","qi"],es=["kty","crv","x","y","d"],ea=e=>{let{projectRef:t,onClose:s}=e,[n,r]=(0,d.useState)("ES256"),[i,l]=(0,d.useState)(!1),[o,u]=(0,d.useState)(""),[y,x]=(0,d.useState)(!1),m=(0,d.useMemo)(()=>{let e;if(!o.replace(/\s+/g,""))return null;if("HS256"===n)return o.length<16?"Secret must be at least 16 letters long":null;try{e=JSON.parse(o)}catch(e){return"Private key is not valid JSON"}if("object"!=typeof e||!e)return"Private key must be a JSON object";if("string"!=typeof e.kty||!e.kty)return"Private key must have a kty property";if("RS256"===n){if("RSA"!==e.kty)return"Private key must be of RSA type";if("AQAB"!==e.e)return"RSA private keys must use the 65537 (AQAB) public exponent";for(let t of et)if("string"!=typeof e[t]||!e[t])return"Incomplete RSA private key, required properties are: ".concat(et.join(", "))}else if("ES256"===n){if("EC"!==e.kty)return"Private key must be of EC type";if("P-256"!==e.crv)return"EC private keys must use P-256 curve";for(let t of es)if("string"!=typeof e[t]||!e[t])return"Incomplete EC private key, required properties are: ".concat(es.join(", "))}return null},[o,n]),{mutate:h,isPending:g}=M({onSuccess:()=>{c.oR.success("Standby key created successfully"),s()},onError:e=>{let t=e.message;if(t.includes("Please wait until")){let e=t.replace("Please wait until ","").replace("before attempting this request again.","").trim(),s=O()(e);s.isValid()&&(t="Please wait for ".concat(s.fromNow(!0)," before attempting this request again."))}c.oR.error("Failed to add new standby key: ".concat(t))}}),p=async()=>{h({projectRef:t,algorithm:n,status:"standby",private_jwk:i?"HS256"===n?{kty:"oct",k:y?o.replace(/\s+/g,"").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""):function(e){let t=[],s=e=>{t.push(e)},a={queue:0,queuedBits:0};return function(e,t){for(let s=0;s<e.length;s+=1){let a=e.charCodeAt(s);if(a>55295&&a<=56319){let t=(a-55296)*1024&65535;a=(e.charCodeAt(s+1)-56320&65535|t)+65536,s+=1}!function(e,t){if(e<=127)return t(e);if(e<=2047){t(192|e>>6),t(128|63&e);return}if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|63&e);return}if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|63&e);return}throw Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}(a,t)}}(e,e=>{G(e,a,s)}),G(null,a,s),t.join("")}(o)}:JSON.parse(o):null})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(J.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"create-key-dialog.tsx",children:(0,a.jsx)(J.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"create-key-dialog.tsx",children:"Create a new Standby Key"})}),(0,a.jsx)(J.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"create-key-dialog.tsx"}),(0,a.jsx)(J.OO,{className:"space-y-4","data-sentry-element":"DialogSection","data-sentry-source-file":"create-key-dialog.tsx",children:(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:["Adds a new JSON Web Token signing key. Once all of your application's components have picked it up you can rotate the current key with it.",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"This action does not invalidate existing tokens, so your users remain signed in."]})}),(0,a.jsx)(J.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"create-key-dialog.tsx"}),(0,a.jsxs)(J.OO,{className:"flex flex-col gap-4","data-sentry-element":"DialogSection","data-sentry-source-file":"create-key-dialog.tsx",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)(Q.J,{htmlFor:"algorithm","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"create-key-dialog.tsx",children:"Choose signing algorithm:"}),(0,a.jsxs)(V.l6,{name:"algorithm",value:n,onValueChange:e=>r(e),"data-sentry-element":"Select_Shadcn_","data-sentry-source-file":"create-key-dialog.tsx",children:[(0,a.jsx)(V.bq,{id:"algorithm","data-sentry-element":"SelectTrigger_Shadcn_","data-sentry-source-file":"create-key-dialog.tsx",children:(0,a.jsx)(V.yv,{placeholder:"Select algorithm","data-sentry-element":"SelectValue_Shadcn_","data-sentry-source-file":"create-key-dialog.tsx"})}),(0,a.jsxs)(V.gC,{"data-sentry-element":"SelectContent_Shadcn_","data-sentry-source-file":"create-key-dialog.tsx",children:[(0,a.jsxs)(V.eb,{value:"ES256","data-sentry-element":"SelectItem_Shadcn_","data-sentry-source-file":"create-key-dialog.tsx",children:[(0,a.jsx)("span",{children:"ES256 (ECC)"}),(0,a.jsx)(Y.E,{variant:"brand",className:"ml-2","data-sentry-element":"Badge","data-sentry-source-file":"create-key-dialog.tsx",children:"Recommended"})]}),(0,a.jsx)(V.eb,{value:"RS256","data-sentry-element":"SelectItem_Shadcn_","data-sentry-source-file":"create-key-dialog.tsx",children:"RS256 (RSA)"}),(0,a.jsx)(V.eb,{value:"HS256","data-sentry-element":"SelectItem_Shadcn_","data-sentry-source-file":"create-key-dialog.tsx",children:"HS256 (Shared Secret)"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)(Q.J,{htmlFor:"byok",className:"flex items-center gap-x-2","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"create-key-dialog.tsx",children:[(0,a.jsx)($.S,{id:"byok",checked:i,onCheckedChange:e=>l(!!e),"data-sentry-element":"Checkbox_Shadcn_","data-sentry-source-file":"create-key-dialog.tsx"}),"HS256"===n?"Import an existing secret":"Import an existing private key"]}),i&&(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(ee,{className:"font-mono",placeholder:"HS256"===n?"Type in your JWT secret":"Add a private key in JWK (JSON Web Key) format",value:o,onChange:e=>{u(e.target.value)},autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false"}),m&&(0,a.jsx)("p",{className:"text-red-900 text-sm",children:m})]}),i&&"HS256"===n&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(Q.J,{htmlFor:"base64",className:"flex items-center gap-x-2",children:[(0,a.jsx)($.S,{id:"base64",checked:y,onCheckedChange:e=>x(!!e)}),"Secret is already Base64 encoded"]})})]})]}),(0,a.jsx)(J.Es,{"data-sentry-element":"DialogFooter","data-sentry-source-file":"create-key-dialog.tsx",children:(0,a.jsx)(E.$,{onClick:()=>p(),disabled:g||!!m,loading:g,"data-sentry-element":"Button","data-sentry-source-file":"create-key-dialog.tsx",children:"Create standby key"})})]})};var en=s(19820),er=s(80421);function ei(e){let{selectedKey:t,restURL:s,onClose:n}=e,r=(0,d.useMemo)(()=>new URL("/auth/v1/.well-known/jwks.json",s),[s]),i=(0,d.useMemo)(()=>JSON.stringify(t.public_jwk,null,2),[t]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(J.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"key-details-dialog.tsx",children:(0,a.jsx)(J.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"key-details-dialog.tsx",children:"Key Details"})}),(0,a.jsx)(J.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"key-details-dialog.tsx"}),(0,a.jsxs)(J.OO,{className:"flex flex-col gap-6","data-sentry-element":"DialogSection","data-sentry-source-file":"key-details-dialog.tsx",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(Q.J,{htmlFor:"key-id","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"key-details-dialog.tsx",children:"Key ID"}),(0,a.jsx)(er.A,{id:"key-id",value:t.id,readOnly:!0,"data-sentry-element":"Input","data-sentry-source-file":"key-details-dialog.tsx"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(Q.J,{htmlFor:"discovery-url","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"key-details-dialog.tsx",children:"Discovery URL"}),(0,a.jsx)(er.A,{id:"discovery-url",value:r.href,readOnly:!0,"data-sentry-element":"Input","data-sentry-source-file":"key-details-dialog.tsx"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)(Q.J,{htmlFor:"jwk",className:"flex flex-row gap-2 items-center","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"key-details-dialog.tsx",children:[(0,a.jsx)(en.A,{className:"size-4 text-foreground-light","data-sentry-element":"FileKey","data-sentry-source-file":"key-details-dialog.tsx"}),"Public Key (JSON Web Key format)"]}),(0,a.jsx)(ee,{className:"font-mono text-sm",rows:8,value:i,readOnly:!0,"data-sentry-element":"Textarea","data-sentry-source-file":"key-details-dialog.tsx"})]})]}),(0,a.jsx)(J.Es,{"data-sentry-element":"DialogFooter","data-sentry-source-file":"key-details-dialog.tsx",children:(0,a.jsx)(E.$,{onClick:()=>n(),"data-sentry-element":"Button","data-sentry-source-file":"key-details-dialog.tsx",children:"OK"})})]})}var el=s(23729),eo=s(39406),ed=s(74310),ec=s(72715),eu=s(80356),ey=s(86510),ex=s(73640);let em={HS256:{label:"HS256 (Shared Secret)",name:"HMAC with SHA-256",description:"JWT signatures are produced by a shared secret.",pros:["Simple to use","Verifying and creating JWTs is very fast and not resource intensive"],cons:["Usually not compatible with SOC2 and other security compliance frameworks","Requires secure key exchange","Not suitable when the verifier shouldn't be able to sign tokens","Key needs to be kept secret on both sides"],shortDescription:"HMAC with SHA-256: Fast, simple, requires secure key exchange",links:[{url:"https://datatracker.ietf.org/doc/html/rfc7518#section-3.2",label:"RFC 7518 Specification Section 3.2"}]},RS256:{label:"RSA 2048",name:"RSA with SHA-256",description:"JWT is signed with a private and verified with a public RSA key.",pros:["Compatible with SOC2 and other security compliance frameworks","RSA is widely adopted and easier to work with","Public key does not need to be kept secret"],cons:["Larger JWT sizes than other choices","Slower to create and verify JWT than other choices"],shortDescription:"RSA with SHA-256: Widely adopted, has public key, slower",links:[{url:"https://datatracker.ietf.org/doc/html/rfc7518#section-3.3",label:"RFC 7518 Specification Section 3.3"}]},ES256:{label:"ECC (P-256)",name:"ECDSA with SHA-256",description:"JWT is signed with a private and verified with a public ECC key using the NIST P-256 curve.",pros:["Compatible with SOC2 and other security compliance frameworks","Faster to create and verify signatures than RSA","Ideal tradeoff between JWT size and efficiency","Public key does not need to be kept secret"],cons:["Wide support but some libraries might make it harder to work with than RSA"],shortDescription:"ECDSA with SHA-256: Faster, more efficient alternative to RSA",links:[{url:"https://datatracker.ietf.org/doc/html/rfc7518#section-3.4",label:"RFC 7518 Specification Section 3.4"}]}},eh=Object.keys(em).reduce((e,t)=>(e[t]=em[t].label,e),{});Object.keys(em).reduce((e,t)=>(e[t]=em[t].shortDescription,e),{});var eg=s(60254);function ep(e){var t;let{projectRef:s,standbyKey:n,inUseKey:r,onClose:i}=e,[l,u]=(0,d.useState)(!1),[y,x]=(0,d.useState)(!1),[m,h]=(0,d.useState)(!1),{data:g,isLoading:p}=(0,eo._)({projectRef:s}),{mutate:f,isPending:j}=b({onSuccess:()=>{c.oR.success("Signing key rotated successfully"),i()},onError:e=>{c.oR.error("Failed to rotate signing key: ".concat(e.message))}}),v=null!=(t=null==g?void 0:g.filter(e=>{let{verify_jwt:t}=e;return t}))?t:[];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(J.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"rotate-key-dialog.tsx",children:[(0,a.jsx)(J.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"rotate-key-dialog.tsx",children:"Rotate JWT signing key"}),(0,a.jsxs)(J.rr,{"data-sentry-element":"DialogDescription","data-sentry-source-file":"rotate-key-dialog.tsx",children:["Change the key used by Supabase Auth to create new JSON Web Tokens. Non-expired tokens remain ",(0,a.jsx)("span",{className:"text-brand",children:"valid and accepted"}),"!"]})]}),(0,a.jsx)(J.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"rotate-key-dialog.tsx"}),(0,a.jsx)(J.OO,{className:"bg","data-sentry-element":"DialogSection","data-sentry-source-file":"rotate-key-dialog.tsx",children:(0,a.jsxs)("div",{className:"grid grid-cols-[minmax(0,1fr)_auto_minmax(0,1fr)] items-center gap-x-4 gap-y-2",children:[(0,a.jsxs)(Y.E,{className:(0,X.cn)(eg.PA.standby,"px-4 py-1 gap-2 flex flex-row items-center uppercase"),"data-sentry-element":"Badge","data-sentry-source-file":"rotate-key-dialog.tsx",children:[(0,a.jsx)(o.A,{className:"size-4","data-sentry-element":"Timer","data-sentry-source-file":"rotate-key-dialog.tsx"}),"Standby key"]}),(0,a.jsx)("div",{children:(0,a.jsx)(ed.A,{className:"size-4 text-foreground-light","data-sentry-element":"ArrowRight","data-sentry-source-file":"rotate-key-dialog.tsx"})}),(0,a.jsx)("div",{children:(0,a.jsxs)(Y.E,{className:(0,X.cn)(eg.PA.in_use,"px-4 py-1 gap-2 flex flex-row items-center uppercase"),"data-sentry-element":"Badge","data-sentry-source-file":"rotate-key-dialog.tsx",children:[(0,a.jsx)(ec.A,{className:"size-4","data-sentry-element":"Key","data-sentry-source-file":"rotate-key-dialog.tsx"}),"Current key"]})}),(0,a.jsx)("div",{className:"text-xs text-foreground-light font-mono text-center",children:eh[n.algorithm]}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{className:"col-span-3"}),(0,a.jsxs)(Y.E,{className:(0,X.cn)(eg.PA.in_use,"px-4 py-1 gap-2 flex flex-row items-center uppercase"),"data-sentry-element":"Badge","data-sentry-source-file":"rotate-key-dialog.tsx",children:[(0,a.jsx)(ec.A,{className:"size-4","data-sentry-element":"Key","data-sentry-source-file":"rotate-key-dialog.tsx"}),"Current key"]}),(0,a.jsx)("div",{children:(0,a.jsx)(ed.A,{className:"h-4 w-4 text-foreground-light","data-sentry-element":"ArrowRight","data-sentry-source-file":"rotate-key-dialog.tsx"})}),(0,a.jsxs)(Y.E,{className:(0,X.cn)(eg.PA.previously_used,"px-4 py-1 gap-2 flex flex-row items-center uppercase"),"data-sentry-element":"Badge","data-sentry-source-file":"rotate-key-dialog.tsx",children:[(0,a.jsx)(o.A,{className:"size-4","data-sentry-element":"Timer","data-sentry-source-file":"rotate-key-dialog.tsx"}),"Previous key"]}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{className:"text-xs text-foreground-light font-mono text-center",children:eh[r.algorithm]})]})}),(0,a.jsx)(J.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"rotate-key-dialog.tsx"}),(0,a.jsx)(J.OO,{className:"flex flex-col gap-4","data-sentry-element":"DialogSection","data-sentry-source-file":"rotate-key-dialog.tsx",children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ex.E,{className:"h-4 w-full"}),(0,a.jsx)(ex.E,{className:"h-4 w-full"}),(0,a.jsx)(ex.E,{className:"h-4 w-full"}),(0,a.jsx)(ex.E,{className:"h-4 w-full"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-sm",children:"To proceed please confirm:"}),(0,a.jsxs)(Q.J,{htmlFor:"understands-standby",className:"flex items-top gap-4 text-sm leading-none",children:[(0,a.jsx)($.S,{id:"understands-standby",className:"mt-0.5",checked:l,onCheckedChange:e=>u(!!e)}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"All of my application's components have picked up the standby key."}),(0,a.jsx)(el.G,{type:"default",icon:(0,a.jsx)(eu.A,{}),className:"px-1.5 py-2 mt-0.5",tooltip:{content:{className:"max-w-[320px] p-4",text:(0,a.jsxs)("p",{children:["If your application verifies JWTs on its own in backend servers, functions, lambdas or other such components, ensure that they've picked up and are verifying tokens against the standby key.",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"Recommendation: Periodically fetch the public keys from the project's"," ",(0,a.jsx)("code",{children:"jwks.json"})," endpoint."]})}}})]}),(0,a.jsxs)(Q.J,{htmlFor:"understands-previously-used",className:"flex items-top gap-4 text-sm leading-none",children:[(0,a.jsx)($.S,{className:"mt-0.5",id:"understands-previously-used",checked:y,onCheckedChange:e=>x(!!e)}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"To invalidate non-expired JWTs I need to explicitly revoke the currently used key."}),(0,a.jsx)(el.G,{type:"default",icon:(0,a.jsx)(eu.A,{}),className:"px-1.5 py-2 mt-0.5",tooltip:{content:{className:"max-w-[320px] p-4",text:(0,a.jsxs)("p",{children:["Rotating the signing key only changes what key is used by Supabase Auth to issue ",(0,a.jsx)("em",{className:"text-brand not-italic",children:"new tokens"}),".",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"To prevent users from being prematurely signed out, you have to manually revoke the current in use key after rotation.",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"Recommendation: If your JWT expiry time is 1 hour, wait at least 1 hour and 15 minutes before revoking the key."]})}}})]}),v.length>0&&(0,a.jsxs)(Q.J,{htmlFor:"edge-functions-verify-jwt",className:"flex gap-4 text-sm",children:[(0,a.jsx)($.S,{id:"edge-functions-verify-jwt",className:"mt-0.5",checked:m,onCheckedChange:e=>h(!!e)}),(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:["The following Edge Functions may stop functioning for signed-in users as they verify the legacy JWT secret:"," ",v.map(e=>{let{name:t}=e;return(0,a.jsxs)("a",{className:"",href:"../../functions/".concat(t,"/details"),target:"_blank",title:t,children:[(0,a.jsx)(ey.A,{className:"size-3 inline-block"})," ",(0,a.jsx)("code",{children:t})]})}).reduce((e,t)=>e.length>0?[...e,", ",t]:[t],[])]}),(0,a.jsx)(el.G,{type:"default",icon:(0,a.jsx)(eu.A,{}),className:"px-1.5 py-2 mt-0.5",tooltip:{content:{className:"max-w-[320px] p-4",text:(0,a.jsxs)("p",{children:["Some of your Edge Functions are set up to require a JWT in the"," ",(0,a.jsx)("code",{children:"Authorization"})," header signed with the"," ",(0,a.jsx)("em",{className:"text-brand not-italic",children:"legacy JWT secret"}),". Rotation causes"," ",(0,a.jsx)("em",{className:"text-brand not-italic",children:"invocations by signed-in users"})," ","to fail with HTTP 401 Unauthorized, as the JWT no longer meets this requirement.",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"Recommendation: Change all of your Edge Functions to no longer verify JWT and implement the verification logic in the function's code yourself by using the Supabase client library or any other library for working with JWT."]})}}})]})]})}),(0,a.jsx)(J.Es,{"data-sentry-element":"DialogFooter","data-sentry-source-file":"rotate-key-dialog.tsx",children:(0,a.jsx)(E.$,{onClick:()=>f({projectRef:s,keyId:n.id,status:"in_use"}),disabled:p||!y||!l||!!v.length&&!m,loading:j,"data-sentry-element":"Button","data-sentry-source-file":"rotate-key-dialog.tsx",children:"Rotate signing key"})})]})}var ef=s(97507),ej=s(77444),ev=s(93901),ek=s(74667),eb=s(71278),ew=s(77869),eN=s(91313),eS=s(13916),eA=s(21162),eC=s(41703),eT=s(46150),eR=s(28243);let e_=e=>{let{label:t,icon:s,title:n,description:r,links:i}=e;return(0,a.jsxs)(eR.jc,{closeDelay:50,openDelay:300,"data-sentry-element":"HoverCard","data-sentry-component":"InfoPill","data-sentry-source-file":"InfoPill.tsx",children:[(0,a.jsx)(eR.d0,{className:"min-w-0","data-sentry-element":"HoverCardTrigger","data-sentry-source-file":"InfoPill.tsx",children:(0,a.jsx)(Y.E,{className:"gap-2 py-2 h-6 min-w-0 overflow-hidden","data-sentry-element":"Badge","data-sentry-source-file":"InfoPill.tsx",children:(0,a.jsxs)("span",{className:"flex-1 flex items-center gap-2",children:[s," ",t]})})}),(0,a.jsxs)(eR.Et,{className:"w-80 flex items-start gap-3",side:"right",align:"center","data-sentry-element":"HoverCardContent","data-sentry-source-file":"InfoPill.tsx",children:[(0,a.jsx)("div",{className:"rounded-full bg-surface-300 p-2 flex-shrink-0",children:d.cloneElement(s,{className:"w-5 h-5",strokeWidth:1.5})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-semibold truncate",children:n}),(0,a.jsx)("p",{className:"text-xs text-foreground-light",children:r}),i&&i.length>0&&(0,a.jsx)("div",{className:"space-y-1 mt-2",children:i.map((e,t)=>(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-brand hover:text-brand-600 flex items-center",children:[(0,a.jsx)(ey.A,{className:"w-3 h-3 mr-1 flex-shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:e.label})]},t))})]})]})]})},eP=e=>{let{algorithm:t,legacy:s}=e,n=em[t];return(0,a.jsx)(e_,{label:(0,a.jsx)("span",{className:"pt-1 h-6",children:s?"Legacy ".concat(n.label):n.label}),icon:"HS256"===t?(0,a.jsx)(eC.A,{className:"size-4 flex-shrink-0"}):(0,a.jsx)(eT.A,{className:"size-4 flex-shrink-0"}),title:n.name,description:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("p",{children:n.description}),(0,a.jsxs)("p",{children:["Pros:",(0,a.jsx)("ul",{className:"list-disc",children:n.pros.map((e,t)=>(0,a.jsx)("li",{children:e},t))})]}),(0,a.jsxs)("p",{children:["Cons:"," ",(0,a.jsx)("ul",{className:"list-disc",children:n.cons.map((e,t)=>(0,a.jsx)("li",{children:e},t))}),(0,a.jsx)("br",{})]})]}),links:n.links,"data-sentry-element":"InfoPill","data-sentry-component":"AlgorithmHoverCard","data-sentry-source-file":"algorithm-hover-card.tsx"})},eJ=ef.P.create(P.Hj),eE=e=>{let{signingKey:t,setSelectedKey:s,setShownDialog:n,handlePreviouslyUsedKey:r,handleStandbyKey:i,legacyKey:l,standbyKey:d,isLoading:c=!1}=e;return(0,a.jsxs)(eJ,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto",transition:{duration:.2}},exit:{opacity:0,height:0},className:(0,X.cn)("in_use"!==t.status?"border-b border-dashed border-border":"border-b"),"data-sentry-element":"MotionTableRow","data-sentry-component":"SigningKeyRow","data-sentry-source-file":"signing-key-row.tsx",children:[(0,a.jsx)(P.nA,{className:"w-[150px] pr-0 py-2","data-sentry-element":"TableCell","data-sentry-source-file":"signing-key-row.tsx",children:(0,a.jsx)("div",{className:"flex -space-x-px items-center",children:(0,a.jsxs)(Y.E,{className:(0,X.cn)(eg.PA[t.status],"rounded-r-none","gap-2 w-full h-6","uppercase font-mono","border-r-0"),"data-sentry-element":"Badge","data-sentry-source-file":"signing-key-row.tsx",children:["standby"===t.status?(0,a.jsx)(o.A,{className:"size-4 flex-shrink-0"}):(0,a.jsx)(ec.A,{className:"size-4 flex-shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:eg.Uj[t.status]})]})})}),(0,a.jsx)(P.nA,{className:"font-mono truncate max-w-[100px] pl-0 py-2","data-sentry-element":"TableCell","data-sentry-source-file":"signing-key-row.tsx",children:(0,a.jsx)("div",{className:"min-w-0 flex",children:(0,a.jsx)(Y.E,{className:(0,X.cn)("bg-opacity-100 bg-200 border-foreground-muted","rounded-l-none","gap-2 py-2 h-6 min-w-0 overflow-hidden flex items-center flex-1"),"data-sentry-element":"Badge","data-sentry-source-file":"signing-key-row.tsx",children:(0,a.jsx)("span",{className:"truncate flex-1",title:t.id,children:t.id})})})}),(0,a.jsx)(P.nA,{className:"truncate max-w-[100px] py-2","data-sentry-element":"TableCell","data-sentry-source-file":"signing-key-row.tsx",children:(0,a.jsx)(eP,{algorithm:t.algorithm,legacy:t.id===(null==l?void 0:l.id),"data-sentry-element":"AlgorithmHoverCard","data-sentry-source-file":"signing-key-row.tsx"})}),("previously_used"===t.status||"revoked"===t.status)&&(0,a.jsx)(P.nA,{className:"text-right py-2 text-sm text-foreground-light whitespace-nowrap hidden lg:table-cell",children:O()(t.updated_at).fromNow()}),(0,a.jsx)(P.nA,{className:"text-right py-2","data-sentry-element":"TableCell","data-sentry-source-file":"signing-key-row.tsx",children:("in_use"!==t.status||"HS256"!==t.algorithm)&&(0,a.jsxs)(eA.rI,{children:[(0,a.jsx)(eA.ty,{asChild:!0,children:(0,a.jsx)(E.$,{type:"text",className:"px-1.5",loading:c,icon:(0,a.jsx)(ej.A,{className:"size-4"})})}),(0,a.jsxs)(eA.SQ,{align:"end",className:"w-52",children:["HS256"!==t.algorithm&&(0,a.jsxs)(eA._2,{onSelect:()=>{s(t),n("key-details")},children:[(0,a.jsx)(ev.A,{className:"mr-2 size-4"}),"View key details"]}),"standby"===t.status&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(eA._2,{onSelect:()=>r(t.id),className:"text-destructive",children:[(0,a.jsx)(ek.A,{className:"mr-2 size-4"}),"Move to previously used"]})}),"previously_used"===t.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eS.x,{disabled:!!d,onSelect:()=>i(t.id),tooltip:{content:{side:"left",text:d?"You may only have one standby key at a time":void 0}},children:[(0,a.jsx)(eb.A,{className:"mr-2 size-4"}),"Move to standby key"]}),(0,a.jsxs)(eA._2,{onSelect:()=>{s(t),n("revoke")},className:"text-destructive",children:[(0,a.jsx)(ew.A,{className:"mr-2 size-4"}),"Revoke key"]})]}),"revoked"===t.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eS.x,{disabled:!!d,onSelect:()=>i(t.id),tooltip:{content:{side:"left",text:d?"You may only have one standby key at a time":void 0}},children:[(0,a.jsx)(eb.A,{className:"mr-2 size-4"}),"Move to standby key"]}),(0,a.jsxs)(eA._2,{onSelect:()=>{s(t),n("delete")},className:"text-destructive",disabled:(null==l?void 0:l.id)===t.id,children:[(0,a.jsx)(eN.A,{className:"mr-2 size-4"}),"Delete permanently"]})]})]})]})})]},t.id)},eI=()=>{var e,t;let{ref:s}=(0,u.g)(),{data:n,isLoading:h}=(0,R.YA)(),g=(0,u._P)("newJwtSecrets"),[p,f]=(0,d.useState)(),[j,k]=(0,d.useState)(),[w,N]=(0,d.useState)(),{canReadAPIKeys:A,isLoading:K}=(0,y.u)(),{data:F,isLoading:L}=S({projectRef:s},{enabled:A}),{data:z,isLoading:O}=(0,T.o)({projectRef:s},{enabled:A}),{data:B,isLoading:M}=(0,m.L)({projectRef:s},{enabled:A}),{mutate:U,isPending:Z}=C({onSuccess:()=>{N(void 0),c.oR.success("Successfully migrated JWT secret!")}}),{mutate:G,isPending:Q}=b({onSuccess:()=>{er(),k(void 0)}}),{mutate:V,isPending:Y}=v({onSuccess:()=>er(),onError:()=>er()}),$=Q||Y||Z,X=(0,d.useMemo)(()=>F&&Array.isArray(F.keys)?F.keys.sort((e,t)=>{let s={standby:0,in_use:1,previously_used:2,revoked:3};return s[e.status]-s[t.status]||new Date(t.created_at).getTime()-new Date(e.created_at).getTime()}):[],[F]),ee=(0,d.useMemo)(()=>X.find(e=>"standby"===e.status),[X]),et=(0,d.useMemo)(()=>X.find(e=>"in_use"===e.status),[X]),es=(0,d.useMemo)(()=>X.filter(e=>"previously_used"===e.status),[X]),en=(0,d.useMemo)(()=>X.filter(e=>"revoked"===e.status),[X]),er=()=>{f(void 0),N(void 0)},el=async e=>{k(e),G({projectRef:s,keyId:e,status:"previously_used"},{onSuccess:()=>c.oR.success("Successfully moved key to previously used")})},eo=e=>{k(e),G({projectRef:s,keyId:e,status:"standby"},{onSuccess:()=>c.oR.success("Successfully moved key to standby")})};return A||K?h||L||O||M?(0,a.jsx)(x.yV,{}):g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"-space-y-px",children:A?z?(0,a.jsxs)(a.Fragment,{children:[ee&&(0,a.jsx)(q,{title:"Rotate Signing Key",description:"Switch the standby key to in use. All new JSON Web Tokens issued by Supabase Auth will be signed with this key.",buttonLabel:"Rotate keys",onClick:()=>N("rotate"),loading:Q,icon:(0,a.jsx)(l.A,{className:"size-4"}),type:"primary"}),!ee&&(0,a.jsx)(q,{title:"Create standby key",description:"Set up a new key which you can switch to once it has been picked up by all components of your application.",buttonLabel:"Create Standby Key",onClick:()=>N("create"),loading:$,type:"primary",icon:(0,a.jsx)(o.A,{className:"size-4"})})]}):(0,a.jsx)(H,{onClick:()=>N("legacy"),isLoading:Z}):null}),X.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:(0,a.jsx)(_.Zp,{className:"w-full overflow-hidden bg-surface-100 border rounded-md",children:(0,a.jsx)(_.Wu,{className:"p-0",children:(0,a.jsxs)(P.XI,{className:"p-5",children:[(0,a.jsx)(P.A0,{className:"bg-200",children:(0,a.jsxs)(P.Hj,{children:[(0,a.jsx)(P.nd,{className:"text-left font-mono uppercase text-xs text-foreground-muted h-auto py-2 pr-0 w-20",children:"Status"}),(0,a.jsx)(P.nd,{className:"text-left font-mono uppercase text-xs text-foreground-muted h-auto py-2 pl-0",children:"Key ID"}),(0,a.jsx)(P.nd,{className:"text-left font-mono uppercase text-xs text-foreground-muted h-auto py-2",children:"Type"}),(0,a.jsx)(P.nd,{className:"text-right font-mono uppercase text-xs text-foreground-muted h-auto py-2",children:"Actions"})]})}),(0,a.jsx)(P.BF,{children:(0,a.jsxs)(r.N,{children:[ee&&(0,a.jsx)(eE,{signingKey:ee,legacyKey:z,standbyKey:ee,isLoading:j===ee.id&&Q,setSelectedKey:f,setShownDialog:N,handleStandbyKey:eo,handlePreviouslyUsedKey:el},ee.id),et&&(0,a.jsx)(eE,{signingKey:et,setSelectedKey:f,setShownDialog:N,handleStandbyKey:eo,handlePreviouslyUsedKey:el,legacyKey:z,standbyKey:ee},et.id)]})})]})})})}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("h2",{children:"Previously used keys"}),(0,a.jsxs)("p",{className:"text-sm text-foreground-lighter",children:["These JWT signing keys are still used to"," ",(0,a.jsx)("em",{className:"text-brand not-italic",children:"verify tokens"})," that are yet to expire. Revoke once all tokens have expired."]})]}),(0,a.jsx)(_.Zp,{className:"overflow-hidden",children:(0,a.jsx)(_.Wu,{className:"p-0",children:es.length>0?(0,a.jsxs)(P.XI,{className:"p-5",children:[(0,a.jsx)(P.A0,{className:"bg-200",children:(0,a.jsxs)(P.Hj,{children:[(0,a.jsx)(P.nd,{className:"text-left font-mono uppercase text-xs text-foreground-muted h-auto py-2 pr-0 w-20",children:"Status"}),(0,a.jsx)(P.nd,{className:"text-left font-mono uppercase text-xs text-foreground-muted h-auto py-2 pl-0",children:"Key ID"}),(0,a.jsx)(P.nd,{className:"text-left font-mono uppercase text-xs text-foreground-muted h-auto py-2",children:"Type"}),(0,a.jsx)(P.nd,{className:"text-right font-mono uppercase text-xs text-foreground-muted h-auto py-2 hidden lg:table-cell",children:"Last rotated at"}),(0,a.jsx)(P.nd,{className:"text-right font-mono uppercase text-xs text-foreground-muted h-auto py-2",children:"Actions"})]})}),(0,a.jsx)(P.BF,{children:(0,a.jsx)(r.N,{children:es.map(e=>(0,a.jsx)(eE,{signingKey:e,legacyKey:z,standbyKey:ee,isLoading:j===e.id&&Q,setSelectedKey:f,setShownDialog:N,handleStandbyKey:eo,handlePreviouslyUsedKey:el},e.id))})})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center text-center text-foreground-light p-8 gap-2",children:[(0,a.jsx)(o.A,{className:"size-6 text-foreground-lighter"}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"No previously used keys"}),(0,a.jsx)("p",{className:"text-xs text-foreground-lighter",children:"Rotated keys will appear here for verification of existing tokens"})]})]})})})]})]}),en.length>0&&(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("h2",{children:"Revoked keys"}),(0,a.jsx)("p",{className:"text-sm text-foreground-lighter",children:"These keys are no longer used to verify or sign JWTs."})]}),(0,a.jsx)(_.Zp,{className:"overflow-hidden",children:(0,a.jsx)(_.Wu,{className:"p-0",children:(0,a.jsxs)(P.XI,{className:"p-5",children:[(0,a.jsx)(P.A0,{className:"bg-200",children:(0,a.jsxs)(P.Hj,{children:[(0,a.jsx)(P.nd,{className:"text-left font-mono uppercase text-xs text-foreground-muted h-auto py-2 pr-0 w-20",children:"Status"}),(0,a.jsx)(P.nd,{className:"text-left font-mono uppercase text-xs text-foreground-muted h-auto py-2 pl-0",children:"Key ID"}),(0,a.jsx)(P.nd,{className:"text-left font-mono uppercase text-xs text-foreground-muted h-auto py-2",children:"Type"}),(0,a.jsx)(P.nd,{className:"text-right font-mono uppercase text-xs text-foreground-muted h-auto py-2 hidden lg:table-cell",children:"Last rotated at"}),(0,a.jsx)(P.nd,{className:"text-right font-mono uppercase text-xs text-foreground-muted h-auto py-2",children:"Actions"})]})}),(0,a.jsx)(P.BF,{children:(0,a.jsx)(r.N,{children:en.map(e=>(0,a.jsx)(eE,{signingKey:e,setSelectedKey:f,setShownDialog:N,handleStandbyKey:eo,handlePreviouslyUsedKey:el,legacyKey:z,standbyKey:ee},e.id))})})]})})})]}),(0,a.jsx)(J.lG,{open:"legacy"===w,onOpenChange:er,"data-sentry-element":"Dialog","data-sentry-source-file":"index.tsx",children:(0,a.jsxs)(J.Cf,{className:"sm:max-w-[425px]","data-sentry-element":"DialogContent","data-sentry-source-file":"index.tsx",children:[(0,a.jsx)(J.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(J.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"index.tsx",children:"Start using new JWT signing keys"})}),(0,a.jsx)(J.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"index.tsx"}),(0,a.jsxs)(J.OO,{className:"flex flex-col gap-2 text-sm text-foreground-light","data-sentry-element":"DialogSection","data-sentry-source-file":"index.tsx",children:[(0,a.jsx)("p",{children:"Your project today uses a legacy symmetric JWT secret to create JWTs. To be able to use an asymmetric JWT signing key you first have to migrate it to the new approach."}),(0,a.jsx)("p",{children:"This change does not cause any downtime on your project."})]}),(0,a.jsx)(J.Es,{"data-sentry-element":"DialogFooter","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(E.$,{loading:Z,onClick:()=>U({projectRef:s}),"data-sentry-element":"Button","data-sentry-source-file":"index.tsx",children:"Migrate JWT secret"})})]})}),(0,a.jsx)(J.lG,{open:"create"===w,onOpenChange:er,"data-sentry-element":"Dialog","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(J.Cf,{className:"sm:max-w-[425px]","data-sentry-element":"DialogContent","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(ea,{projectRef:s,onClose:er,"data-sentry-element":"CreateKeyDialog","data-sentry-source-file":"index.tsx"})})}),ee&&et&&s&&(0,a.jsx)(J.lG,{open:"rotate"===w,onOpenChange:er,children:(0,a.jsx)(J.Cf,{className:"sm:max-w-[425px]",children:(0,a.jsx)(ep,{projectRef:s,standbyKey:ee,inUseKey:et,onClose:er})})}),p&&n&&(0,a.jsx)(J.lG,{open:"key-details"===w,onOpenChange:er,children:(0,a.jsx)(J.Cf,{className:"sm:max-w-lg",children:(0,a.jsx)(ei,{selectedKey:p,restURL:n.restUrl,onClose:er})})}),p&&"previously_used"===p.status&&((null==z?void 0:z.id)!==p.id||!(null!=(e=null==B?void 0:B.enabled)&&e))&&(0,a.jsx)(D.A,{visible:"revoke"===w,loading:$,onConfirm:()=>{G({projectRef:s,keyId:p.id,status:"revoked"},{onSuccess:()=>c.oR.success("Successfully revoked key")})},onCancel:er,title:"Revoke ".concat(p.id),confirmString:p.id,confirmLabel:"Yes, revoke this signing key",confirmPlaceholder:"Type the ID of the key to confirm",variant:"destructive",alert:{title:"This key will no longer be trusted!",description:"By revoking a signing key, all applications trusting it will no longer do so. If there are JWTs (access tokens) that are valid at the time of revocation, they will no longer be trusted, causing users with such JWTs to be signed out."}}),p&&"previously_used"===p.status&&(null==z?void 0:z.id)===p.id&&(null==(t=null==B?void 0:B.enabled)||t)&&(0,a.jsx)(I.Lt,{open:"revoke"===w,onOpenChange:()=>er(),children:(0,a.jsxs)(I.EO,{children:[(0,a.jsx)(I.wd,{children:(0,a.jsx)(I.r7,{children:"Disable JWT-based legacy API keys first"})}),(0,a.jsx)(I.$v,{children:"It's not possible to revoke the legacy JWT secret unless you have already disabled JWT-based legacy API keys. This is because revoking the JWT secret invalidates the JWT-based legacy API keys."}),(0,a.jsx)(I.ck,{children:(0,a.jsx)(I.Zr,{children:"OK"})})]})}),p&&"revoked"===p.status&&(0,a.jsx)(D.A,{visible:"delete"===w,loading:$,onConfirm:()=>{V({projectRef:s,keyId:p.id},{onSuccess:()=>c.oR.success("Successfully deleted key")})},onCancel:er,title:"Permanently delete ".concat(p.id),confirmString:p.id,confirmLabel:"Yes, permanently delete this key",confirmPlaceholder:"Type the ID of the key to confirm",variant:"destructive",alert:{title:"This key will be permanently deleted.",description:"The private key and all information about this key will be permanently deleted from our records. This action cannot be undone."}})]}):(0,a.jsx)(W,{}):(0,a.jsx)("div",{className:"bg-surface-100 rounded-md border shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center py-8 px-8 space-x-2",children:[(0,a.jsx)(i.A,{size:16,strokeWidth:1.5}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"You don't have permission to view JWT signing keys. These keys are restricted to users with higher access levels."})]})})};var eD=s(10508),eK=s(50442),eF=s(43479),eW=s(39624),eL=s(80090);let eH=()=>{let{can:e,isSuccess:t}=(0,eL.Qp)(n.aG.READ,"auth_signing_keys");return(0,a.jsx)(a.Fragment,{children:t?e?(0,a.jsx)(eI,{}):(0,a.jsx)(eW.A,{isFullPage:!0,resourceText:"access your project's API keys"}):(0,a.jsx)(x.yV,{})})};eH.getLayout=e=>(0,a.jsx)(eD.A,{children:(0,a.jsx)(eF.A,{children:(0,a.jsx)(eK.A,{children:e})})});let eq=eH},18563:(e,t,s)=>{"use strict";s.d(t,{L:()=>o});var a=s(67850),n=s(24523),r=s(85039),i=s(93284);async function l(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let{data:a,error:r}=await (0,n.Jt)("/v1/projects/{ref}/api-keys/legacy",{params:{path:{ref:s}},signal:t});return r&&(0,n.H4)(r),a}let o=function(e){let{projectRef:t}=e,{enabled:s=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.I)({queryKey:i.f.status(t),queryFn:e=>{let{signal:s}=e;return l({projectRef:t},s)},enabled:r.pe&&s&&void 0!==t,...n})}},21416:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var a=s(80263),n=s(52555),r=s.n(n),i=s(24487),l=s(21650),o=s(99779);let d=e=>{let{name:t="",isActive:s,isExternal:n,icon:d,rightIcon:c,url:u="",target:y="_self",onClick:x,textClassName:m="",hoverText:h="",label:g}=e,p=(0,a.jsx)(i.Ay.Item,{icon:d,rounded:!0,active:s,onClick:x,children:(0,a.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,a.jsxs)("div",{title:h||("string"==typeof t?t:""),className:"flex space-between items-center gap-2 truncate w-full "+m,children:[(0,a.jsx)("span",{className:"truncate flex-1",children:t}),void 0!==g&&(0,a.jsx)(l.E,{variant:"warning",size:"tiny",children:g})]}),c&&(0,a.jsx)("div",{children:c})]})});return u?n?(0,a.jsx)(o.$,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:d,children:(0,a.jsx)(r(),{href:u,target:"_blank",rel:"noreferrer",children:t})}):(0,a.jsx)(r(),{href:u,className:"block",target:y,children:p}):p}},22806:(e,t,s)=>{"use strict";s.d(t,{$v:()=>f,EO:()=>m,Lt:()=>d,Rx:()=>j,Zr:()=>v,ck:()=>g,r7:()=>p,tv:()=>c,wd:()=>h});var a=s(80263),n=s(39823),r=s(53239),i=s(80100),l=s(99779),o=s(79279);let d=n.bL,c=n.l9,u=e=>{let{children:t,...s}=e;return(0,a.jsx)(n.ZL,{...s,"data-sentry-element":"AlertDialogPrimitive.Portal","data-sentry-component":"AlertDialogPortal","data-sentry-source-file":"alert-dialog.tsx",children:(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-end justify-center sm:items-center",children:t})})};u.displayName=n.ZL.displayName;let y=r.forwardRef((e,t)=>{let{className:s,centered:r=!0,...l}=e;return(0,a.jsx)(n.hJ,{ref:t,className:(0,i.cn)("bg-black/40 backdrop-blur-sm","z-50 fixed inset-0 grid place-items-center overflow-y-auto data-closed:animate-overlay-hide py-8",!r&&"flex flex-col flex-start pb-8 sm:pt-12 md:pt-20 lg:pt-32 xl:pt-40 px-5",s),...l})});y.displayName=n.hJ.displayName;let x=(0,o.F)((0,i.cn)("relative z-50 w-full max-w-screen border shadow-md dark:shadow-sm","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[state=closed]:slide-out-to-left-[0%] data-[state=closed]:slide-out-to-top-[0%]","data-[state=open]:slide-in-from-left-[0%] data-[state=open]:slide-in-from-top-[0%]","sm:rounded-lg md:w-full","bg-dash-sidebar"),{variants:{size:{tiny:"sm:align-middle sm:w-full sm:max-w-xs",small:"sm:align-middle sm:w-full sm:max-w-sm",medium:"sm:align-middle sm:w-full sm:max-w-lg",large:"sm:align-middle sm:w-full md:max-w-xl",xlarge:"sm:align-middle sm:w-full md:max-w-3xl",xxlarge:"sm:align-middle sm:w-full md:max-w-6xl",xxxlarge:"sm:align-middle sm:w-full md:max-w-7xl"}},defaultVariants:{size:"medium"}}),m=r.forwardRef((e,t)=>{let{className:s,children:r,size:l,dialogOverlayProps:o,centered:d=!0,...c}=e;return(0,a.jsx)(u,{children:(0,a.jsx)(y,{centered:d,...o,children:(0,a.jsx)(n.UC,{ref:t,className:(0,i.cn)(x({size:l}),s),...c,children:r})})})});m.displayName=n.UC.displayName;let h=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s,"data-sentry-component":"AlertDialogHeader","data-sentry-source-file":"alert-dialog.tsx"})};h.displayName="AlertDialogHeader";let g=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 border-t py-3 px-5",t),...s,"data-sentry-component":"AlertDialogFooter","data-sentry-source-file":"alert-dialog.tsx"})};g.displayName="AlertDialogFooter";let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.hE,{ref:t,className:(0,i.cn)("text-base text-foreground border-b px-5 py-3",s),...r})});p.displayName=n.hE.displayName;let f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.VY,{ref:t,className:(0,i.cn)("text-sm text-foreground-light px-5 py-3",s),...r})});f.displayName=n.VY.displayName;let j=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.rc,{ref:t,className:(0,i.cn)((0,l.r)({type:"primary",size:"tiny"}),s),...r})});j.displayName=n.rc.displayName;let v=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.ZD,{ref:t,className:(0,i.cn)((0,l.r)({type:"default",size:"tiny"}),"mt-2 sm:mt-0",s),...r})});v.displayName=n.ZD.displayName},24487:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>y});var a=s(80263),n=s(53239),r=s(7981),i=s(80100);function l(e){let{children:t,className:s,tag:n="div",style:r}=e;return(0,a.jsx)("".concat(n),{style:r,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}l.Title=function(e){let{className:t,level:s=1,children:n,style:r}=e;return(0,a.jsx)("h".concat(s),{style:r,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:n})},l.Text=function(e){let{className:t,children:s,style:n,type:r,disabled:i,mark:l,code:o,keyboard:d,underline:c,strikethrough:u,strong:y,small:x}=e;return o?(0,a.jsx)("code",{style:n,children:s}):l?(0,a.jsx)("mark",{style:n,children:s}):d?(0,a.jsx)("kbd",{style:n,children:s}):y?(0,a.jsx)("strong",{style:n,children:s}):(0,a.jsx)("span",{style:n,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:s})},l.Link=function(e){let{children:t,target:s="_blank",href:n,className:r,onClick:i,style:l}=e;return(0,a.jsx)("a",{onClick:i,href:n,target:s,rel:"noopener noreferrer",style:l,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})};let o=(0,n.createContext)({type:"text"}),d=e=>{let{type:t}=e;return(0,a.jsx)(o.Provider,{value:{type:t},"data-sentry-element":"MenuContext.Provider","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},c=()=>{let e=(0,n.useContext)(o);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function u(e){let{children:t,className:s,ulClassName:n,style:r,type:i="text"}=e;return(0,a.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:s,style:r,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)(d,{type:i,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)("ul",{className:n,children:t})})})}u.Item=function(e){let{children:t,icon:s,active:n,rounded:l,onClick:o,doNotCloseOverlay:d=!1,showActiveBar:u=!1,style:y}=e,x=(0,r.A)("menu"),{type:m}=c(),h=[x.item.base];h.push(x.item.variants[m].base),n?h.push(x.item.variants[m].active):h.push(x.item.variants[m].normal);let g=[x.item.content.base];n?g.push(x.item.content.active):g.push(x.item.content.normal);let p=[x.item.icon.base];return n?p.push(x.item.icon.active):p.push(x.item.icon.normal),(0,a.jsxs)("li",{role:"menuitem",className:(0,i.cn)("outline-none",h),style:y,onClick:o,"aria-current":n?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[s&&(0,a.jsx)("div",{className:"".concat(p.join(" ")," min-w-fit"),children:s}),(0,a.jsx)("span",{className:g.join(" "),children:t})]})},u.Group=function(e){let{children:t,icon:s,title:n}=e,i=(0,r.A)("menu"),{type:l}=c();return(0,a.jsxs)("div",{className:[i.group.base,i.group.variants[l]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[s&&(0,a.jsx)("span",{className:i.group.icon,children:s}),(0,a.jsx)("span",{className:i.group.content,children:n}),t]})},u.Misc=function(e){let{children:t}=e;return(0,a.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)(l.Text,{"data-sentry-element":"Typography.Text","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)("span",{children:t})})})};let y=u},24735:(e,t,s)=>{"use strict";s.d(t,{H:()=>a});let a={list:e=>["projects",e,"jwt-signing-keys"],legacy:e=>["projects",e,"legacy-jwt-signing-key"]}},39624:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(80263),n=s(12123);let r=e=>{let{resourceText:t,isFullPage:s=!1}=e,r=()=>(0,a.jsx)("div",{className:"block w-full rounded border border-opacity-20 py-4 px-6 border-overlay bg-surface-200","data-sentry-component":"NoPermissionMessage","data-sentry-source-file":"NoPermission.tsx",children:(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)(n.A,{size:20,"data-sentry-element":"AlertCircle","data-sentry-source-file":"NoPermission.tsx"})}),(0,a.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("p",{className:"text-sm",children:["You need additional permissions to ",t]}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Contact your organization owner or administrator for assistance."})})]})})]})});return s?(0,a.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,a.jsx)("div",{className:"w-[550px]",children:(0,a.jsx)(r,{})})}):(0,a.jsx)(r,{})}},43479:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var a=s(80263),n=s(80814),r=s(22891),i=s(93873),l=s(2657),o=s(84512),d=s(9620),c=s(9497),u=s(29471),y=s(25433);let x=(0,c.r)(e=>{let{title:t,children:s}=e,c=(0,n.useRouter)(),{ref:x}=(0,r.g)(),{data:m}=(0,d.YA)(),{data:h}=(0,o.s)(),g=c.pathname.includes("billing")?c.pathname.split("/")[5]:c.pathname.split("/")[4],{projectAuthAll:p,authenticationShowProviders:f,projectEdgeFunctionAll:j,projectStorageAll:v,billingInvoices:k,projectSettingsLegacyJwtKeys:b,projectSettingsLogDrains:w,billingAll:N}=(0,l.x)(["project_auth:all","authentication:show_providers","project_edge_function:all","project_storage:all","billing:invoices","project_settings:legacy_jwt_keys","project_settings:log_drains","billing:all"]),S=(0,y.M)(x,m,h,{auth:p,authProviders:f,edgeFunctions:j,storage:v,invoices:k,legacyJwtKeys:b,logDrains:w,billing:N});return(0,a.jsx)(u.k,{isBlocking:!1,title:t||"Settings",product:"Settings",productMenu:(0,a.jsx)(i.l,{page:g,menu:S}),"data-sentry-element":"ProjectLayout","data-sentry-component":"SettingsLayout","data-sentry-source-file":"SettingsLayout.tsx",children:s})})},50442:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(80263),n=s(8750),r=s(37873),i=s(22891),l=s(2657);let o=e=>{let{children:t}=e,{ref:s}=(0,i.g)(),{projectSettingsLegacyJwtKeys:o}=(0,l.x)(["project_settings:legacy_jwt_keys"]),d=[...o?[{label:"Legacy JWT Secret",href:"/project/".concat(s,"/settings/jwt"),id:"legacy-jwt-keys"}]:[],{label:"JWT Signing Keys",href:"/project/".concat(s,"/settings/jwt/signing-keys"),id:"signing-keys"}];return(0,a.jsx)(n.M,{title:"JWT Keys",subtitle:"Control the keys used to sign JSON Web Tokens for your project",navigationItems:d,"data-sentry-element":"PageLayout","data-sentry-component":"JWTKeysLayout","data-sentry-source-file":"JWTKeysLayout.tsx",children:(0,a.jsx)(r.eh,{className:"flex flex-col py-8 gap-8",bottomPadding:!0,"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"JWTKeysLayout.tsx",children:t})})}},60254:(e,t,s)=>{"use strict";s.d(t,{PA:()=>r,Uj:()=>n,Vi:()=>i,uD:()=>l});var a=s(73402);let n={in_use:"Current key",standby:"Standby key",previously_used:"Previous key",revoked:"Revoked"},r={standby:"bg-surface-300 bg-opacity-100 text-foreground border border-foreground-muted",in_use:"bg-brand-200 bg-opacity-100 text-brand-600 border-brand-500",previously_used:"bg-purple-300 dark:bg-purple-100 text-purple-1200 border-purple-800",revoked:"bg-destructive-200 bg-opacity-100 text-destructive-600 border-destructive-500"},i={[a.RZ.APIServicesConfigurationUpdateFailed]:"failed to update configuration for API services",[a.RZ.APIServicesRestartFailed]:"failed to restart API services",[a.RZ.DatabaseAdminAPIConfigurationUpdateFailed]:"failed to update configuration for database admin API",[a.RZ.PostgreSQLRestartFailed]:"failed to restart PostgreSQL service",[a.RZ.SupabaseAPIKeyUpdateFailed]:"failed to update Supabase API key",[a.RZ.APIGatewayUpdateFailed]:"failed to update API Gateway"},l={[a.Ks.RestartedAPIServices]:"restarted API services",[a.Ks.RestartedPostgreSQL]:"restarted PostgreSQL service",[a.Ks.Started]:"started updating",[a.Ks.UpdatedAPIServicesConfiguration]:"updated configuration for API services",[a.Ks.UpdatedDatabaseAdminAPIConfiguration]:"updated configuration for database admin API",[a.Ks.UpdatedAPIGatewayConfiguration]:"updated configuration for API Gateway"}},85372:(e,t,s)=>{"use strict";s.d(t,{T:()=>c});var a=s(80263),n=s(68152),r=s(97507),i=s(10741),l=s(28202),o=s(80100),d=s(99779);let c=e=>{let{storageKey:t,children:s,className:c,dismissClassName:u,defaultDismissed:y=!1,illustration:x,dismissable:m=!1,bgAlt:h=!1,...g}=e,{ref:p}=(0,i.g)(),f=t&&"function"==typeof t?t(null!=p?p:""):t,[j,v]=(0,l.U)(f||"feature-banner-dismissed",y);return m&&t&&j?null:(0,a.jsxs)(r.P.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:500,damping:30,mass:1},...g,className:(0,o.cn)("pb-36 pt-10 relative w-full border xl:py-10 px-10 rounded-md overflow-hidden",h&&"bg-background-alternative",c),"data-sentry-element":"motion.div","data-sentry-component":"FeatureBanner","data-sentry-source-file":"FeatureBanner.tsx",children:[s,x,m&&t&&(0,a.jsx)("div",{className:(0,o.cn)("absolute top-3 right-3",u),children:(0,a.jsx)(d.$,{type:"text",size:"tiny",icon:(0,a.jsx)(n.A,{size:16,strokeWidth:1.5}),onClick:()=>v(!0),className:"opacity-75 px-1","aria-label":"Dismiss notification"})})]})}},93873:(e,t,s)=>{"use strict";s.d(t,{l:()=>l});var a=s(80263),n=s(24487),r=s(21650),i=s(21416);let l=e=>{let{page:t,menu:s}=e;return(0,a.jsx)("div",{className:"flex flex-col space-y-8","data-sentry-component":"ProductMenu","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(n.Ay,{type:"pills","data-sentry-element":"Menu","data-sentry-source-file":"index.tsx",children:s.map((e,l)=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"my-6 space-y-8",children:(0,a.jsxs)("div",{className:"mx-3",children:[(0,a.jsx)(n.Ay.Group,{title:e.title?(0,a.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,a.jsx)("span",{children:e.title}),e.isPreview&&(0,a.jsx)(r.E,{variant:"warning",children:"Not production ready"})]}):null}),(0,a.jsx)("div",{children:e.items.map(e=>{let s=e.pages?e.pages.includes(null!=t?t:""):t===e.key;return(0,a.jsx)(i.A,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:s,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),l!==s.length-1&&(0,a.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}}},e=>{e.O(0,[60858,15599,16110,27764,36538,44033,75702,76984,72391,35035,40545,596,10508,48340,75187,29471,8750,90636,46593,38792],()=>e(e.s=14589)),_N_E=e.O()}]);