try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="1719282e-d9d9-4393-a6a1-2c75b1946bff",e._sentryDebugIdIdentifier="sentry-dbid-1719282e-d9d9-4393-a6a1-2c75b1946bff")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[27843],{24487:(e,t,n)=>{n.d(t,{Ay:()=>p});var r=n(80263),a=n(53239),s=n(7981),o=n(80100);function l(e){let{children:t,className:n,tag:a="div",style:s}=e;return(0,r.jsx)("".concat(a),{style:s,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}l.Title=function(e){let{className:t,level:n=1,children:a,style:s}=e;return(0,r.jsx)("h".concat(n),{style:s,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:a})},l.Text=function(e){let{className:t,children:n,style:a,type:s,disabled:o,mark:l,code:c,keyboard:i,underline:u,strikethrough:d,strong:p,small:m}=e;return c?(0,r.jsx)("code",{style:a,children:n}):l?(0,r.jsx)("mark",{style:a,children:n}):i?(0,r.jsx)("kbd",{style:a,children:n}):p?(0,r.jsx)("strong",{style:a,children:n}):(0,r.jsx)("span",{style:a,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:n})},l.Link=function(e){let{children:t,target:n="_blank",href:a,className:s,onClick:o,style:l}=e;return(0,r.jsx)("a",{onClick:o,href:a,target:n,rel:"noopener noreferrer",style:l,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})};let c=(0,a.createContext)({type:"text"}),i=e=>{let{type:t}=e;return(0,r.jsx)(c.Provider,{value:{type:t},"data-sentry-element":"MenuContext.Provider","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},u=()=>{let e=(0,a.useContext)(c);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function d(e){let{children:t,className:n,ulClassName:a,style:s,type:o="text"}=e;return(0,r.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:n,style:s,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)(i,{type:o,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)("ul",{className:a,children:t})})})}d.Item=function(e){let{children:t,icon:n,active:a,rounded:l,onClick:c,doNotCloseOverlay:i=!1,showActiveBar:d=!1,style:p}=e,m=(0,s.A)("menu"),{type:y}=u(),f=[m.item.base];f.push(m.item.variants[y].base),a?f.push(m.item.variants[y].active):f.push(m.item.variants[y].normal);let h=[m.item.content.base];a?h.push(m.item.content.active):h.push(m.item.content.normal);let x=[m.item.icon.base];return a?x.push(m.item.icon.active):x.push(m.item.icon.normal),(0,r.jsxs)("li",{role:"menuitem",className:(0,o.cn)("outline-none",f),style:p,onClick:c,"aria-current":a?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[n&&(0,r.jsx)("div",{className:"".concat(x.join(" ")," min-w-fit"),children:n}),(0,r.jsx)("span",{className:h.join(" "),children:t})]})},d.Group=function(e){let{children:t,icon:n,title:a}=e,o=(0,s.A)("menu"),{type:l}=u();return(0,r.jsxs)("div",{className:[o.group.base,o.group.variants[l]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[n&&(0,r.jsx)("span",{className:o.group.icon,children:n}),(0,r.jsx)("span",{className:o.group.content,children:a}),t]})},d.Misc=function(e){let{children:t}=e;return(0,r.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)(l.Text,{"data-sentry-element":"Typography.Text","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)("span",{children:t})})})};let p=d},27843:(e,t,n)=>{n.d(t,{A:()=>h});var r=n(80263),a=n(52555),s=n.n(a),o=n(22891),l=n(78960),c=n(2657),i=n(24487),u=n(21650),d=n(61767),p=n(39691);let m=()=>{let{ref:e}=(0,o.g)(),t=(0,p.kM)(),{storageAnalytics:n,storageVectors:a}=(0,c.x)(["storage:analytics","storage:vectors"]),m=(0,l.mM)({projectRef:e}),y=(0,l.Dc)({projectRef:e}),f=Object.entries(d.TD).filter(e=>{let[t,r]=e;return"analytics"===t?n:"vectors"===t?a:o.pe||!o.pe&&!r.platformOnly});return(0,r.jsx)(i.Ay,{type:"pills",className:"my-6 flex flex-grow flex-col","data-sentry-element":"Menu","data-sentry-component":"StorageMenuV2","data-sentry-source-file":"StorageMenuV2.tsx",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"mx-3",children:[(0,r.jsx)(i.Ay.Group,{title:(0,r.jsx)("span",{className:"uppercase font-mono",children:"Manage"}),"data-sentry-element":"Menu.Group","data-sentry-source-file":"StorageMenuV2.tsx"}),f.map(n=>{let[a,o]=n,l=t===a,c="analytics"===a&&m||"vectors"===a&&y;return(0,r.jsx)(s(),{href:"/project/".concat(e,"/storage/").concat(a),children:(0,r.jsx)(i.Ay.Item,{rounded:!0,active:l,children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("p",{className:"truncate",children:o.displayName}),c&&(0,r.jsx)(u.E,{variant:"default",size:"small",children:"New"})]})})},a)})]}),o.pe&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"h-px w-full bg-border"}),(0,r.jsxs)("div",{className:"mx-3",children:[(0,r.jsx)(i.Ay.Group,{title:(0,r.jsx)("span",{className:"uppercase font-mono",children:"Configuration"})}),(0,r.jsx)(s(),{href:"/project/".concat(e,"/storage/s3"),children:(0,r.jsx)(i.Ay.Item,{rounded:!0,active:"s3"===t,children:(0,r.jsx)("p",{className:"truncate",children:"S3"})})})]})]})]})})};var y=n(9497),f=n(29471);let h=(0,y.r)(e=>{let{title:t,children:n}=e;return(0,r.jsx)(f.k,{title:t||"Storage",product:"Storage",productMenu:(0,r.jsx)(m,{}),"data-sentry-element":"ProjectLayout","data-sentry-component":"StorageLayout","data-sentry-source-file":"StorageLayout.tsx",children:n})})},39691:(e,t,n)=>{n.d(t,{EQ:()=>g,Xn:()=>x,_S:()=>u,kM:()=>j,kg:()=>y,wS:()=>h});var r=n(42092),a=n.n(r),s=n(107),o=n.n(s),l=n(80814),c=n(61767);let i=e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return new Uint32Array([t])[0].toString(36)},u=(e,t)=>0===t.length?[]:m(d(e,t)),d=(e,t)=>{let n=e.map(e=>e.name);return t.map(e=>{let{definition:t,check:r}=e,a=null!==t?p(t):p(r);return a&&n.includes(a)?{...e,bucket:a}:{...e,bucket:"Ungrouped"}})},p=e=>{var t;let[n]=(null!=(t=null==e?void 0:e.split(" AND "))?t:[]).filter(e=>e.includes("bucket_id"));return n?n.split("'")[1]:null},m=e=>{let t=o()(e,"bucket");return Object.keys(t).map(e=>({name:e,policies:t[e]}))},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],{name:r,definition:a,allowedOperations:s,roles:o}=t,l=a?a.replace(/\s+/g," ").trim():"";return s.map((t,a)=>f(a,e,r,l,t,o,n))},f=(e,t,n,r,a,s,o)=>{let l=i(t);return{name:o?"".concat(n," ").concat(l,"_").concat(e):n,definition:"INSERT"===a?void 0:"(".concat(r,")"),action:"PERMISSIVE",check:"INSERT"===a?"(".concat(r,")"):void 0,command:a,schema:"storage",table:"objects",roles:s.length>0?s:void 0}},h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object.keys(c.Uw).filter(t=>{let n=c.Uw[t];if(0===a()(n,e).length)return t})},x=function(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],{name:r,definition:a,allowedOperations:s,roles:o}=t;return s.map((t,s)=>((e,t,n,r,a,s,o)=>{let l=i(t),c=o?"".concat(n," ").concat(l,"_").concat(e):n,u="Add policy for the ".concat(a,' operation under the policy "').concat(n,'"'),d=0===s.length?["public"]:s;return{description:u,statement:'\n    CREATE POLICY "'.concat(c,'"\n    ON storage.objects\n    FOR ').concat(a,"\n    TO ").concat(d.join(", "),"\n    ").concat("INSERT"===a?"WITH CHECK":"USING"," (").concat(r,");\n").replace(/\s+/g," ").trim()}})(s,e,r,a||"",t,o,n))},g=(e,t)=>e.replace("{bucket_id}","'".concat(t,"'")),j=()=>(0,l.useRouter)().pathname.split("/")[4]},78960:(e,t,n)=>{n.d(t,{Dc:()=>d,Ij:()=>i,mM:()=>u});var r=n(67850),a=n(22891),s=n(24523),o=n(85039),l=n(30659);async function c(e,t){let{projectRef:n}=e;if(!n)throw Error("projectRef is required");let{data:r,error:a}=await (0,s.Jt)("/platform/projects/{ref}/config/storage",{params:{path:{ref:n}},signal:t});return a&&(404===a.code?(0,s.H4)({...a,message:"Storage configuration not found."}):(0,s.H4)(a)),r}let i=function(e){let{projectRef:t}=e,{enabled:n=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.I)({queryKey:l.n.storage(t),queryFn:e=>{let{signal:n}=e;return c({projectRef:t},n)},enabled:n&&o.pe&&void 0!==t,...a})},u=e=>{var t;let{projectRef:n}=e,{data:r}=i({projectRef:n});return!!(null==r||null==(t=r.features.icebergCatalog)?void 0:t.enabled)},d=e=>{let{projectRef:t}=e;return(0,a._P)("storageAnalyticsVector")}}}]);