try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="c35e71e8-971f-4450-b4a8-0b6505554aba",e._sentryDebugIdIdentifier="sentry-dbid-c35e71e8-971f-4450-b4a8-0b6505554aba")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[15417],{107:(e,t,s)=>{var n=s(50117),l=s(94277),a=Object.prototype.hasOwnProperty;e.exports=l(function(e,t,s){a.call(e,s)?e[s].push(t):n(e,s,[t])})},8e3:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(86848).A)("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]])},11203:(e,t,s)=>{var n=s(40293);e.exports=function(e){return(null==e?0:e.length)?n(e,1):[]}},16643:(e,t,s)=>{"use strict";s.d(t,{f:()=>d});var n=s(72391),l=s(51355),a=s(80210),r=s(73969),i=s(59356),o=s(30399);async function c(e){let{projectRef:t,connectionString:s,originalPolicy:l}=e,a=new Headers;s&&a.set("x-connection-encrypted",s);let{sql:r}=n.A.policies.remove(l),{result:o}=await (0,i.E)({projectRef:t,connectionString:s,sql:r,queryKey:["policy","delete",l.id]});return o}let d=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,l.jE)();return(0,a.n)({mutationFn:e=>c(e),async onSuccess(t,s,l){let{projectRef:a}=s;await n.invalidateQueries({queryKey:o.S.list(a)}),await (null==e?void 0:e(t,s,l))},async onError(e,s,n){void 0===t?r.oR.error("Failed to delete database policy: ".concat(e.message)):t(e,s,n)},...s})}},32353:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(86848).A)("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]])},37700:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(86848).A)("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]])},37766:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(86848).A)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]])},40314:(e,t,s)=>{"use strict";s.d(t,{A:()=>y});var n=s(80263),l=s(47023),a=s(11203),r=s.n(a),i=s(53239),o=s(23157),c=s(15471),d=s(50298),m=s(7981),u=s(80100),x=s(7760);let h=(0,i.createContext)({onChange:e=>{},selected:void 0});var p=s(23892);function f(e){let{children:t,className:s,buttonClassName:a,descriptionText:p,error:f,icon:y,id:j="",name:g="",label:v,labelOptional:b,layout:k,value:w,onChange:C,onFocus:N,onBlur:E,style:S,size:A="medium",defaultValue:_,validation:M,disabled:z,optionsWidth:I}=e,[L,F]=(0,i.useState)(void 0),[D,R]=(0,i.useState)({}),T=(0,m.A)("listbox"),B=(0,i.useRef)(null),{formContextOnChange:O,values:P,errors:W,handleBlur:q,touched:U,fieldLevelValidation:V}=(0,x.x)();P&&!w&&(w=P[j||g],_=P[j||g]),f||(W&&!f&&(f=W[j||g]),f=U&&U[j||g]?f:void 0),(0,i.useEffect)(()=>{void 0!==w&&F(w)},[w]),(0,i.useEffect)(()=>{function e(){var e;document.documentElement.style.setProperty("--width-listbox","".concat(I||(null==(e=B.current)?void 0:e.offsetWidth),"px"))}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),(0,i.useEffect)(()=>{var e;let s=r()(t);function n(e){return s.find(t=>t.props.value===e)}if(w){F(w);let e=n(w);R((null==e?void 0:e.props)?e.props:void 0);return}if(L){let e=n(L);R((null==e?void 0:e.props)?e.props:void 0);return}if(_){F(_);let e=n(L);R((null==e?void 0:e.props)?e.props:void 0);return}R(null==(e=s[0])?void 0:e.props)},[L]);let G=[T.container,T.base,a],H=[T.addOnBefore];return f&&G.push(T.variants.error),f||G.push(T.variants.standard),y&&H.push(T.with_icon),A&&G.push(T.size[A]),z&&G.push(T.disabled),(0,n.jsx)(o.H,{label:v,labelOptional:b,layout:k,id:j,error:f,descriptionText:p,className:s,style:S,size:A,"data-sentry-element":"FormLayout","data-sentry-component":"Listbox","data-sentry-source-file":"Listbox2.tsx",children:(0,n.jsxs)(l.bL,{"data-sentry-element":"DropdownMenuPrimitive.Root","data-sentry-source-file":"Listbox2.tsx",children:[(0,n.jsx)(l.l9,{asChild:!0,disabled:z,"data-sentry-element":"DropdownMenuPrimitive.Trigger","data-sentry-source-file":"Listbox2.tsx",children:(0,n.jsxs)("button",{"data-size":A,ref:B,className:(0,u.cn)(G),onBlur:function(e){q&&q(e),E&&E(e)},onFocus:N,name:g,id:j,children:[(0,n.jsxs)("span",{className:(0,u.cn)(H),children:[y&&(0,n.jsx)(d.A,{size:A,icon:y}),(null==D?void 0:D.addOnBefore)&&(0,n.jsx)(D.addOnBefore,{}),(0,n.jsx)("span",{className:T.label,children:null==D?void 0:D.label})]}),(0,n.jsx)("span",{className:T.chevron_container,children:(0,n.jsx)("svg",{className:T.chevron,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-sentry-element":"svg","data-sentry-source-file":"Listbox2.tsx",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd","data-sentry-element":"path","data-sentry-source-file":"Listbox2.tsx"})})}),f&&(0,n.jsx)("div",{className:T.actions_container,children:f&&(0,n.jsx)(c.A,{size:A})})]})}),(0,n.jsx)(l.UC,{sideOffset:6,loop:!0,side:"bottom",align:"center",className:T.options_container,"data-sentry-element":"DropdownMenuPrimitive.Content","data-sentry-source-file":"Listbox2.tsx",children:(0,n.jsx)("div",{children:(0,n.jsx)(h.Provider,{value:{onChange:function(e){C&&C(e),F(e);let t={};t.target={type:"select",name:g,id:j,value:e,checked:void 0},O&&O(t),M&&V(j,M(e))},selected:L},"data-sentry-element":"SelectContext.Provider","data-sentry-source-file":"Listbox2.tsx",children:t})})})]})})}f.Option=function(e){let{id:t,value:s,label:a,disabled:r=!1,children:i,className:o="",addOnBefore:c}=e,d=(0,m.A)("listbox");return(0,n.jsx)(h.Consumer,{"data-sentry-element":"SelectContext.Consumer","data-sentry-component":"SelectOption","data-sentry-source-file":"Listbox2.tsx",children:e=>{let{onChange:a,selected:m}=e,x=m===s;return(0,n.jsxs)(l.q7,{className:(0,u.cn)(d.option,x?d.option_active:" ",r?d.option_disabled:" ",o),onSelect:()=>r?{}:a(s),children:[(0,n.jsxs)("div",{className:d.option_inner,children:[c&&c({active:x,selected:m}),(0,n.jsx)("span",{children:"function"==typeof i?i({active:x,selected:m}):i})]}),x?(0,n.jsx)("span",{className:(0,u.cn)(d.option_check,x?d.option_check_active:""),children:(0,n.jsx)(p.A,{className:d.option_check_icon,"aria-hidden":"true"})}):null]},t)}})};let y=f},42092:(e,t,s)=>{var n=s(48550),l=s(40293),a=s(92479),r=s(50084);e.exports=a(function(e,t){return r(e)?n(e,l(t,1,r,!0)):[]})},42458:()=>{},44412:(e,t,s)=>{"use strict";let n,l;s.d(t,{P5:()=>g,iH:()=>j});var a=s(80263),r=s(62941),i=s(53239),o=s(80100),c=s(73640);let d=e=>{let{size:t,start:s}=e;return{position:"absolute",top:0,left:0,width:"100%",height:"".concat(t,"px"),transform:"translateY(".concat(s,"px)")}},m=(0,i.createContext)(null),u=e=>{let{children:t,value:s}=e;return(0,a.jsx)(m.Provider,{value:s,"data-sentry-element":"VirtualizerContext.Provider","data-sentry-component":"VirtualizerProvider","data-sentry-source-file":"InfiniteList.tsx",children:t})},x=()=>{let e=(0,i.useContext)(m);if(!e)throw Error("useVirtualizerContext must be used within a VirtualizerProvider");return e},h=e=>{let{children:t,items:s,getItemKey:n,getItemSize:l,hasNextPage:c=!1,isLoadingNextPage:d=!1,onLoadNextPage:m=()=>{},className:x,Component:h}=e,p=(0,i.useRef)(null),f=(0,r.Te)({count:c?s.length+1:s.length,getScrollElement:()=>p.current,getItemKey:n,estimateSize:l,overscan:5}),y=f.getVirtualItems(),j=(0,i.useMemo)(()=>({virtualizer:f,virtualItems:y}),[f,y]);(0,i.useEffect)(()=>{let e=y[y.length-1];e&&e.index>=s.length-1&&c&&!d&&m()},[y,s.length,c,d,m]);let g={ref:e=>{p.current=e},className:(0,o.cn)("overflow-auto",x),children:t};return(0,a.jsx)(u,{value:j,"data-sentry-element":"VirtualizerProvider","data-sentry-component":"InfiniteListScrollWrapper","data-sentry-source-file":"InfiniteList.tsx",children:(0,a.jsx)(null!=h?h:"div",{...g,"data-sentry-element":"WrapperToRender","data-sentry-source-file":"InfiniteList.tsx"})})},p=e=>{let{children:t,Component:s="div"}=e,{virtualizer:n}=x();return(0,a.jsx)(s,{style:{height:"".concat(n.getTotalSize(),"px"),width:"100%",position:"relative"},"data-sentry-element":"Component","data-sentry-component":"InfiniteListSizer","data-sentry-source-file":"InfiniteList.tsx",children:t})},f=(n=e=>{let{index:t,start:s,size:n,item:l,itemProps:a,ItemComponent:r}=e,o=(0,i.useMemo)(()=>d({size:n,start:s}),[n,s]),c=(0,i.useMemo)(()=>({index:t,item:l,style:o}),[t,l,o]),m=(0,i.useMemo)(()=>({...c,...null!=a?a:{}}),[c,a]);return(0,i.createElement)(r,m)},(0,i.memo)(n,l));f.displayName="MemoizedInfiniteListItem";let y=e=>{let{items:t,itemProps:s,ItemComponent:n,LoaderComponent:l}=e,{virtualItems:r}=x();return(0,a.jsx)(a.Fragment,{children:r.map(e=>{let r=e.index>t.length-1,o=t[e.index];return r?(0,a.jsx)(l,{style:d({size:e.size,start:e.start})},e.index):(0,i.createElement)(f,{key:e.index,index:e.index,start:e.start,size:e.size,item:o,itemProps:s,ItemComponent:n})})})},j=e=>{let{className:t,items:s,itemProps:n,getItemKey:l,getItemSize:r,hasNextPage:i=!1,isLoadingNextPage:o=!1,onLoadNextPage:c=()=>{},ItemComponent:d,LoaderComponent:m}=e;return(0,a.jsx)(h,{className:t,items:s,getItemKey:l,getItemSize:r,hasNextPage:i,isLoadingNextPage:o,onLoadNextPage:c,"data-sentry-element":"InfiniteListScrollWrapper","data-sentry-component":"InfiniteListDefault","data-sentry-source-file":"InfiniteList.tsx",children:(0,a.jsx)(p,{"data-sentry-element":"InfiniteListSizer","data-sentry-source-file":"InfiniteList.tsx",children:(0,a.jsx)(y,{items:s,itemProps:n,ItemComponent:d,LoaderComponent:m,"data-sentry-element":"InfiniteListItems","data-sentry-source-file":"InfiniteList.tsx"})})})},g=e=>{let{style:t}=e;return(0,a.jsx)("div",{className:"space-y-1 my-1",style:t,"data-sentry-component":"LoaderForIconMenuItems","data-sentry-source-file":"InfiniteList.tsx",children:(0,a.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,a.jsxs)("div",{className:"flex flex-row h-6 px-4 items-center gap-2",children:[(0,a.jsx)(c.E,{className:"h-4 w-5","data-sentry-element":"Skeleton","data-sentry-source-file":"InfiniteList.tsx"}),(0,a.jsx)(c.E,{className:"w-40 h-4","data-sentry-element":"Skeleton","data-sentry-source-file":"InfiniteList.tsx"})]}),(0,a.jsxs)("div",{className:"flex flex-row h-6 px-4 items-center gap-2",children:[(0,a.jsx)(c.E,{className:"h-4 w-5","data-sentry-element":"Skeleton","data-sentry-source-file":"InfiniteList.tsx"}),(0,a.jsx)(c.E,{className:"w-32 h-4","data-sentry-element":"Skeleton","data-sentry-source-file":"InfiniteList.tsx"})]}),(0,a.jsxs)("div",{className:"flex flex-row h-6 px-4 items-center gap-2 opacity-75",children:[(0,a.jsx)(c.E,{className:"h-4 w-5","data-sentry-element":"Skeleton","data-sentry-source-file":"InfiniteList.tsx"}),(0,a.jsx)(c.E,{className:"w-20 h-4","data-sentry-element":"Skeleton","data-sentry-source-file":"InfiniteList.tsx"})]}),(0,a.jsxs)("div",{className:"flex flex-row h-6 px-4 items-center gap-2 opacity-50",children:[(0,a.jsx)(c.E,{className:"h-4 w-5","data-sentry-element":"Skeleton","data-sentry-source-file":"InfiniteList.tsx"}),(0,a.jsx)(c.E,{className:"w-40 h-4","data-sentry-element":"Skeleton","data-sentry-source-file":"InfiniteList.tsx"})]}),(0,a.jsxs)("div",{className:"flex flex-row h-6 px-4 items-center gap-2 opacity-25",children:[(0,a.jsx)(c.E,{className:"h-4 w-5","data-sentry-element":"Skeleton","data-sentry-source-file":"InfiniteList.tsx"}),(0,a.jsx)(c.E,{className:"w-20 h-4","data-sentry-element":"Skeleton","data-sentry-source-file":"InfiniteList.tsx"})]})]})})}},48250:(e,t,s)=>{var n=s(60152),l=s(84837);e.exports=function(e){return e&&e.length?n(e,l):0}},48550:(e,t,s)=>{var n=s(45558),l=s(10116),a=s(59568),r=s(71057),i=s(10876),o=s(99582);e.exports=function(e,t,s,c){var d=-1,m=l,u=!0,x=e.length,h=[],p=t.length;if(!x)return h;s&&(t=r(t,i(s))),c?(m=a,u=!1):t.length>=200&&(m=o,u=!1,t=new n(t));e:for(;++d<x;){var f=e[d],y=null==s?f:s(f);if(f=c||0!==f?f:0,u&&y==y){for(var j=p;j--;)if(t[j]===y)continue e;h.push(f)}else m(t,y,c)||h.push(f)}return h}},49151:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var n=s(80263),l=s(53239),a=s(57459),r=s(7760);function i(e,t){if(!t.error)return delete e[t.key],e;if(t)return{...e,[t.key]:t.error};throw Error()}function o(e){let{validate:t,...s}=e,[o,c]=(0,l.useReducer)(i,null),d=(0,a.Wx)({validateOnBlur:!0,...s,validationSchema:s.validationSchema,initialValues:s.initialValues,onSubmit:s.onSubmit,validate:t||function(){return o}});return(0,n.jsx)("form",{id:s.id,name:s.name,onSubmit:d.handleSubmit,className:s.className,style:s.style,method:"POST","data-sentry-component":"Form","data-sentry-source-file":"Form.tsx",children:(0,n.jsx)(r.h,{values:d.values,errors:d.errors,formContextOnChange:d.handleChange,handleBlur:d.handleBlur,touched:d.touched,fieldLevelValidation:function(e,t){c({key:e,error:t})},"data-sentry-element":"FormContextProvider","data-sentry-source-file":"Form.tsx",children:s.children({errors:d.errors,touched:d.touched,isSubmitting:d.isSubmitting,isValidating:d.isValidating,submitCount:d.submitCount,initialValues:d.initialValues,values:d.values,handleReset:d.handleReset,resetForm:d.resetForm,setFieldValue:d.setFieldValue})})})}},60152:e=>{e.exports=function(e,t){for(var s,n=-1,l=e.length;++n<l;){var a=t(e[n]);void 0!==a&&(s=void 0===s?a:s+a)}return s}},62195:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/storage/files/buckets/[bucketId]",function(){return s(97440)}])},62550:(e,t,s)=>{"use strict";s.d(t,{j:()=>d});var n=s(67850),l=s(78510),a=s(24523),r=s(9620),i=s(85039),o=s(30399);async function c(e,t,s){let{projectRef:n,connectionString:r,schema:i}=e;if(!n)throw Error("projectRef is required");let o=new Headers(s);r&&o.set("x-connection-encrypted",r);let{data:c,error:d}=await (0,a.Jt)("/platform/pg-meta/{ref}/policies",{params:{header:{"x-connection-encrypted":r,"x-pg-application-name":l.r},path:{ref:n},query:{included_schemas:i||"",excluded_schemas:""}},headers:o,signal:t});return d&&(0,a.H4)(d),c}let d=function(e){let{projectRef:t,connectionString:s,schema:l}=e,{enabled:a=!0,...d}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{data:m}=(0,r.YA)(),u=(null==m?void 0:m.status)===i.BU.ACTIVE_HEALTHY;return(0,n.I)({queryKey:o.S.list(t,l),queryFn:e=>{let{signal:n}=e;return c({projectRef:t,connectionString:s,schema:l},n)},enabled:a&&void 0!==t&&u,...d})}},64327:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(86848).A)("ChevronsDown",[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]])},65759:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(86848).A)("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]])},65802:(e,t,s)=>{"use strict";s.d(t,{L:()=>i});var n=s(53239),l=s(39691),a=s(62550),r=s(9620);let i=e=>{let{data:t}=(0,r.YA)(),{data:s=[],isLoading:i}=(0,a.j)({projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString,schema:"storage"}),o=(0,n.useMemo)(()=>{let t=s.filter(e=>"objects"===e.table);return(0,l._S)(e,t).reduce((e,t)=>(e[t.name]=t.policies.length,e),{})},[e,s]);return{getPolicyCount:e=>o[e]||0,isLoading:i,policyCountMap:o}}},69372:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(86848).A)("BookOpenText",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}],["path",{d:"M6 8h2",key:"30oboj"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M16 12h2",key:"7q9ll5"}]])},81672:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(86848).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},88301:(e,t,s)=>{"use strict";s.d(t,{m:()=>d});var n=s(80263),l=s(69372),a=s(22891),r=s(36261),i=s(84512),o=s(39148),c=s(23729);let d=e=>{let{section:t,source:s}=e,d=(0,o.qM)(),{ref:m}=(0,a.g)(),{data:u}=(0,i.s)(),{mutate:x}=(0,r.h)();return(0,n.jsx)(c.G,{size:"tiny",type:"default",onClick:()=>{var e;t&&d.setActiveDocsSection(t),d.setShowProjectApiDocs(!0),x({action:"api_docs_opened",properties:{source:s},groups:{project:null!=m?m:"Unknown",organization:null!=(e=null==u?void 0:u.slug)?e:"Unknown"}})},icon:(0,n.jsx)(l.A,{}),className:"h-7 w-7",tooltip:{content:{side:"bottom",text:"API Docs"}},"data-sentry-element":"ButtonTooltip","data-sentry-component":"APIDocsButton","data-sentry-source-file":"APIDocsButton.tsx"})}},88845:(e,t,s)=>{"use strict";s.d(t,{F:()=>u});var n=s(80263),l=s(53239),a=s(7981),r=s(8e3),i=s(31626),o=s(60656),c=s(80356),d=s(68152);let m={danger:(0,n.jsx)(r.A,{strokeWidth:1.5,size:18}),success:(0,n.jsx)(i.A,{strokeWidth:1.5,size:18}),warning:(0,n.jsx)(o.A,{strokeWidth:1.5,size:18}),info:(0,n.jsx)(c.A,{strokeWidth:1.5,size:18}),neutral:(0,n.jsx)(n.Fragment,{})};function u(e){let{variant:t="neutral",className:s,title:r,withIcon:i,closable:o,children:c,icon:u,actions:x}=e,h=(0,a.A)("alert"),[p,f]=(0,l.useState)(!0),y=[h.base];y.push(h.variant[t].base),s&&y.push(s);let j=[h.description,h.variant[t].description],g=[h.close];return(0,n.jsx)(n.Fragment,{children:p&&(0,n.jsxs)("div",{className:y.join(" "),children:[i?(0,n.jsx)("div",{className:h.variant[t].icon,children:i&&m[t]}):null,u&&u,(0,n.jsxs)("div",{className:"flex flex-1 items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:[h.variant[t].header,h.header].join(" "),children:r}),(0,n.jsx)("div",{className:j.join(" "),children:c})]}),x]}),o&&(0,n.jsx)("button",{"aria-label":"Close alert",onClick:()=>f(!1),className:g.join(" "),children:(0,n.jsx)(d.A,{strokeWidth:2,size:16})})]})})}},97344:(e,t,s)=>{var n=s(58381),l=s(51276),a=s(5689),r=s(33312),i=s(89527),o=s(79661),c=s(86458),d=s(63570),m=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(i(e)&&(r(e)||"string"==typeof e||"function"==typeof e.splice||o(e)||d(e)||a(e)))return!e.length;var t=l(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!n(e).length;for(var s in e)if(m.call(e,s))return!1;return!0}},97440:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>tY});var n=s(80263),l=s(34873),a=s(76174),r=s(41121),i=s(78219),o=s(91313),c=s(52555),d=s.n(c),m=s(80814),u=s(53239),x=s(23850),h=s(73969),p=s(22891),f=s(26089),y=s.n(f),j=s(48388),g=s.n(j),v=s(62550),b=s(16643),k=s(51355),w=s(80210),C=s(24523),N=s(80658);async function E(e){let{projectRef:t,id:s}=e;if(!t)throw Error("projectRef is required");if(!s)throw Error("Bucket name is requried");let{error:n}=await (0,C.bE)("/platform/storage/{ref}/buckets/{id}/empty",{params:{path:{ref:t,id:s}}});n&&(0,C.H4)(n);let{data:l,error:a}=await (0,C.yH)("/platform/storage/{ref}/buckets/{id}",{params:{path:{ref:t,id:s}}});return a&&(0,C.H4)(a),l}let S=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,k.jE)();return(0,w.n)({mutationFn:e=>E(e),async onSuccess(t,s,l){let{projectRef:a}=s;await n.invalidateQueries({queryKey:N.w.buckets(a)}),await (null==e?void 0:e(t,s,l))},async onError(e,s,n){void 0===t?h.oR.error("Failed to delete bucket: ".concat(e.message)):t(e,s,n)},...s})};var A=s(11164),_=s(9620),M=s(94335),z=s(39691);let I=e=>{let{visible:t,bucket:s,onClose:l}=e,a=(0,m.useRouter)(),{ref:r,bucketId:i}=(0,p.g)(),{data:o}=(0,_.YA)(),{data:c}=(0,A.p)({projectRef:r}),d=null!=c?c:[],{data:u}=(0,v.j)({projectRef:null==o?void 0:o.ref,connectionString:null==o?void 0:o.connectionString,schema:"storage"}),{mutateAsync:x,isPending:f}=(0,b.f)(),{mutate:j,isPending:k}=S({onSuccess:async()=>{if(!o)return console.error("Project is required");let e=(null!=u?u:[]).filter(e=>"objects"===e.table),t=(0,z._S)(d,e),n=y()(g()(t,{name:s.id}),["policies"],[]);try{await Promise.all(n.map(e=>x({projectRef:null==o?void 0:o.ref,connectionString:null==o?void 0:o.connectionString,originalPolicy:e}))),h.oR.success("Successfully deleted bucket ".concat(s.id)),i&&a.push("/project/".concat(r,"/storage/files")),l()}catch(e){h.oR.success("Successfully deleted bucket ".concat(s.id,". However, there was a problem deleting the policies tied to the bucket. Please review them in the storage policies section"))}}}),w=async()=>r?s?void j({projectRef:r,id:s.id}):console.error("No bucket is selected"):console.error("Project ref is required");return(0,n.jsx)(M.F,{visible:t,size:"medium",variant:"destructive",title:"Delete bucket “".concat(s.id,"”"),loading:k||f,confirmPlaceholder:"Type bucket name",confirmString:s.id,confirmLabel:"Delete bucket",onCancel:l,onConfirm:w,alert:{title:"You cannot recover this bucket once deleted",description:"This action cannot be undone"},"data-sentry-element":"TextConfirmModal","data-sentry-component":"DeleteBucketModal","data-sentry-source-file":"DeleteBucketModal.tsx",children:(0,n.jsxs)("p",{className:"text-sm",children:["Your bucket ",(0,n.jsx)("span",{className:"font-bold text-foreground",children:s.id})," and all of its contents will be permanently deleted."]})})};var L=s(32981),F=s(87494),D=s(10663),R=s(16581),T=s(12957),B=s(10723),O=s(78960);async function P(e){let{projectRef:t,id:s,isPublic:n,file_size_limit:l,allowed_mime_types:a}=e;if(!t)throw Error("projectRef is required");if(!s)throw Error("Bucket name is requried");let r={public:n};void 0!==l&&(r.file_size_limit=l),void 0!==a&&(r.allowed_mime_types=a);let{data:i,error:o}=await (0,C.F6)("/platform/storage/{ref}/buckets/{id}",{params:{path:{id:s,ref:t}},body:r});return o?{data:null,error:o}:{data:i,error:null}}let W=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,k.jE)();return(0,w.n)({mutationFn:async e=>{let t=await P(e);if(t.error)throw t.error;return t.data},async onSuccess(t,s,l){let{projectRef:a}=s;await n.invalidateQueries({queryKey:N.w.buckets(a)}),await (null==e?void 0:e(t,s,l))},async onError(e,s,n){void 0===t?h.oR.error("Failed to update bucket: ".concat(e.message)):t(e,s,n)},...s})};var q=s(85039),U=s(95137),V=s(65887),G=s(27371),H=s(72608),$=s(66329),J=s(99779),Y=s(44725),Q=s(44053);let K=D.Ik({name:D.Yj(),public:D.zM().default(!1),has_file_size_limit:D.zM().default(!1),formatted_size_limit:D.au.number().min(0,"File size upload limit has to be at least 0").optional(),allowed_mime_types:D.Yj().trim().default("")}),Z="edit-storage-bucket-form",X=e=>{var t,s,l,a,r;let{visible:i,bucket:o,onClose:c}=e,{ref:d}=(0,p.g)(),{data:m}=(0,O.Ij)({projectRef:d},{enabled:q.pe}),{value:x,unit:f}=(0,T.Jb)(null!=(s=null==m?void 0:m.fileSizeLimit)?s:0),y="".concat(x," ").concat(f),j=(0,u.useRef)(null),[g,v]=(0,u.useState)(R.s2.MB),{value:b}=(0,T.Jb)(null!=(l=null==o?void 0:o.file_size_limit)?l:0),{mutate:k,isPending:w}=W({onSuccess:()=>{h.oR.success('Successfully updated bucket "'.concat(null==o?void 0:o.name,'"')),c()},onError:e=>{var t;let s=(null==(t=e.message)?void 0:t.toLowerCase())||"";s.includes("exceeded the maximum allowed size")||s.includes("maximum allowed size")||s.includes("entity too large")||s.includes("payload too large")?N.setError("formatted_size_limit",{type:"manual",message:"Exceeds global limit of ".concat(y,".")}):s.includes("mime type")&&(s.includes("is not supported")||s.includes("not supported"))?N.setError("allowed_mime_types",{type:"manual",message:"Invalid MIME type format. Please check your input."}):h.oR.error("Failed to update bucket: ".concat(e.message||"Unknown error"))}}),C={name:null!=(a=null==o?void 0:o.name)?a:"",public:null==o?void 0:o.public,has_file_size_limit:!!(null==o?void 0:o.file_size_limit),formatted_size_limit:(null==o?void 0:o.file_size_limit)?null!=b?b:0:void 0,allowed_mime_types:(null!=(r=null==o?void 0:o.allowed_mime_types)?r:[]).join(", ")},N=(0,F.mN)({resolver:(0,L.u)(K),defaultValues:C,values:C,mode:"onSubmit"}),{formatted_size_limit:E}=N.formState.errors,S=N.watch("public"),A=N.watch("has_file_size_limit"),[_,M]=(0,u.useState)(!!(null==o||null==(t=o.allowed_mime_types)?void 0:t.length)),z=(null==o?void 0:o.public)!==S,I=(null==o?void 0:o.public)&&!S,D=!(null==o?void 0:o.public)&&S,P=()=>{N.reset(),c()},X=async e=>void 0===o?console.error("Bucket is required"):void 0===d?console.error("Project ref is required"):e.has_file_size_limit&&void 0!==e.formatted_size_limit&&(null==m?void 0:m.fileSizeLimit)&&(0,T.OG)(e.formatted_size_limit,g)>m.fileSizeLimit?N.setError("formatted_size_limit",{type:"manual",message:"exceed_global_limit"}):void k({projectRef:d,id:o.id,isPublic:e.public,file_size_limit:e.has_file_size_limit&&e.formatted_size_limit?(0,T.OG)(e.formatted_size_limit,g):null,allowed_mime_types:_&&e.allowed_mime_types.length>0?e.allowed_mime_types.split(",").map(e=>e.trim()):null});return(0,u.useEffect)(()=>{if(i&&o&&j.current!==o.id&&o.file_size_limit){let{unit:e}=(0,T.Jb)(o.file_size_limit);v(e),j.current=o.id}},[i,o,N]),(0,n.jsx)(U.lG,{open:i,onOpenChange:e=>{e||P()},"data-sentry-element":"Dialog","data-sentry-component":"EditBucketModal","data-sentry-source-file":"EditBucketModal.tsx",children:(0,n.jsxs)(U.Cf,{"data-sentry-element":"DialogContent","data-sentry-source-file":"EditBucketModal.tsx",children:[(0,n.jsx)(U.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"EditBucketModal.tsx",children:(0,n.jsx)(U.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"EditBucketModal.tsx",children:"Edit bucket “".concat(null==o?void 0:o.name,"”")})}),(0,n.jsx)(U.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"EditBucketModal.tsx"}),(0,n.jsx)(V.lV,{...N,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"EditBucketModal.tsx",children:(0,n.jsxs)("form",{id:Z,onSubmit:N.handleSubmit(X),children:[(0,n.jsxs)(U.OO,{className:"space-y-6","data-sentry-element":"DialogSection","data-sentry-source-file":"EditBucketModal.tsx",children:[(0,n.jsx)(V.zB,{name:"name",control:N.control,render:e=>{let{field:t}=e;return(0,n.jsx)(Q.M,{hideMessage:!0,name:"name",label:"Bucket name",labelOptional:"Cannot be changed after creation",children:(0,n.jsx)(V.MJ,{children:(0,n.jsx)(G.p,{id:"name",...t,disabled:!0})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"EditBucketModal.tsx"},"name"),(0,n.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,n.jsx)(V.zB,{name:"public",control:N.control,render:e=>{let{field:t}=e;return(0,n.jsx)(Q.M,{hideMessage:!0,name:"public",label:"Public bucket",description:"Allow anyone to read objects without authorization",layout:"flex",children:(0,n.jsx)(V.MJ,{children:(0,n.jsx)(H.d,{id:"public",size:"large",checked:t.value,onCheckedChange:t.onChange})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"EditBucketModal.tsx"},"public"),z&&(0,n.jsx)(Y.Z,{type:"warning",title:"Warning: Making bucket ".concat(D?"public":"private"),description:(0,n.jsxs)(n.Fragment,{children:[D&&(0,n.jsx)("p",{children:"This will make all objects in your bucket publicly accessible."}),I&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"mb-2 !leading-normal",children:"All objects in your bucket will only accessible via signed URLs, or downloaded with the right authorization headers."}),(0,n.jsxs)("p",{className:"!leading-normal",children:["Assets cached in the CDN may still be publicly accessible. You can consider"," ",(0,n.jsx)(B.g,{href:"".concat(q.aq,"/guides/storage/cdn/smart-cdn#cache-eviction"),children:"purging the cache"})," ","or moving your assets to a new bucket."]})]})]})})]})]}),(0,n.jsx)(U.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"EditBucketModal.tsx"}),(0,n.jsxs)(U.OO,{className:"space-y-2","data-sentry-element":"DialogSection","data-sentry-source-file":"EditBucketModal.tsx",children:[(0,n.jsx)(V.zB,{name:"has_file_size_limit",control:N.control,render:e=>{let{field:t}=e;return(0,n.jsx)(Q.M,{name:"has_file_size_limit",label:"Restrict file size",description:"Prevent uploading of files larger than a specified limit",layout:"flex",children:(0,n.jsx)(V.MJ,{children:(0,n.jsx)(H.d,{id:"has_file_size_limit",size:"large",checked:t.value,onCheckedChange:t.onChange})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"EditBucketModal.tsx"},"has_file_size_limit"),A&&(0,n.jsxs)("div",{children:[(0,n.jsx)(V.zB,{name:"formatted_size_limit",control:N.control,render:e=>{let{field:t}=e;return(0,n.jsx)(Q.M,{hideMessage:!0,name:"formatted_size_limit",label:"File size limit",children:(0,n.jsxs)("div",{className:"grid grid-cols-12 gap-x-2",children:[(0,n.jsx)("div",{className:"col-span-8",children:(0,n.jsx)(V.MJ,{children:(0,n.jsx)(G.p,{id:"formatted_size_limit","aria-label":"File size limit",type:"number",min:0,placeholder:"0",...t})})}),(0,n.jsx)("div",{className:"col-span-4",children:(0,n.jsxs)($.l6,{value:g,onValueChange:v,children:[(0,n.jsx)($.bq,{"aria-label":"File size limit unit",size:"small",children:(0,n.jsx)($.yv,{children:g})}),(0,n.jsx)($.gC,{children:Object.values(R.s2).map(e=>(0,n.jsx)($.eb,{value:e,className:"text-xs",children:e},e))})]})})]})})}},"formatted_size_limit"),(null==E?void 0:E.message)==="exceed_global_limit"&&(0,n.jsxs)(V.C5,{className:"mt-2",children:["Exceeds global limit of ",y,". Increase limit in"," ",(0,n.jsx)(B.g,{className:"text-destructive decoration-destructive-500 hover:decoration-destructive",href:"/project/".concat(d,"/storage/settings"),onClick:c,children:"Storage Settings"})," ","first."]}),q.pe&&(0,n.jsxs)("p",{className:"text-sm text-foreground-lighter mt-2",children:["This project has a"," ",(0,n.jsx)(B.g,{className:"text-foreground-light hover:text-foreground",href:"/project/".concat(d,"/storage/settings"),onClick:c,children:"global file size limit"})," ","of ",y,"."]})]})]}),(0,n.jsx)(U.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"EditBucketModal.tsx"}),(0,n.jsxs)(U.OO,{className:"space-y-2","data-sentry-element":"DialogSection","data-sentry-source-file":"EditBucketModal.tsx",children:[(0,n.jsx)(Q.M,{name:"has_allowed_mime_types",label:"Restrict MIME types",description:"Allow only certain types of files to be uploaded",layout:"flex","data-sentry-element":"FormItemLayout","data-sentry-source-file":"EditBucketModal.tsx",children:(0,n.jsx)(V.MJ,{"data-sentry-element":"FormControl_Shadcn_","data-sentry-source-file":"EditBucketModal.tsx",children:(0,n.jsx)(H.d,{id:"has_allowed_mime_types",size:"large",checked:_,onCheckedChange:M,"data-sentry-element":"Switch","data-sentry-source-file":"EditBucketModal.tsx"})})}),_&&(0,n.jsx)(V.zB,{name:"allowed_mime_types",control:N.control,render:e=>{let{field:t}=e;return(0,n.jsx)(Q.M,{name:"allowed_mime_types",label:"Allowed MIME types",labelOptional:"Comma separated values",description:"Wildcards are allowed, e.g. image/*.",children:(0,n.jsx)(V.MJ,{children:(0,n.jsx)(G.p,{id:"allowed_mime_types",...t,placeholder:"e.g image/jpeg, image/png, audio/mpeg, video/mp4, etc"})})})}},"allowed_mime_types")]})]})}),(0,n.jsxs)(U.Es,{"data-sentry-element":"DialogFooter","data-sentry-source-file":"EditBucketModal.tsx",children:[(0,n.jsx)(J.$,{type:"default",disabled:w,onClick:P,"data-sentry-element":"Button","data-sentry-source-file":"EditBucketModal.tsx",children:"Cancel"}),(0,n.jsx)(J.$,{form:Z,htmlType:"submit",loading:w,"data-sentry-element":"Button","data-sentry-source-file":"EditBucketModal.tsx",children:"Save"})]})]})})};async function ee(e){let{projectRef:t,id:s}=e;if(!t)throw Error("projectRef is required");if(!s)throw Error("Bucket name is requried");let{data:n,error:l}=await (0,C.bE)("/platform/storage/{ref}/buckets/{id}/empty",{params:{path:{id:s,ref:t}}});return l&&(0,C.H4)(l),n}let et=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,k.jE)();return(0,w.n)({mutationFn:e=>ee(e),async onSuccess(t,s,l){let{projectRef:a}=s;await n.invalidateQueries({queryKey:N.w.buckets(a)}),await (null==e?void 0:e(t,s,l))},async onError(e,s,n){void 0===t?h.oR.error("Failed to empty bucket: ".concat(e.message)):t(e,s,n)},...s})};var es=s(51537);let en=e=>{let{visible:t,bucket:s,onClose:l}=e,{ref:a}=(0,p.g)(),{fetchFolderContents:r}=(0,es.$)(),{mutate:i,isPending:o}=et({onSuccess:async()=>{void 0!==s&&(await r({bucketId:s.id,folderId:s.id,folderName:s.name,index:-1}),h.oR.success("Successfully emptied bucket ".concat(s.name)),l())}}),c=async()=>a?s?void i({projectRef:a,id:s.id}):console.error("No bucket is selected"):console.error("Project ref is required");return(0,n.jsx)(U.lG,{open:t,onOpenChange:e=>{e||l()},"data-sentry-element":"Dialog","data-sentry-component":"EmptyBucketModal","data-sentry-source-file":"EmptyBucketModal.tsx",children:(0,n.jsxs)(U.Cf,{"data-sentry-element":"DialogContent","data-sentry-source-file":"EmptyBucketModal.tsx",children:[(0,n.jsx)(U.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"EmptyBucketModal.tsx",children:(0,n.jsx)(U.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"EmptyBucketModal.tsx",children:"Empty bucket “".concat(null==s?void 0:s.name,"”")})}),(0,n.jsx)(U.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"EmptyBucketModal.tsx"}),(0,n.jsx)(Y.Z,{type:"destructive",className:"rounded-none border-x-0 border-t-0 mb-0",title:"This action cannot be undone",description:"The contents of your bucket cannot be recovered once deleted.","data-sentry-element":"Admonition","data-sentry-source-file":"EmptyBucketModal.tsx"}),(0,n.jsx)(U.OO,{"data-sentry-element":"DialogSection","data-sentry-source-file":"EmptyBucketModal.tsx",children:(0,n.jsxs)("p",{className:"text-sm",children:["Are you sure you want to remove all contents from the bucket “",null==s?void 0:s.name,"”?"]})}),(0,n.jsxs)(U.Es,{"data-sentry-element":"DialogFooter","data-sentry-source-file":"EmptyBucketModal.tsx",children:[(0,n.jsx)(J.$,{type:"default",disabled:o,onClick:l,"data-sentry-element":"Button","data-sentry-source-file":"EmptyBucketModal.tsx",children:"Cancel"}),(0,n.jsx)(J.$,{type:"danger",loading:o,onClick:c,"data-sentry-element":"Button","data-sentry-source-file":"EmptyBucketModal.tsx",children:"Empty bucket"})]})]})})},el=()=>{let{ref:e,bucketId:t}=(0,p.g)();return(0,A.p)({projectRef:e},{select:e=>e.find(e=>e.id===t)})};var ea=s(72112),er=s(88845),ei=s(27695);let eo=e=>{var t;let{error:s}=e,{ref:l}=(0,p.g)();return(0,n.jsx)("div",{className:"storage-container flex items-center justify-center flex-grow","data-sentry-component":"StorageBucketsError","data-sentry-source-file":"StorageBucketsError.tsx",children:(0,n.jsx)("div",{children:(0,n.jsxs)(er.F,{withIcon:!0,variant:"warning",title:"Failed to fetch buckets",actions:[(0,n.jsx)(J.$,{asChild:!0,type:"default",className:"ml-4",children:(0,n.jsx)(ei.Y,{queryParams:{projectRef:l,category:ea.S.DASHBOARD_BUG,subject:"Unable to fetch storage buckets"},children:"Contact support"})},"contact-support")],"data-sentry-element":"Alert","data-sentry-source-file":"StorageBucketsError.tsx",children:[(0,n.jsx)("p",{className:"mb-1",children:"Please try refreshing your browser, or contact support if the issue persists"}),(0,n.jsxs)("p",{children:["Error: ",null!=(t=null==s?void 0:s.message)?t:"Unknown"]})]})})})};var ec=s(93896),ed=s.n(ec),em=s(97344),eu=s.n(em),ex=s(86727),eh=s.n(ex),ep=s(56404),ef=s(74065),ey=s(61767),ej=s(83927),eg=s.n(ej),ev=s(68421);let eb=e=>{let{visible:t=!1,selectedItemsToDelete:s=[],onSelectCancel:l=eg(),onSelectDelete:a=eg()}=e,[r,i]=(0,u.useState)(!1);(0,u.useEffect)(()=>{i(!1)},[t]);let o=s.length>1,c=o?"Confirm deletion of ".concat(s.length," items"):1===s.length?"Confirm deletion of ".concat(s[0].name):"",d=o?"Are you sure you want to delete the selected ".concat(s.length," items?"):1===s.length?"Are you sure you want to delete the selected ".concat(s[0].type.toLowerCase(),"?"):"";return(0,n.jsx)(ev.A,{visible:t,title:(0,n.jsx)("span",{className:"break-words",children:c}),size:"medium",onCancel:l,onConfirm:()=>{i(!0),a()},variant:"destructive",alert:{base:{variant:"destructive"},title:"This action cannot be undone",description:d},"data-sentry-element":"ConfirmationModal","data-sentry-component":"ConfirmDeleteModal","data-sentry-source-file":"ConfirmDeleteModal.tsx"})};var ek=s(53434),ew=s.n(ek),eC=s(6217),eN=s(49151),eE=s(80421),eS=s(40314),eA=s(27664),e_=s(24318),eM=s(38904),ez=s(67850);let eI=async(e,t)=>{let{projectRef:s,bucketId:n,path:l,options:a}=e;if(!n)throw Error("bucketId is required");let{data:r,error:i}=await (0,C.bE)("/platform/storage/{ref}/buckets/{id}/objects/public-url",{params:{path:{ref:s,id:n}},body:{path:l,options:a},signal:t});return i&&(0,C.H4)(i),r},eL=async(e,t)=>{let{projectRef:s,bucketId:n,path:l,expiresIn:a,options:r}=e;if(!n)throw Error("bucketId is required");let{data:i,error:o}=await (0,C.bE)("/platform/storage/{ref}/buckets/{id}/objects/sign",{params:{path:{ref:s,id:n}},body:{path:l,expiresIn:a,options:r},signal:t});return o&&(0,C.H4)(o),i},eF=async(e,t,s,n,l)=>n?(await eI({projectRef:t,bucketId:s,path:e})).publicUrl:(await eL({projectRef:t,bucketId:s,path:e,expiresIn:null!=l?l:604800})).signedUrl,eD=function(e){let{file:t,projectRef:s,bucket:n}=e,{...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{getPathAlongOpenedFolders:a}=(0,es.$)(),r=[a(!1),null==t?void 0:t.name].join("/");return(0,ez.I)({queryKey:[s,"buckets",n.public,n.id,"file",r],queryFn:()=>eF(r,s,n.id,n.public,604800),staleTime:6048e5,...l})},eR=()=>{var e,t,s,n,l;let{projectRef:a,selectedBucket:r,getPathAlongOpenedFolders:i}=(0,es.$)(),{data:o}=(0,e_.A)({projectRef:a}),{data:c}=(0,eA.G)({projectRef:a}),d=null!=(l=null==c||null==(e=c.app_config)?void 0:e.protocol)?l:"https",m=null==c||null==(t=c.app_config)?void 0:t.endpoint,x="".concat(d,"://").concat(null!=m?m:"-"),p=(0,u.useCallback)((e,t)=>eF([i(!1),e].join("/"),a,r.id,r.public,t),[a,r.id,r.public,i]);return{onCopyUrl:(0,u.useCallback)((e,t)=>{let s=p(e,t).then(e=>{var t;return(null==o||null==(t=o.customDomain)?void 0:t.status)==="active"?e.replace(x,"https://".concat(o.customDomain.hostname)):e});return(0,eM.l)(s,()=>{h.oR.success("Copied URL for ".concat(e," to clipboard."))})},[x,null==o||null==(s=o.customDomain)?void 0:s.hostname,null==o||null==(n=o.customDomain)?void 0:n.status,p])}},eT={days:86400,weeks:604800,months:2592e3,years:31536e3},eB=()=>{let{onCopyUrl:e}=eR(),{selectedFileCustomExpiry:t,setSelectedFileCustomExpiry:s}=(0,es.$)(),l=void 0!==t,a=()=>s(void 0);return(0,n.jsx)(eC.A,{hideFooter:!0,size:"small",header:"Custom expiry for signed URL",visible:l,alignFooter:"right",confirmText:"Get URL",onCancel:()=>a(),"data-sentry-element":"Modal","data-sentry-component":"CustomExpiryModal","data-sentry-source-file":"CustomExpiryModal.tsx",children:(0,n.jsx)(eN.A,{validateOnBlur:!0,initialValues:{expiresIn:"",units:"days"},onSubmit:async(s,n)=>{let{setSubmitting:l}=n;l(!0),await e(t.name,s.expiresIn*eT[s.units]),l(!1),a()},validate:e=>{let t={};return""!==e.expiresIn&&e.expiresIn<=0&&(t.expiresIn="Expiry duration cannot be less than 0"),t},"data-sentry-element":"Form","data-sentry-source-file":"CustomExpiryModal.tsx",children:e=>{let{values:t,isSubmitting:s}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(eC.A.Content,{children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light mb-2",children:"Enter the duration for which the URL will be valid for:"}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(eE.A,{disabled:s,type:"number",id:"expiresIn",className:"w-full"}),(0,n.jsxs)(eS.A,{id:"units",className:"w-[150px]",children:[(0,n.jsx)(eS.A.Option,{id:"days",label:"days",value:"days",children:"days"}),(0,n.jsx)(eS.A.Option,{id:"weeks",label:"weeks",value:"weeks",children:"weeks"}),(0,n.jsx)(eS.A.Option,{id:"months",label:"months",value:"months",children:"months"}),(0,n.jsx)(eS.A.Option,{id:"years",label:"years",value:"years",children:"years"})]})]}),""!==t.expiresIn&&(0,n.jsxs)("p",{className:"text-sm text-foreground-light mt-2",children:["URL will expire on"," ",ew()().add(t.expiresIn,t.units).format(q.QM)]})]}),(0,n.jsx)(eC.A.Separator,{}),(0,n.jsxs)(eC.A.Content,{className:"flex items-center justify-end space-x-2",children:[(0,n.jsx)(J.$,{type:"default",onClick:()=>a(),children:"Cancel"}),(0,n.jsx)(J.$,{disabled:""===t.expiresIn||s,loading:s,htmlType:"submit",type:"primary",children:"Get signed URL"})]})]})}})})};var eO=s(80100),eP=s(9711);s(42458);var eW=s(80090),eq=s(65759),eU=s(9753),eV=s(93901),eG=s(76196),eH=s(64327),e$=s(86848);let eJ=(0,e$.A)("ChevronsUp",[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]]),eY=e=>{let{id:t=""}=e,{columns:s,selectedItems:l,setSelectedItems:a,setView:r,setSortBy:i,setSortByOrder:o,addNewFolderPlaceholder:c}=(0,es.$)(),{can:d}=(0,eW.Qp)(ea.aG.STORAGE_WRITE,"*"),m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;c(e)};return(0,n.jsxs)(eP.W1,{id:t,animation:"fade","data-sentry-element":"Menu","data-sentry-component":"ColumnContextMenu","data-sentry-source-file":"ColumnContextMenu.tsx",children:[d&&[(0,n.jsxs)(eP.q7,{onClick:e=>{let{props:t}=e;return m(t.index)},children:[(0,n.jsx)(eq.A,{size:14}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"New folder"})]},"create-folder"),(0,n.jsx)(eP.wv,{},"create-folder-separator")],(0,n.jsxs)(eP.q7,{onClick:e=>{let{props:t}=e;return(e=>{let t=s[e].items.filter(e=>e.type===ey.Vl.FILE).map(t=>({...t,columnIndex:e})),n=ed()(t.map(e=>e.id));l.filter(e=>e.id&&n.includes(e.id)).length===t.length?a(l.filter(e=>e.id&&!n.includes(e.id))):a(eh()(l.concat(t),"id"))})(t.index)},"data-sentry-element":"Item","data-sentry-source-file":"ColumnContextMenu.tsx",children:[(0,n.jsx)(eU.A,{size:14,"data-sentry-element":"Copy","data-sentry-source-file":"ColumnContextMenu.tsx"}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Select all items"})]}),(0,n.jsxs)(eP.Qw,{label:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(eV.A,{size:14}),(0,n.jsx)("span",{className:"text-xs",children:"View"})]}),arrow:(0,n.jsx)(eG.A,{size:14}),"data-sentry-element":"Submenu","data-sentry-source-file":"ColumnContextMenu.tsx",children:[(0,n.jsx)(eP.q7,{onClick:()=>r(ey.JB.COLUMNS),"data-sentry-element":"Item","data-sentry-source-file":"ColumnContextMenu.tsx",children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"As columns"})}),(0,n.jsx)(eP.q7,{onClick:()=>r(ey.JB.LIST),"data-sentry-element":"Item","data-sentry-source-file":"ColumnContextMenu.tsx",children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"As list"})})]}),(0,n.jsxs)(eP.Qw,{label:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(eH.A,{size:14}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Sort by"})]}),arrow:(0,n.jsx)(eG.A,{size:14}),"data-sentry-element":"Submenu","data-sentry-source-file":"ColumnContextMenu.tsx",children:[(0,n.jsx)(eP.q7,{onClick:()=>i(ey.NA.NAME),"data-sentry-element":"Item","data-sentry-source-file":"ColumnContextMenu.tsx",children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Name"})}),(0,n.jsx)(eP.q7,{onClick:()=>i(ey.NA.CREATED_AT),"data-sentry-element":"Item","data-sentry-source-file":"ColumnContextMenu.tsx",children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Last created"})}),(0,n.jsx)(eP.q7,{onClick:()=>i(ey.NA.UPDATED_AT),"data-sentry-element":"Item","data-sentry-source-file":"ColumnContextMenu.tsx",children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Last modified"})}),(0,n.jsx)(eP.q7,{onClick:()=>i(ey.NA.LAST_ACCESSED_AT),"data-sentry-element":"Item","data-sentry-source-file":"ColumnContextMenu.tsx",children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Last accessed"})})]}),(0,n.jsxs)(eP.Qw,{label:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(eJ,{size:14}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Sort by order"})]}),arrow:(0,n.jsx)(eG.A,{size:14}),"data-sentry-element":"Submenu","data-sentry-source-file":"ColumnContextMenu.tsx",children:[(0,n.jsx)(eP.q7,{onClick:()=>o(ey.ou.ASC),"data-sentry-element":"Item","data-sentry-source-file":"ColumnContextMenu.tsx",children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Ascending"})}),(0,n.jsx)(eP.q7,{onClick:()=>o(ey.ou.DESC),"data-sentry-element":"Item","data-sentry-source-file":"ColumnContextMenu.tsx",children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Descending"})})]})]})};var eQ=s(76888),eK=s(48250),eZ=s.n(eK),eX=s(23417),e0=s(44412),e1=s(53931),e2=s(6436),e4=s(98357),e5=s(84305),e3=s.n(e5),e6=s(54831),e8=s(71545);let e7=(0,e$.A)("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),e9=(0,e$.A)("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);var te=s(37766),tt=s(3225),ts=s(29948),tn=s(32353),tl=s(12123),ta=s(77444),tr=s(16110),ti=s(30404),to=s(21162),tc=s(14685),td=s.n(tc);let tm=e=>{var t;let{item:s,view:l,columnIndex:a,style:r}=e,{renameFile:i,renameFolder:o,addNewFolder:c,updateRowStatus:d}=(0,es.$)(),m=(0,u.useRef)(null),[x,h]=(0,u.useState)(s.name),p=async(e,t)=>{if(t&&(t.preventDefault(),t.stopPropagation()),s.type===ey.Vl.FILE)await i(s,e,a);else if(td()(s,"id")){let n={...s,columnIndex:a};o({folder:n,newName:e,columnIndex:a,onError:()=>{"blur"===t.type?d({name:n.name,status:ey.U1.READY,columnIndex:a}):m.current.select()}})}else c({folderName:e,columnIndex:a,onError:()=>{"blur"===t.type?c({folderName:"",columnIndex:a}):m.current.select()}})};return(0,u.useEffect)(()=>{if(m.current){let e=s.name.lastIndexOf("."),t=-1!==e?e:s.name.length;m.current.setSelectionRange(0,t),m.current.focus()}let e=e=>{"Escape"===e.key&&((null==s?void 0:s.id)!==void 0?p(s.name):c({folderName:"",columnIndex:a}))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,n.jsx)("div",{style:r,className:"storage-row flex items-center justify-between rounded bg-gray-500","data-sentry-component":"FileExplorerRowEditing","data-sentry-source-file":"FileExplorerRowEditing.tsx",children:(0,n.jsxs)("div",{className:"flex h-full flex-grow items-center px-2.5",children:[(0,n.jsx)("div",{children:(0,n.jsx)(tx,{view:l,status:s.status,fileType:s.type,mimeType:null==(t=s.metadata)?void 0:t.mimetype,"data-sentry-element":"RowIcon","data-sentry-source-file":"FileExplorerRowEditing.tsx"})}),(0,n.jsxs)("form",{className:"h-9",onSubmit:e=>p(x,e),children:[(0,n.jsx)("input",{autoFocus:!0,ref:m,className:"storage-row-input ml-3 h-full bg-inherit p-0 px-1 text-sm",type:"text",value:x,onChange:e=>h(e.target.value),onBlur:e=>p(x,e)}),(0,n.jsx)("button",{className:"hidden",type:"submit",onClick:e=>p(x,e)})]})]})})};var tu=s(32916);let tx=e=>{let{view:t,status:s,fileType:l,mimeType:a}=e;if(t===ey.JB.LIST&&s===ey.U1.LOADING)return(0,n.jsx)(e6.A,{size:16,strokeWidth:2,className:"animate-spin"});if(l===ey.Vl.BUCKET||l===ey.Vl.FOLDER){let e=l===ey.Vl.BUCKET?"".concat(q.o2,"/img/bucket-filled.svg"):l===ey.Vl.FOLDER?"".concat(q.o2,"/img/folder-filled.svg"):"".concat(q.o2,"/img/file-filled.svg");return(0,n.jsx)(tr.A,{src:e,preProcessor:e=>e.replace(/svg/,'svg class="w-4 h-4 text-color-inherit opacity-75"')})}return(null==a?void 0:a.includes("image"))?(0,n.jsx)(e8.A,{size:16,strokeWidth:2}):(null==a?void 0:a.includes("audio"))?(0,n.jsx)(e7,{size:16,strokeWidth:2}):(null==a?void 0:a.includes("video"))?(0,n.jsx)(e9,{size:16,strokeWidth:2}):(0,n.jsx)(te.A,{size:16,strokeWidth:2,"data-sentry-element":"File","data-sentry-component":"RowIcon","data-sentry-source-file":"FileExplorerRow.tsx"})},th=e=>{var t;let{index:s,item:l,view:a=ey.JB.COLUMNS,columnIndex:r=0,selectedItems:i=[],style:c}=e,{bucketId:d}=(0,p.g)(),{selectedBucket:m,selectedFilePreview:u,openedFolders:x,popColumnAtIndex:h,popOpenedFoldersAtIndex:f,clearSelectedItems:y,setSelectedFilePreview:j,setSelectedFileCustomExpiry:v,setSelectedItems:b,setSelectedItemsToDelete:k,downloadFile:w,setSelectedItemToRename:C,setSelectedItemsToMove:N,openFolder:E,downloadFolder:S,selectRangeItems:A}=(0,es.$)(),{show:_}=(0,eP.EF)(),{onCopyUrl:M}=eR(),z=m.public,I={...l,columnIndex:r},L=!!i.find(e=>e.id===l.id),F=x.length>r&&x[r].name===l.name,D=!eu()(u)&&e3()(null==u?void 0:u.id,l.id),{can:R}=(0,eW.Qp)(ea.aG.STORAGE_WRITE,"*"),T=async e=>{h(e),f(e-1),j(I),y()},B=l.type===ey.Vl.FOLDER?[...R?[{name:"Rename",icon:(0,n.jsx)(tt.A,{size:14,strokeWidth:1}),onClick:()=>C(I)}]:[],{name:"Download",icon:(0,n.jsx)(ts.A,{size:14,strokeWidth:1}),onClick:()=>S(I)},{name:"Copy path to folder",icon:(0,n.jsx)(eU.A,{size:14,strokeWidth:1}),onClick:()=>(0,tu.Ym)(x,I)},...R?[{name:"Separator",icon:void 0,onClick:void 0},{name:"Delete",icon:(0,n.jsx)(o.A,{size:14,strokeWidth:1}),onClick:()=>k([I])}]:[]]:[...l.isCorrupted?[]:[...z?[{name:"Get URL",icon:(0,n.jsx)(eU.A,{size:14,strokeWidth:1}),onClick:()=>M(I.name)}]:[{name:"Get URL",icon:(0,n.jsx)(eU.A,{size:14,strokeWidth:1}),children:[{name:"Expire in 1 week",onClick:()=>M(I.name,ey.Vm.WEEK)},{name:"Expire in 1 month",onClick:()=>M(I.name,ey.Vm.MONTH)},{name:"Expire in 1 year",onClick:()=>M(I.name,ey.Vm.YEAR)},{name:"Custom expiry",onClick:()=>v(I)}]}],...R?[{name:"Rename",icon:(0,n.jsx)(tt.A,{size:14,strokeWidth:1}),onClick:()=>C(I)},{name:"Move",icon:(0,n.jsx)(tn.A,{size:14,strokeWidth:1}),onClick:()=>N([I])},{name:"Download",icon:(0,n.jsx)(ts.A,{size:14,strokeWidth:1}),onClick:()=>w(I)},{name:"Separator",icon:void 0,onClick:void 0}]:[]],...R?[{name:"Delete",icon:(0,n.jsx)(o.A,{size:14,strokeWidth:1}),onClick:()=>k([I])}]:[]],O=l.metadata?(0,e2.z3)(l.metadata.size):"-",P=l.metadata?l.metadata.mimetype:"-",W=l.created_at?new Date(l.created_at).toLocaleString():"-",q=l.updated_at?new Date(l.updated_at).toLocaleString():"-",U=(e,t)=>{_(e,{id:t===ey.Vl.FILE?ey.Jn.STORAGE_ITEM:ey.Jn.STORAGE_FOLDER,props:{item:I}})},V=a===ey.JB.LIST&&l.isCorrupted?"calc(100% - 60px)":a!==ey.JB.LIST||l.isCorrupted?"100%":"calc(100% - 50px)";return l.status===ey.U1.EDITING?(0,n.jsx)(tm,{style:c,view:a,item:l,columnIndex:r}):(0,n.jsx)("div",{style:c,className:"h-full border-b border-default",onContextMenu:e=>{e.stopPropagation(),l.type===ey.Vl.FILE?U(e,ey.Vl.FILE):U(e,ey.Vl.FOLDER)},"data-sentry-component":"FileExplorerRow","data-sentry-source-file":"FileExplorerRow.tsx",children:(0,n.jsxs)("div",{className:(0,eO.cn)("storage-row group flex h-full items-center px-2.5","hover:bg-panel-footer-light [[data-theme*=dark]_&]:hover:bg-panel-footer-dark","".concat(F?"bg-surface-200":""),"".concat(D?"bg-green-500 hover:bg-green-500":""),"".concat(l.status!==ey.U1.LOADING?"cursor-pointer":"")),onClick:e=>{e.stopPropagation(),e.preventDefault(),l.status===ey.U1.LOADING||F||D||(l.type===ey.Vl.FOLDER||l.type===ey.Vl.BUCKET?E(r,l):T(r))},children:[(0,n.jsxs)("div",{className:(0,eO.cn)("flex items-center",a===ey.JB.LIST?"w-[40%] min-w-[250px]":"w-[90%]"),children:[(0,n.jsxs)("div",{className:"relative w-[30px]",onClick:e=>e.stopPropagation(),children:[!L&&(0,n.jsx)("div",{className:"absolute ".concat(l.type===ey.Vl.FILE?"group-hover:hidden":""),style:{top:"2px"},children:(0,n.jsx)(tx,{view:a,status:l.status,fileType:l.type,mimeType:null==(t=l.metadata)?void 0:t.mimetype})}),(0,n.jsx)(e4.A,{label:"",className:"w-full ".concat(l.type!==ey.Vl.FILE?"invisible":""," ").concat(L?"opacity-100":"opacity-0 group-hover:opacity-100"),checked:L,onChange:e=>{e.stopPropagation(),(e=>{if(e&&0!==i.length)return A(r,s);void 0!==g()(i,e=>I.id===e.id)?b(i.filter(e=>I.id!==e.id)):b([...i,I]),j(void 0)})(e.nativeEvent.shiftKey)},"data-sentry-element":"Checkbox","data-sentry-source-file":"FileExplorerRow.tsx"})]}),(0,n.jsx)("p",{title:l.name,className:"truncate text-sm",style:{width:V},children:l.name}),l.isCorrupted&&(0,n.jsxs)(ti.m_,{children:[(0,n.jsx)(ti.k$,{children:(0,n.jsx)(tl.A,{size:18,strokeWidth:2,className:"text-foreground-light"})}),(0,n.jsx)(ti.ZI,{side:"bottom",children:"File is corrupted, please delete and reupload again."})]})]}),a===ey.JB.LIST&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"w-[11%] min-w-[100px] truncate text-sm",children:O}),(0,n.jsx)("p",{className:"w-[14%] min-w-[100px] truncate text-sm",children:P}),(0,n.jsx)("p",{className:"w-[15%] min-w-[160px] truncate text-sm",children:W}),(0,n.jsx)("p",{className:"w-[15%] min-w-[160px] truncate text-sm",children:q})]}),(0,n.jsx)("div",{className:"flex items-center justify-end ".concat(a===ey.JB.LIST?"flex-grow":"w-[10%]"),onClick:e=>e.stopPropagation(),children:l.status===ey.U1.LOADING?(0,n.jsx)(e6.A,{className:"animate-spin ".concat(a===ey.JB.LIST?"invisible":""),size:16,strokeWidth:2}):(0,n.jsxs)(to.rI,{children:[(0,n.jsx)(to.ty,{children:(0,n.jsx)("div",{className:"storage-row-menu opacity-0",children:(0,n.jsx)(ta.A,{size:16,strokeWidth:2})})}),(0,n.jsx)(to.SQ,{side:"bottom",align:"end",children:B.map(e=>{var t,s,l;return(null!=(t=null==e?void 0:e.children)?t:[]).length>0?(0,n.jsxs)(to.lv,{children:[(0,n.jsxs)(to.nV,{className:"space-x-2",children:[e.icon||(0,n.jsx)(n.Fragment,{}),(0,n.jsx)("p",{children:e.name})]}),(0,n.jsx)(to.dc,{children:(0,n.jsx)(to.M5,{children:null==(s=null!=(l=null==e?void 0:e.children)?l:[])?void 0:s.map(e=>(0,n.jsx)(to._2,{onClick:e.onClick,children:(0,n.jsx)("p",{children:e.name})},e.name))})})]},e.name):"Separator"===e.name?(0,n.jsx)(to.mB,{},e.name):(0,n.jsxs)(to._2,{className:"space-x-2",onClick:e.onClick,children:[e.icon||(0,n.jsx)(n.Fragment,{}),(0,n.jsx)("p",{children:e.name})]},e.name)})})]})})]})})},tp=e=>{let{isOpen:t,onDragLeave:s,onDrop:l,folderIsEmpty:a}=e;return(0,n.jsx)(eQ.e,{show:t,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0",enterTo:"transform opacity-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100",leaveTo:"transform opacity-0",className:"h-full w-full absolute top-0","data-sentry-element":"Transition","data-sentry-component":"DragOverOverlay","data-sentry-source-file":"FileExplorerColumn.tsx",children:(0,n.jsx)("div",{onDragLeave:s,onDrop:l,className:"absolute top-0 flex h-full w-full items-center justify-center",style:{backgroundColor:a?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.2)"},children:!a&&(0,n.jsxs)("div",{className:"w-3/4 h-32 border-2 border-dashed border-muted rounded-md flex flex-col items-center justify-center p-6 pointer-events-none",style:{backgroundColor:"rgba(0,0,0,0.4)"},children:[(0,n.jsx)(eX.A,{className:"text-white pointer-events-none",size:20,strokeWidth:2}),(0,n.jsx)("p",{className:"text-center text-sm  text-white mt-2 pointer-events-none",children:"Drop your files to upload to this folder"})]})})})},tf=e=>{let{index:t=0,column:s,fullWidth:l=!1,selectedItems:a=[],itemSearchString:r="",onFilesUpload:i=eg(),onSelectAllItemsInColumn:o=eg(),onSelectColumnEmptySpace:c=eg(),onColumnLoadMore:d=eg()}=e,[m,x]=(0,u.useState)(!1),p=(0,u.useRef)(null),f=(0,es.$)(),{can:j}=(0,eW.Qp)(ea.aG.STORAGE_WRITE,"*");(0,u.useEffect)(()=>{if(p){let{scrollHeight:e,clientHeight:t}=p.current;e>t&&(p.current.scrollTop+=e-t)}},[s]);let g=a.length>0,v=s.items.map(e=>e.id),b=s.items.filter(e=>e.type===ey.Vl.FILE),k=a.filter(e=>v.includes(e.id)).filter(e=>e.type===ey.Vl.FILE),w=s.items.map((e,t)=>({...e,columnIndex:t})),C=eZ()(w.map(e=>y()(e,["metadata","size"],0))),N=0===s.items.filter(e=>e.status!==ey.U1.LOADING).length,{show:E}=(0,eP.EF)(),S=e=>{e&&(e.stopPropagation(),e.preventDefault(),"dragover"!==e.type||m||x(!0))},A=()=>(0,n.jsx)(e4.A,{label:"",className:"-mt-0.5",checked:0!==b.length&&k.length===b.length,disabled:0===b.length,onChange:()=>o(t),"data-sentry-element":"Checkbox","data-sentry-component":"SelectAllCheckbox","data-sentry-source-file":"FileExplorerColumn.tsx"}),_=(0,u.useCallback)(e=>{let t=w[e];return(null==t?void 0:t.id)||"file-explorer-item-".concat(e)},[w]),M=(0,u.useMemo)(()=>({view:f.view,columnIndex:t,selectedItems:a}),[f.view,t,a]);return(0,n.jsxs)("div",{ref:p,className:(0,eO.cn)(l?"w-full":"w-64 border-r border-overlay",f.view===ey.JB.LIST&&"h-full","hide-scrollbar relative flex flex-shrink-0 flex-col overflow-auto"),onContextMenu:e=>{E(e,{id:ey.Jn.STORAGE_COLUMN,props:{index:t}})},onDragOver:S,onDrop:e=>{S(e),j?i(e,t):(0,h.oR)("You need additional permissions to upload files to this project")},onClick:e=>{let s=y()(e.target,["className"],"");"string"==typeof s&&s.includes("react-contexify")||c(t)},"data-sentry-component":"FileExplorerColumn","data-sentry-source-file":"FileExplorerColumn.tsx",children:[f.view===ey.JB.COLUMNS&&(0,n.jsx)("div",{className:(0,eO.cn)("sticky top-0 z-10 mb-0 flex items-center bg-table-header-light px-2.5 [[data-theme*=dark]_&]:bg-table-header-dark",g?"h-10 py-3 opacity-100":"h-0 py-0 opacity-0","transition-all duration-200"),onClick:e=>e.stopPropagation(),children:b.length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A,{}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["Select all ",b.length," files"]})]}):(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"No files available for selection"})}),f.view===ey.JB.LIST&&(0,n.jsxs)("div",{className:"sticky top-0 py-2 z-10 flex min-w-min items-center border-b border-overlay bg-surface-100 px-2.5",children:[(0,n.jsxs)("div",{className:"flex w-[40%] min-w-[250px] items-center",children:[(0,n.jsx)(A,{}),(0,n.jsx)("p",{className:"text-sm",children:"Name"})]}),(0,n.jsx)("p",{className:"w-[11%] min-w-[100px] text-sm",children:"Size"}),(0,n.jsx)("p",{className:"w-[14%] min-w-[100px] text-sm",children:"Type"}),(0,n.jsx)("p",{className:"w-[15%] min-w-[160px] text-sm",children:"Created at"}),(0,n.jsx)("p",{className:"w-[15%] min-w-[160px] text-sm",children:"Last modified at"})]}),s.status===ey.U1.LOADING&&(0,n.jsxs)("div",{className:"\n            ".concat(l?"w-full":"w-64 border-r border-default","\n            px-2 py-1 my-1 flex flex-shrink-0 flex-col space-y-2 overflow-auto\n          "),children:[(0,n.jsx)(e1.Ay,{}),(0,n.jsx)(e1.Ay,{}),(0,n.jsx)(e1.Ay,{})]}),w.length>0&&(0,n.jsx)(e0.iH,{className:"h-full",items:w,itemProps:M,getItemKey:_,getItemSize:e=>0!==e&&e===w.length?85:37,ItemComponent:th,LoaderComponent:e0.P5,hasNextPage:s.status!==ey.U1.LOADING&&s.hasMoreItems,isLoadingNextPage:s.isLoadingMoreItems,onLoadNextPage:()=>d(t,s)}),!(f.isSearching&&r.length>0)&&0===s.items.length&&s.status!==ey.U1.LOADING&&(0,n.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center",children:[(0,n.jsx)("img",{alt:"storage-placeholder",src:"".concat(q.o2,"/img/storage-placeholder.svg"),className:"opacity-75 pointer-events-none"}),(0,n.jsx)("p",{className:"text-sm my-3 opacity-75",children:"Drop your files here"}),(0,n.jsx)("p",{className:"w-40 text-center text-xs text-foreground-light",children:'Or upload them via the "Upload file" button above'})]}),f.isSearching&&r.length>0&&N&&s.status!==ey.U1.LOADING&&(0,n.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center",children:[(0,n.jsx)("p",{className:"text-sm my-3 text-foreground",children:"No results found in this folder"}),(0,n.jsxs)("p",{className:"w-40 text-center text-sm text-foreground-light",children:['Your search for "',r,'" did not return any results']})]}),(0,n.jsx)(tp,{isOpen:m,folderIsEmpty:N,onDragLeave:()=>x(!1),onDrop:()=>x(!1),"data-sentry-element":"DragOverOverlay","data-sentry-source-file":"FileExplorerColumn.tsx"}),f.view===ey.JB.LIST&&(0,n.jsx)("div",{className:"shrink-0 rounded-b-md z-10 flex min-w-min items-center bg-panel-footer-light px-2.5 py-2 [[data-theme*=dark]_&]:bg-panel-footer-dark w-full",children:(0,n.jsxs)("p",{className:"text-sm",children:[(0,e2.z3)(C)," for ",w.length," items"]})})]})},ty=e=>{let{id:t=""}=e,{openedFolders:s,downloadFolder:l,setSelectedItemToRename:a,setSelectedItemsToDelete:r}=(0,es.$)(),{can:i}=(0,eW.Qp)(ea.aG.STORAGE_WRITE,"*");return(0,n.jsxs)(eP.W1,{id:t,animation:"fade","data-sentry-element":"Menu","data-sentry-component":"FolderContextMenu","data-sentry-source-file":"FolderContextMenu.tsx",children:[i&&(0,n.jsxs)(eP.q7,{onClick:e=>{let{props:t}=e;return a(t.item)},children:[(0,n.jsx)(tt.A,{size:12}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Rename"})]}),(0,n.jsxs)(eP.q7,{onClick:e=>{let{props:t}=e;return l(t.item)},"data-sentry-element":"Item","data-sentry-source-file":"FolderContextMenu.tsx",children:[(0,n.jsx)(ts.A,{size:12,"data-sentry-element":"Download","data-sentry-source-file":"FolderContextMenu.tsx"}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Download"})]}),(0,n.jsxs)(eP.q7,{onClick:e=>{let{props:t}=e;return(0,tu.Ym)(s,t.item)},"data-sentry-element":"Item","data-sentry-source-file":"FolderContextMenu.tsx",children:[(0,n.jsx)(eU.A,{size:12,"data-sentry-element":"Copy","data-sentry-source-file":"FolderContextMenu.tsx"}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Copy path to folder"})]}),i&&[(0,n.jsx)(eP.wv,{},"separator"),(0,n.jsxs)(eP.q7,{onClick:e=>{let{props:t}=e;return r([t.item])},children:[(0,n.jsx)(o.A,{size:12}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Delete"})]},"delete")]]})},tj=e=>{let{id:t=""}=e,{setSelectedFileCustomExpiry:s}=(0,es.$)(),{selectedBucket:l,setSelectedItemsToDelete:a,setSelectedItemToRename:r,setSelectedItemsToMove:i,downloadFile:c}=(0,es.$)(),{onCopyUrl:d}=eR(),m=l.public,{can:u}=(0,eW.Qp)(ea.aG.STORAGE_WRITE,"*"),x=async(e,t,n)=>{if(!t.isCorrupted)switch(e){case"copy":if(void 0!==n&&n<0)return s(t);return d(t.name,n);case"rename":return r(t);case"move":return i([t]);case"download":return await c(t)}};return(0,n.jsxs)(eP.W1,{id:t,animation:"fade","data-sentry-element":"Menu","data-sentry-component":"ItemContextMenu","data-sentry-source-file":"ItemContextMenu.tsx",children:[m?(0,n.jsxs)(eP.q7,{onClick:e=>{let{props:t}=e;return x("copy",t.item)},children:[(0,n.jsx)(eU.A,{size:14}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Get URL"})]}):(0,n.jsxs)(eP.Qw,{label:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(eU.A,{size:14}),(0,n.jsx)("span",{className:"text-xs",children:"Get URL"})]}),arrow:(0,n.jsx)(eG.A,{size:14}),children:[(0,n.jsx)(eP.q7,{onClick:e=>{let{props:t}=e;return x("copy",t.item,ey.Vm.WEEK)},children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Expire in 1 week"})}),(0,n.jsx)(eP.q7,{onClick:e=>{let{props:t}=e;return x("copy",t.item,ey.Vm.MONTH)},children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Expire in 1 month"})}),(0,n.jsx)(eP.q7,{onClick:e=>{let{props:t}=e;return x("copy",t.item,ey.Vm.YEAR)},children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Expire in 1 year"})}),(0,n.jsx)(eP.q7,{onClick:e=>{let{props:t}=e;return x("copy",t.item,-1)},children:(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Custom expiry"})})]}),u&&[(0,n.jsxs)(eP.q7,{onClick:e=>{let{props:t}=e;return x("rename",t.item)},children:[(0,n.jsx)(tt.A,{size:14,strokeWidth:1}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Rename"})]},"rename-file"),(0,n.jsxs)(eP.q7,{onClick:e=>{let{props:t}=e;return x("move",t.item)},children:[(0,n.jsx)(tn.A,{size:14,strokeWidth:1}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Move"})]},"move-file"),(0,n.jsxs)(eP.q7,{onClick:e=>{let{props:t}=e;return x("download",t.item)},children:[(0,n.jsx)(ts.A,{size:14,strokeWidth:1}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Download"})]},"download-file"),(0,n.jsx)(eP.wv,{},"file-separator"),(0,n.jsxs)(eP.q7,{onClick:e=>{let{props:t}=e;return a([t.item])},children:[(0,n.jsx)(o.A,{size:14,strokeWidth:1,stroke:"red"}),(0,n.jsx)("span",{className:"ml-2 text-xs",children:"Delete"})]},"delete-file")]]})},tg=e=>{let{columns:t=[],selectedItems:s=[],itemSearchString:l,onFilesUpload:a=eg(),onSelectAllItemsInColumn:r=eg(),onSelectColumnEmptySpace:i=eg(),onColumnLoadMore:o=eg()}=e,c=(0,u.useRef)(null),d=(0,es.$)(),m=t.length>0;return(0,u.useEffect)(()=>{if(c){let{scrollWidth:e,clientWidth:t}=c.current;e>t&&(c.current.scrollLeft+=e-t)}},[t]),(0,n.jsxs)("div",{ref:c,className:(0,eO.cn)("file-explorer flex flex-grow overflow-x-auto justify-between h-full w-full relative",d.view===ey.JB.LIST&&"flex-col"),"data-sentry-component":"FileExplorer","data-sentry-source-file":"FileExplorer.tsx",children:[(0,n.jsx)(eY,{id:ey.Jn.STORAGE_COLUMN,"data-sentry-element":"ColumnContextMenu","data-sentry-source-file":"FileExplorer.tsx"}),(0,n.jsx)(tj,{id:ey.Jn.STORAGE_ITEM,"data-sentry-element":"ItemContextMenu","data-sentry-source-file":"FileExplorer.tsx"}),(0,n.jsx)(ty,{id:ey.Jn.STORAGE_FOLDER,"data-sentry-element":"FolderContextMenu","data-sentry-source-file":"FileExplorer.tsx"}),m?d.view===ey.JB.COLUMNS?(0,n.jsx)("div",{className:"flex",children:t.map((e,t)=>(0,n.jsx)(tf,{index:t,column:e,selectedItems:s,itemSearchString:l,onFilesUpload:a,onSelectAllItemsInColumn:r,onSelectColumnEmptySpace:i,onColumnLoadMore:o},"column-".concat(t)))}):d.view===ey.JB.LIST?(0,n.jsx)(n.Fragment,{children:t.length>0&&(0,n.jsx)(tf,{fullWidth:!0,index:t.length-1,column:t[t.length-1],selectedItems:s,itemSearchString:l,onFilesUpload:a,onSelectAllItemsInColumn:r,onSelectColumnEmptySpace:i,onColumnLoadMore:o})}):(0,n.jsxs)("div",{children:["Unknown view: ",d.view]}):(0,n.jsx)(tf,{column:{id:"",name:"",items:[],status:ey.U1.LOADING}})]})};var tv=s(74415),tb=s(23019),tk=s(81672),tw=s(19616),tC=s(37700),tN=s(23892),tE=s(31092),tS=s(68152),tA=s(91958),t_=s(88301),tM=s(23729);let tz=[{key:ey.JB.COLUMNS,name:"As columns"},{key:ey.JB.LIST,name:"As list"}],tI=[{key:ey.NA.NAME,name:"Name"},{key:ey.NA.CREATED_AT,name:"Time created"},{key:ey.NA.UPDATED_AT,name:"Time modified"},{key:ey.NA.LAST_ACCESSED_AT,name:"Time last accessed"}],tL=[{key:ey.ou.ASC,name:"Ascending"},{key:ey.ou.DESC,name:"Descending"}],tF=e=>{let{loading:t,isSearching:s,breadcrumbs:l,togglePathEdit:a}=e;return(0,n.jsx)("div",{className:(0,eO.cn)("group",!t&&"cursor-pointer"),onClick:()=>t.isLoading?{}:a(),"data-sentry-component":"HeaderPathEdit","data-sentry-source-file":"FileExplorerHeader.tsx",children:t.isLoading?(0,n.jsxs)("div",{className:"ml-2 flex items-center gap-x-3",children:[(0,n.jsx)(e6.A,{size:14,strokeWidth:2,className:"animate-spin"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:t.message})]}):(0,n.jsxs)("div",{className:"flex cursor-pointer items-center gap-x-3",children:[l.length>1&&(0,n.jsx)("p",{className:"ml-2 text-sm truncate",children:l[l.length-1]||""}),!s&&(0,n.jsx)(J.$,{type:"text",icon:(0,n.jsx)(tv.A,{}),className:"transition opacity-0 hover:opacity-100",children:"Navigate"})]})})},tD=e=>{let{loading:t,isSearching:s,breadcrumbs:l,selectBreadcrumb:a}=e,r=l.map((e,t)=>({name:e,index:t})),i=r.length<=5?r:r.slice(0,2).concat([{name:"...",index:-1}]).concat(r.slice(r.length-2,r.length));return t.isLoading?(0,n.jsxs)("div",{className:"ml-2 flex items-center","data-sentry-component":"HeaderBreadcrumbs","data-sentry-source-file":"FileExplorerHeader.tsx",children:[(0,n.jsx)(e6.A,{size:16,strokeWidth:2,className:"animate-spin","data-sentry-element":"Loader","data-sentry-source-file":"FileExplorerHeader.tsx"}),(0,n.jsx)("p",{className:"ml-3 text-sm",children:t.message})]}):(0,n.jsx)("div",{className:"ml-3 flex items-center ".concat(s&&"max-w-[140px] overflow-x-auto"),"data-sentry-component":"HeaderBreadcrumbs","data-sentry-source-file":"FileExplorerHeader.tsx",children:i.map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center",children:[0!==t&&(0,n.jsx)(eG.A,{size:10,strokeWidth:2,className:"mx-3"}),(0,n.jsx)("p",{className:"truncate text-sm ".concat("..."!==e.name?"cursor-pointer":""),style:{maxWidth:"6rem"},onClick:()=>"..."!==e.name?a(e.index):{},children:e.name},e.name)]},e.name))})},tR=e=>{let{itemSearchString:t="",setItemSearchString:s=eg(),onFilesUpload:l=eg()}=e,a=(0,es.$)(),r=(0,tA.hx)(),[i,o]=(0,u.useState)(""),[c,d]=(0,u.useState)({isLoading:!1,message:""}),[m,x]=(0,u.useState)(!1),[h,p]=(0,u.useState)(!1),f=(0,u.useRef)(null),y=(0,u.useRef)(null),{columns:j,sortBy:g,setSortBy:v,sortByOrder:b,setSortByOrder:k,popColumn:w,popColumnAtIndex:C,popOpenedFolders:N,popOpenedFoldersAtIndex:E,fetchFoldersByPath:S,refetchAllOpenedFolders:A,addNewFolderPlaceholder:_,clearOpenedFolders:M,setSelectedFilePreview:z,selectedBucket:I}=(0,es.$)(),L=j.map(e=>e.name),F=j.length<=1,{can:D}=(0,eW.Qp)(ea.aG.STORAGE_WRITE,"*");(0,u.useEffect)(()=>{e3()(y.current,L)||(x(!1),y.current=L)},[L]);let R=async e=>{if(0===e.length)C(0),M(),z(void 0);else{let t=e.join("/");d({isLoading:!0,message:"Navigating to ".concat(t,"...")}),await S({paths:e}),d({isLoading:!1,message:""})}},T=()=>{a.setIsSearching(!1),s("")},B=async()=>{p(!0),await A(),p(!1)};return(0,n.jsxs)("div",{className:(0,eO.cn)("flex h-[40px] pl-2","items-center justify-between","rounded-t-md border-b border-overlay bg-surface-100"),"data-sentry-component":"FileExplorerHeader","data-sentry-source-file":"FileExplorerHeader.tsx",children:[(0,n.jsxs)("div",{className:"flex items-center ".concat(m?"w-1/2":""),children:[L.length>1&&(0,n.jsx)(J.$,{icon:(0,n.jsx)(tb.A,{size:16,strokeWidth:2}),size:"tiny",type:"text",className:"opacity-100 px-1",disabled:F,onClick:()=>{x(!1),w(),N(),z(void 0)}}),m?(0,n.jsx)("form",{className:"ml-2 flex-grow",children:(0,n.jsx)(eE.A,{autoFocus:!0,type:"text",size:"small",value:i,onChange:e=>{o(e.target.value)},placeholder:"e.g Parent Folder/Child Folder",actions:[(0,n.jsx)(J.$,{type:"default",htmlType:"button",onClick:()=>{x(!1)},children:"Cancel"},"cancelPath"),(0,n.jsx)(J.$,{type:"primary",htmlType:"submit",onClick:e=>{e&&(e.preventDefault(),e.stopPropagation()),x(!1),R(ed()(i.split("/")))},children:"Go to folder"},"setPath")]},"pathSet")}):a.view===ey.JB.COLUMNS?(0,n.jsx)(tF,{loading:c,isSearching:a.isSearching,breadcrumbs:L,togglePathEdit:()=>{x(!0),o(L.slice(1).join("/")),a.isSearching&&T()}}):L.length>1?(0,n.jsx)(tD,{loading:c,isSearching:a.isSearching,breadcrumbs:L,selectBreadcrumb:e=>{C(e),E(e-1)}}):null]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-1 px-2",children:[(0,n.jsx)(J.$,{size:"tiny",icon:(0,n.jsx)(tk.A,{}),type:"text",loading:h,onClick:B,"data-sentry-element":"Button","data-sentry-source-file":"FileExplorerHeader.tsx",children:"Reload"}),(0,n.jsxs)(to.rI,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"FileExplorerHeader.tsx",children:[(0,n.jsx)(to.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"FileExplorerHeader.tsx",children:(0,n.jsx)(J.$,{type:"text",icon:"LIST"===a.view?(0,n.jsx)(tw.A,{size:16,strokeWidth:2}):(0,n.jsx)(tC.A,{size:16,strokeWidth:2}),"data-sentry-element":"Button","data-sentry-source-file":"FileExplorerHeader.tsx",children:"View"})}),(0,n.jsxs)(to.SQ,{align:"end",className:"w-40 min-w-0","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"FileExplorerHeader.tsx",children:[tz.map(e=>(0,n.jsx)(to._2,{onClick:()=>a.setView(e.key),children:(0,n.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,n.jsx)("p",{children:e.name}),a.view===e.key&&(0,n.jsx)(tN.A,{size:16,className:"text-brand",strokeWidth:2})]})},e.key)),(0,n.jsx)(to.mB,{"data-sentry-element":"DropdownMenuSeparator","data-sentry-source-file":"FileExplorerHeader.tsx"}),(0,n.jsxs)(to.lv,{"data-sentry-element":"DropdownMenuSub","data-sentry-source-file":"FileExplorerHeader.tsx",children:[(0,n.jsx)(to.nV,{"data-sentry-element":"DropdownMenuSubTrigger","data-sentry-source-file":"FileExplorerHeader.tsx",children:"Sort by"}),(0,n.jsx)(to.M5,{className:"w-44","data-sentry-element":"DropdownMenuSubContent","data-sentry-source-file":"FileExplorerHeader.tsx",children:tI.map(e=>(0,n.jsx)(to._2,{onClick:()=>v(e.key),children:(0,n.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,n.jsx)("p",{children:e.name}),g===e.key&&(0,n.jsx)(tN.A,{size:16,className:"text-brand",strokeWidth:2})]})},e.key))})]}),(0,n.jsxs)(to.lv,{"data-sentry-element":"DropdownMenuSub","data-sentry-source-file":"FileExplorerHeader.tsx",children:[(0,n.jsx)(to.nV,{"data-sentry-element":"DropdownMenuSubTrigger","data-sentry-source-file":"FileExplorerHeader.tsx",children:"Sort order"}),(0,n.jsx)(to.M5,{"data-sentry-element":"DropdownMenuSubContent","data-sentry-source-file":"FileExplorerHeader.tsx",children:tL.map(e=>(0,n.jsx)(to._2,{onClick:()=>k(e.key),children:(0,n.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,n.jsx)("p",{children:e.name}),b===e.key&&(0,n.jsx)(tN.A,{size:16,className:"text-brand",strokeWidth:2})]})},e.key))})]})]})]})]}),(0,n.jsx)("div",{className:"h-6 border-r border-control"}),(0,n.jsxs)("div",{className:"flex items-center space-x-1 px-2",children:[(0,n.jsx)("div",{className:"hidden",children:(0,n.jsx)("input",{ref:f,type:"file",multiple:!0,onChange:l})}),(0,n.jsx)(tM.G,{icon:(0,n.jsx)(eX.A,{size:16,strokeWidth:2}),type:"text",disabled:!D||0===L.length,onClick:()=>{f.current&&f.current.click()},tooltip:{content:{side:"bottom",text:D?void 0:"You need additional permissions to upload files"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"FileExplorerHeader.tsx",children:"Upload files"}),(0,n.jsx)(tM.G,{icon:(0,n.jsx)(eq.A,{size:16,strokeWidth:2}),type:"text",disabled:!D||0===L.length,onClick:()=>_(-1),tooltip:{content:{side:"bottom",text:D?void 0:"You need additional permissions to create folders"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"FileExplorerHeader.tsx",children:"Create folder"})]}),(0,n.jsx)("div",{className:"h-6 border-r border-control"}),(0,n.jsx)("div",{className:"flex items-center px-2",children:a.isSearching?(0,n.jsx)(eE.A,{size:"tiny",autoFocus:!0,className:"w-52",icon:(0,n.jsx)(tE.A,{size:14,strokeWidth:2}),actions:[(0,n.jsx)(tS.A,{className:"mx-2 cursor-pointer text-foreground",size:14,strokeWidth:2,onClick:T},"close")],placeholder:"Search for a file or folder",type:"text",value:t,onChange:e=>s(e.target.value)}):(0,n.jsx)(J.$,{icon:(0,n.jsx)(tE.A,{size:16,strokeWidth:2}),size:"tiny",type:"text",className:"px-1",onClick:()=>{x(!1),a.setIsSearching(!0)}})}),r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"h-6 border-r border-control"}),(0,n.jsx)("div",{className:"mx-2",children:(0,n.jsx)(t_.m,{section:["storage",I.name],source:"storage"})})]})]})]})},tT=()=>{let{can:e}=(0,eW.Qp)(ea.aG.STORAGE_WRITE,"*"),{selectedItems:t,downloadFile:s,downloadSelectedFiles:l,clearSelectedItems:a,setSelectedItemsToDelete:r,setSelectedItemsToMove:i}=(0,es.$)();return(0,n.jsxs)("div",{className:"z-10 flex h-[40px] items-center rounded-t-md bg-brand-400 px-2 py-1 shadow [[data-theme*=dark]_&]:bg-brand-500","data-sentry-component":"FileExplorerHeaderSelection","data-sentry-source-file":"FileExplorerHeaderSelection.tsx",children:[(0,n.jsx)(J.$,{icon:(0,n.jsx)(tS.A,{size:16,strokeWidth:2}),type:"text",onClick:()=>a(),"data-sentry-element":"Button","data-sentry-source-file":"FileExplorerHeaderSelection.tsx"}),(0,n.jsxs)("div",{className:"ml-1 flex items-center space-x-3",children:[(0,n.jsxs)("p",{className:"mb-0 text-sm text-foreground",children:[(0,n.jsx)("span",{style:{fontVariantNumeric:"tabular-nums"},children:t.length})," items selected"]}),(0,n.jsx)(J.$,{icon:(0,n.jsx)(ts.A,{size:16,strokeWidth:2}),type:"primary",onClick:async()=>{1===t.length?await s(t[0]):await l(t)},"data-sentry-element":"Button","data-sentry-source-file":"FileExplorerHeaderSelection.tsx",children:"Download"}),(0,n.jsx)("div",{className:"border-r border-green-900 py-3 opacity-50"}),(0,n.jsx)(tM.G,{icon:(0,n.jsx)(o.A,{size:16,strokeWidth:2}),type:"primary",disabled:!e,onClick:()=>r(t),tooltip:{content:{side:"bottom",text:e?void 0:"You need additional permissions to delete files"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"FileExplorerHeaderSelection.tsx",children:"Delete"}),(0,n.jsx)(tM.G,{icon:(0,n.jsx)(tn.A,{size:16,strokeWidth:2}),type:"primary",disabled:!e,onClick:()=>i(t),tooltip:{content:{side:"bottom",text:e?void 0:"You need additional permissions to move files"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"FileExplorerHeaderSelection.tsx",children:"Move"})]})]})},tB=e=>{var t;let{bucketName:s="",visible:l=!1,selectedItemsToMove:a=[],onSelectCancel:r=eg(),onSelectMove:i=eg()}=e,[o,c]=(0,u.useState)(!1),[d,m]=(0,u.useState)("");(0,u.useEffect)(()=>{c(!1),m("")},[l]);let x=a.length>1,h=x?"Moving ".concat(a.length," items within ").concat(s):1===a.length?"Moving ".concat(null==(t=a[0])?void 0:t.name," within ").concat(s):"",p=e=>{e&&e.preventDefault(),c(!0),i("/"===d[0]?d.slice(1):d)};return(0,n.jsx)(eC.A,{visible:l,header:h,description:"Enter the path to where you'd like to move the file".concat(x?"s":""," to."),size:"medium",onCancel:r,customFooter:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(J.$,{type:"default",onClick:r,children:"Cancel"}),(0,n.jsx)(J.$,{type:"primary",loading:o,onClick:p,children:o?"Moving files":"Move files"})]}),"data-sentry-element":"Modal","data-sentry-component":"MoveItemsModal","data-sentry-source-file":"MoveItemsModal.tsx",children:(0,n.jsx)(eC.A.Content,{"data-sentry-element":"Modal.Content","data-sentry-source-file":"MoveItemsModal.tsx",children:(0,n.jsxs)("form",{children:[(0,n.jsx)("div",{className:"relative flex items-center",children:(0,n.jsx)(eE.A,{autoFocus:!0,label:"Path to new directory in ".concat(s),type:"text",className:"w-full",placeholder:"e.g folder1/subfolder2",value:d,descriptionText:"Leave blank to move items to the root of the bucket",onChange:e=>m(e.target.value),"data-sentry-element":"Input","data-sentry-source-file":"MoveItemsModal.tsx"})}),(0,n.jsx)("button",{className:"hidden",type:"submit",onClick:p})]})})})},tO=e=>{var t,s,l;let{item:a}=e,{projectRef:r,selectedBucket:i}=(0,es.$)(),{data:o,isLoading:c}=eD({file:a,projectRef:r,bucket:i}),d=+(null!=(l=null==(t=a.metadata)?void 0:t.size)?l:0xa00001),m=null==(s=a.metadata)?void 0:s.mimetype,u=!!m&&!!d&&d>0xa00000;return c?(0,n.jsx)("div",{className:"flex h-full w-full items-center justify-center text-foreground-lighter",children:(0,n.jsx)(e6.A,{size:14,strokeWidth:2,className:"animate-spin"})}):u?(0,n.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-center",children:[(0,n.jsx)(tr.A,{src:"".concat(q.o2,"/img/file-filled.svg"),preProcessor:e=>e.replace(/svg/,'svg class="mx-auto w-32 h-32 text-color-inherit opacity-75"')}),(0,n.jsx)("p",{className:"mt-2 w-2/5 text-center text-sm",children:"File size is too large to preview in the explorer"})]}):m&&o?m.includes("image")?(0,n.jsx)("div",{className:"flex h-full w-full items-center justify-center bg-contain bg-center bg-no-repeat",style:{backgroundImage:"url('".concat(o,"')")}}):m.includes("audio")?(0,n.jsx)("div",{className:"flex h-full w-full items-center justify-center px-10",children:(0,n.jsxs)("audio",{controls:!0,style:{width:"inherit"},children:[(0,n.jsx)("source",{src:o,type:"audio/mpeg"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Your browser does not support the audio element."})]},o)}):m.includes("video")?(0,n.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,n.jsxs)("video",{controls:!0,style:{maxHeight:"100%"},children:[(0,n.jsx)("source",{src:o,type:"video/mp4"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Your browser does not support the video tag."})]},o)}):(0,n.jsx)(tr.A,{src:"".concat(q.o2,"/img/file-filled.svg"),preProcessor:e=>e.replace(/svg/,'svg class="mx-auto w-32 h-32 text-color-inherit opacity-75"'),"data-sentry-element":"SVG","data-sentry-component":"PreviewFile","data-sentry-source-file":"PreviewPane.tsx"}):(0,n.jsx)(tr.A,{src:"".concat(q.o2,"/img/file-filled.svg"),preProcessor:e=>e.replace(/svg/,'svg class="mx-auto w-32 h-32 text-color-inherit opacity-75"')})},tP=()=>{let{selectedBucket:e,selectedFilePreview:t,setSelectedItemsToDelete:s,setSelectedFilePreview:l,setSelectedFileCustomExpiry:r,downloadFile:i}=(0,es.$)(),{onCopyUrl:c}=eR(),{can:d}=(0,eW.Qp)(ea.aG.STORAGE_WRITE,"*");if(!t)return null;let m=!eu()(t),u=t.metadata?(0,e2.z3)(t.metadata.size):null,x=t.metadata?t.metadata.mimetype:void 0,h=t.created_at?new Date(t.created_at).toLocaleString():"Unknown",p=t.updated_at?new Date(t.updated_at).toLocaleString():"Unknown";return(0,n.jsx)(eQ.e,{show:m,enter:"transition ease-out duration-150",enterFrom:"transform opacity-0",enterTo:"transform opacity-100",leave:"transition ease-in duration-100",leaveFrom:"transform opacity-100",leaveTo:"transform opacity-0","data-sentry-element":"Transition","data-sentry-component":"PreviewPane","data-sentry-source-file":"PreviewPane.tsx",children:(0,n.jsxs)("div",{className:"h-full border-l border-overlay bg-surface-100 p-4",style:{width:450},children:[(0,n.jsx)("div",{className:"flex w-full justify-end text-foreground-lighter transition-colors hover:text-foreground",children:(0,n.jsx)(tS.A,{className:"cursor-pointer",size:14,strokeWidth:2,onClick:()=>l(void 0),"data-sentry-element":"X","data-sentry-source-file":"PreviewPane.tsx"})}),(0,n.jsx)("div",{className:"my-4 border border-overlay",children:(0,n.jsx)("div",{className:"flex h-56 w-full items-center 2xl:h-72",children:(0,n.jsx)(tO,{item:t,"data-sentry-element":"PreviewFile","data-sentry-source-file":"PreviewPane.tsx"})})}),(0,n.jsxs)("div",{className:"w-full space-y-6",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("h5",{className:"break-words text-base text-foreground",children:t.name}),t.isCorrupted&&(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(tl.A,{size:14,strokeWidth:2,className:"text-foreground-light"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"File is corrupted, please delete and reupload this file again"})]}),x&&(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:[x,u&&(0,n.jsxs)("span",{children:[" - ",u]})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"mb-1 text-xs text-foreground-lighter",children:"Added on"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:h})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"mb-1 text-xs text-foreground-lighter",children:"Last modified"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:p})]})]}),(0,n.jsxs)("div",{className:"flex space-x-2 border-b border-overlay pb-4",children:[(0,n.jsx)(J.$,{type:"default",icon:(0,n.jsx)(ts.A,{}),disabled:t.isCorrupted,onClick:()=>i(t),"data-sentry-element":"Button","data-sentry-source-file":"PreviewPane.tsx",children:"Download"}),e.public?(0,n.jsx)(J.$,{type:"outline",icon:(0,n.jsx)(eU.A,{}),onClick:()=>c(t.name),disabled:t.isCorrupted,children:"Get URL"}):(0,n.jsxs)(to.rI,{children:[(0,n.jsx)(to.ty,{asChild:!0,children:(0,n.jsx)(J.$,{type:"outline",icon:(0,n.jsx)(eU.A,{}),iconRight:(0,n.jsx)(a.A,{}),disabled:t.isCorrupted,children:"Get URL"})}),(0,n.jsxs)(to.SQ,{side:"bottom",align:"center",children:[(0,n.jsx)(to._2,{onClick:()=>c(t.name,ey.Vm.WEEK),children:"Expire in 1 week"},"expires-one-week"),(0,n.jsx)(to._2,{onClick:()=>c(t.name,ey.Vm.MONTH),children:"Expire in 1 month"},"expires-one-month"),(0,n.jsx)(to._2,{onClick:()=>c(t.name,ey.Vm.YEAR),children:"Expire in 1 year"},"expires-one-year"),(0,n.jsx)(to._2,{onClick:()=>r(t),children:"Custom expiry"},"custom-expiry")]})]})]}),(0,n.jsx)(tM.G,{type:"outline",disabled:!d,size:"tiny",icon:(0,n.jsx)(o.A,{strokeWidth:2}),onClick:()=>s([t]),tooltip:{content:{side:"bottom",text:d?void 0:"You need additional permissions to delete this file"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"PreviewPane.tsx",children:"Delete file"})]})]})})},tW=()=>{let{ref:e}=(0,p.g)(),t=(0,u.useRef)(null),{projectRef:s,view:l,columns:a,selectedItems:r,selectedItemsToDelete:i,openedFolders:o,selectedItemsToMove:c,selectedBucket:d,openBucket:m,fetchFolderContents:x,fetchMoreFolderContents:h,fetchFoldersByPath:f,deleteFolder:j,uploadFiles:g,deleteFiles:v,moveFiles:b,popColumnAtIndex:k,popOpenedFoldersAtIndex:w,setSelectedItems:C,clearSelectedItems:N,setSelectedFilePreview:E,setSelectedItemsToMove:S,setSelectedItemsToDelete:A}=(0,es.$)();(0,O.Ij)({projectRef:e},{enabled:q.pe});let{data:_}=el(),[M,z]=(0,u.useState)(""),I=(0,ep.d7)(M,500),L=(0,ef.A)(f),F=(0,ef.A)(x),D=(0,ef.A)(l),R=(0,ef.A)(o);(0,u.useEffect)(()=>{let e=async e=>{if(D.current===ey.JB.LIST){let t=R.current.length-1,s=R.current[t],n=s?s.id:e.id,l=s?s.name:e.name,a=s?t:-1;await F.current({bucketId:e.id,folderId:n,folderName:l,index:a,searchString:I})}else if(D.current===ey.JB.COLUMNS)if(R.current.length>0){let e=R.current.map(e=>e.name);L.current({paths:e,searchString:I,showLoading:!0})}else await F.current({bucketId:e.id,folderId:e.id,folderName:e.name,index:-1,searchString:I})};_&&s&&e(_)},[_,s,I,D,R,F,L]);let T=(0,ef.A)(m);(0,u.useEffect)(()=>{_&&s&&T.current(_)},[_,s,T]);let B=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;e.persist();let s=e.target.files||e.dataTransfer.items,n=!eu()(y()(e,["dataTransfer","items"],[]));await g({files:s,columnIndex:t,isDrop:n}),e.target.value=""},P=async e=>{await b(e)},W=async()=>{if(1===i.length){let[e]=i;if(e)switch(e.type){case ey.Vl.FOLDER:await j(e);break;case ey.Vl.FILE:await v({files:[e]})}}else await v({files:i})};return(0,n.jsxs)("div",{ref:t,className:"bg-studio border rounded-md border-overlay flex h-full w-full flex-col","data-sentry-component":"StorageExplorer","data-sentry-source-file":"StorageExplorer.tsx",children:[0===r.length?(0,n.jsx)(tR,{itemSearchString:M,setItemSearchString:z,onFilesUpload:B}):(0,n.jsx)(tT,{}),(0,n.jsxs)("div",{className:"flex flex-1 min-h-0",children:[(0,n.jsx)(tg,{columns:a,selectedItems:r,itemSearchString:M,onFilesUpload:B,onSelectAllItemsInColumn:e=>{let t=a[e].items.filter(e=>e.type===ey.Vl.FILE).map(t=>({...t,columnIndex:e})),s=ed()(t.map(e=>e.id));r.filter(e=>e.id&&s.includes(e.id)).length===t.length?C(r.filter(e=>e.id&&!s.includes(e.id))):C(eh()(r.concat(t),"id"))},onSelectColumnEmptySpace:e=>{k(e),w(e-1),E(void 0),N()},onColumnLoadMore:(e,t)=>h({index:e,column:t,searchString:M}),"data-sentry-element":"FileExplorer","data-sentry-source-file":"StorageExplorer.tsx"}),(0,n.jsx)(tP,{"data-sentry-element":"PreviewPane","data-sentry-source-file":"StorageExplorer.tsx"})]}),(0,n.jsx)(eb,{visible:i.length>0,selectedItemsToDelete:i,onSelectCancel:()=>A([]),onSelectDelete:W,"data-sentry-element":"ConfirmDeleteModal","data-sentry-source-file":"StorageExplorer.tsx"}),(0,n.jsx)(tB,{bucketName:d.name,visible:c.length>0,selectedItemsToMove:c,onSelectCancel:()=>S([]),onSelectMove:P,"data-sentry-element":"MoveItemsModal","data-sentry-source-file":"StorageExplorer.tsx"}),(0,n.jsx)(eB,{"data-sentry-element":"CustomExpiryModal","data-sentry-source-file":"StorageExplorer.tsx"})]})};tW.displayName="StorageExplorer";var tq=s(10508),tU=s(8750),tV=s(27843),tG=s(65802),tH=s(48510),t$=s(21650);let tJ=()=>{var e;let t=(0,m.useRouter)(),{bucketId:s,ref:c}=(0,p.g)(),{data:f,error:y,isSuccess:j,isError:g}=el(),[v,b]=(0,x.ZA)("edit",x.cr.withDefault(!1).withOptions({history:"push",clearOnDefault:!0})),[k,w]=(0,x.ZA)("empty",x.cr.withDefault(!1).withOptions({history:"push",clearOnDefault:!0})),[C,N]=(0,x.ZA)("delete",x.cr.withDefault(!1).withOptions({history:"push",clearOnDefault:!0})),{getPolicyCount:E}=(0,tG.L)(f?[f]:[]),S=f?E(f.id):0;return((0,u.useEffect)(()=>{j&&!f&&(h.oR.info('Bucket "'.concat(s,'" does not exist in your project')),t.push("/project/".concat(c,"/storage/files")))},[j]),g)?(0,n.jsx)(eo,{error:y}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tU.M,{size:"full",isCompact:!0,icon:(0,n.jsx)("div",{className:"shrink-0 w-10 h-10 relative bg-surface-100 border rounded-md flex items-center justify-center",children:(0,n.jsx)(tH.fW,{size:20,className:"text-foreground-light"})}),className:"[&>div:first-child]:!border-b-0",title:(0,n.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[(0,n.jsx)("span",{className:"truncate",children:s}),(null==f?void 0:f.public)&&(0,n.jsx)(t$.E,{variant:"warning",size:"small",className:"flex-shrink-0",children:"Public"})]}),breadcrumbs:[{label:"Files",href:"/project/".concat(c,"/storage/files")},{label:"Buckets"}],primaryActions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J.$,{asChild:!0,type:"default",icon:(0,n.jsx)(l.A,{size:14}),iconRight:S>0?(0,n.jsx)("span",{className:"w-4 h-4 bg-surface-200 text-foreground-light text-xs rounded-full flex items-center justify-center font-medium",children:S}):void 0,children:(0,n.jsx)(d(),{href:"/project/".concat(c,"/storage/files/policies?search=").concat(encodeURIComponent(null!=(e=null==f?void 0:f.name)?e:"")),children:"Policies"})}),(0,n.jsxs)(to.rI,{children:[(0,n.jsx)(to.ty,{asChild:!0,children:(0,n.jsx)(J.$,{type:"default",iconRight:(0,n.jsx)(a.A,{size:14}),children:"Edit bucket"})}),(0,n.jsxs)(to.SQ,{align:"end",className:"w-40",children:[(0,n.jsxs)(to._2,{className:"flex items-center space-x-2",onClick:()=>b(!0),children:[(0,n.jsx)(r.A,{size:12}),(0,n.jsx)("p",{children:"Bucket settings"})]}),(0,n.jsx)(to.mB,{}),(0,n.jsxs)(to._2,{className:"flex items-center space-x-2",onClick:()=>w(!0),children:[(0,n.jsx)(i.A,{size:12}),(0,n.jsx)("p",{children:"Empty bucket"})]}),(0,n.jsxs)(to._2,{className:"flex items-center space-x-2",onClick:()=>N(!0),children:[(0,n.jsx)(o.A,{size:12}),(0,n.jsx)("p",{children:"Delete bucket"})]})]})]})]}),"data-sentry-element":"PageLayout","data-sentry-source-file":"[bucketId].tsx",children:(0,n.jsx)("div",{className:"flex-1 min-h-0 px-6 pb-6",children:(0,n.jsx)(tW,{"data-sentry-element":"StorageExplorer","data-sentry-source-file":"[bucketId].tsx"})})}),f&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X,{visible:v,bucket:f,onClose:()=>b(!1)}),(0,n.jsx)(en,{visible:k,bucket:f,onClose:()=>w(!1)}),(0,n.jsx)(I,{visible:C,bucket:f,onClose:()=>N(!1)})]})]})};tJ.getLayout=e=>(0,n.jsx)(tq.A,{children:(0,n.jsx)(tV.A,{title:"Buckets",children:e})});let tY=tJ},98357:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var n=s(80263),l=s(53239),a=s(23157),r=s(7981),i=s(7760);let o=(0,l.createContext)({parentCallback:e=>{},parentSize:""});function c(e){let{className:t,id:s="",name:l="",label:a,afterLabel:c,beforeLabel:d,description:m,checked:u,value:x,onChange:h,onBlur:p,size:f="medium",disabled:y=!1,...j}=e,{formContextOnChange:g,values:v,handleBlur:b}=(0,i.x)(),k=(0,r.A)("checkbox");return(0,n.jsx)(o.Consumer,{"data-sentry-element":"CheckboxContext.Consumer","data-sentry-component":"Checkbox","data-sentry-source-file":"Checkbox.tsx",children:e=>{let{parentCallback:r,parentSize:i}=e,o=s||l||(a?a.toLowerCase().replace(/^[^A-Z0-9]+/gi,"").replace(/ /g,"-"):void 0);f=i||f;let w=l||o,C=null!=u?u:void 0,N=[k.container];return t&&N.push(t),v&&void 0===u&&(C=v[s||l]),(0,n.jsxs)("div",{className:N.join(" "),children:[(0,n.jsx)("input",{id:o,name:w,type:"checkbox",className:[k.base,k.size[f]].join(" "),onChange:function(e){r&&r(e),h&&h(e),g&&g(e)},onBlur:function(e){b&&setTimeout(()=>{b(e)},100),p&&p(e)},checked:C,value:x||o,disabled:y,...j}),(0,n.jsxs)("label",{className:[k.label.base,k.label[f]].join(" "),htmlFor:o,children:[(0,n.jsxs)("span",{children:[d&&(0,n.jsx)("span",{className:[k.label_before.base,k.label_before[f]].join(" "),children:d}),a,c&&(0,n.jsx)("span",{className:[k.label_after.base,k.label_after[f]].join(" "),children:c})]}),m&&(0,n.jsx)("p",{className:[k.description.base,k.description[f]].join(" "),children:m})]})]})}})}c.Group=function(e){let{id:t,layout:s="vertical",error:l,descriptionText:i,label:d,afterLabel:m,beforeLabel:u,labelOptional:x,children:h,className:p,options:f,onChange:y,size:j="medium"}=e,g=(0,r.A)("checkbox");return(0,n.jsx)(a.H,{label:d,afterLabel:m,beforeLabel:u,labelOptional:x,layout:s,id:t,error:l,descriptionText:i,className:p,size:j,"data-sentry-element":"FormLayout","data-sentry-component":"Group","data-sentry-source-file":"Checkbox.tsx",children:(0,n.jsx)(o.Provider,{value:{parentCallback:e=>{y&&y(e)},parentSize:j},"data-sentry-element":"CheckboxContext.Provider","data-sentry-source-file":"Checkbox.tsx",children:(0,n.jsx)("div",{className:g.group,children:f?f.map(e=>(0,n.jsx)(c,{id:e.id,value:e.value,label:e.label,beforeLabel:e.beforeLabel,afterLabel:e.afterLabel,checked:e.checked,name:e.name,description:e.description,defaultChecked:e.defaultChecked},e.id)):h})})})};let d=c}},e=>{e.O(0,[60858,15599,16110,27764,36538,44033,2838,21436,57459,9711,62941,73659,76984,72391,35035,40545,596,10508,48340,75187,29471,8750,27843,90636,46593,38792],()=>e(e.s=62195)),_N_E=e.O()}]);