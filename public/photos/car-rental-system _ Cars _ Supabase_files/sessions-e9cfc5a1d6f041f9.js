try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="adf74d5f-4d3c-44ea-9a0c-131f6abcc439",e._sentryDebugIdIdentifier="sentry-dbid-adf74d5f-4d3c-44ea-9a0c-131f6abcc439")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[70902],{5879:(e,t,s)=>{"use strict";s.d(t,{j:()=>i});var n=s(80263),r=s(53239),a=s(80100);let i=(0,r.forwardRef)((e,t)=>{let{preTab:s,postTab:r,children:i,className:o,...l}=e;return(0,n.jsxs)("div",{ref:t,...l,className:(0,a.cn)("flex -space-x-px",o),children:[s&&(0,n.jsx)("div",{className:"border border-strong bg-surface-300 rounded-l-md px-3 flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-foreground-lighter text-xs font-mono",children:s})}),(0,n.jsx)("div",{className:(0,a.cn)("flex-1",{"[&_input]:rounded-l-none [&_select]:rounded-l-none [&_textarea]:rounded-l-none":!!s,"[&_input]:rounded-r-none [&_select]:rounded-r-none [&_textarea]:rounded-r-none":!!r}),children:i}),r&&(0,n.jsx)("div",{className:"border border-strong bg-surface-300 rounded-r-md px-3 flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-foreground-lighter text-xs font-mono",children:r})})]})})},37631:(e,t,s)=>{"use strict";s.d(t,{$E:()=>u,kV:()=>d,op:()=>c});var n=s(67850),r=s(51355),a=s(24523),i=s(85039),o=s(53239),l=s(31907);async function d(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let{data:n,error:r}=await (0,a.Jt)("/platform/auth/{ref}/config",{params:{path:{ref:s}},signal:t});return r&&(0,a.H4)(r),n}let c=function(e){let{projectRef:t}=e,{enabled:s=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.I)({queryKey:l.Z.authConfig(t),queryFn:e=>{let{signal:s}=e;return d({projectRef:t},s)},enabled:s&&i.pe&&void 0!==t,...r})},u=e=>{let{projectRef:t}=e,s=(0,r.jE)();return(0,o.useCallback)(()=>{t&&s.prefetchQuery({queryKey:l.Z.authConfig(t),queryFn:e=>{let{signal:s}=e;return d({projectRef:t},s)}})},[s,t])}},39624:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var n=s(80263),r=s(12123);let a=e=>{let{resourceText:t,isFullPage:s=!1}=e,a=()=>(0,n.jsx)("div",{className:"block w-full rounded border border-opacity-20 py-4 px-6 border-overlay bg-surface-200","data-sentry-component":"NoPermissionMessage","data-sentry-source-file":"NoPermission.tsx",children:(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(r.A,{size:20,"data-sentry-element":"AlertCircle","data-sentry-source-file":"NoPermission.tsx"})}),(0,n.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("p",{className:"text-sm",children:["You need additional permissions to ",t]}),(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Contact your organization owner or administrator for assistance."})})]})})]})});return s?(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,n.jsx)("div",{className:"w-[550px]",children:(0,n.jsx)(a,{})})}):(0,n.jsx)(a,{})}},56481:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/auth/sessions",function(){return s(58261)}])},58261:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>P});var n=s(80263),r=s(72112),a=s(32981),i=s(53239),o=s(87494),l=s(73969),d=s(10663),c=s(22891),u=s(37873),m=s(44168),S=s(39624),h=s(8344),f=s(37631),x=s(97492),y=s(80090),E=s(84512),_=s(85039),j=s(65887),g=s(78039),p=s(72608),N=s(5879),T=s(27371),b=s(99779),I=s(16488),v=s(44053);function R(e){let{value:t}=e;return 0===t?"never":1===t?"hour":"hours"}let A=d.Ik({REFRESH_TOKEN_ROTATION_ENABLED:d.zM(),SECURITY_REFRESH_TOKEN_REUSE_INTERVAL:d.au.number().min(0,"Must be a value more than 0")}),F=d.Ik({SESSIONS_TIMEBOX:d.au.number().min(0,"Must be a positive number"),SESSIONS_INACTIVITY_TIMEOUT:d.au.number().multipleOf(.1).min(0,"Must be a positive number"),SESSIONS_SINGLE_PER_USER:d.zM()}),O=()=>{var e;let{ref:t}=(0,c.g)(),{data:s,error:d,isError:O,isLoading:C}=(0,f.op)({projectRef:t}),{mutate:k}=(0,x.U)(),[w,M]=(0,i.useState)(!1),[U,P]=(0,i.useState)(!1),{can:L}=(0,y.Qp)(r.aG.READ,"custom_config_gotrue"),{can:B}=(0,y.Qp)(r.aG.UPDATE,"custom_config_gotrue"),{data:D}=(0,E.s)(),V=(null==D||null==(e=D.plan)?void 0:e.id)!=="free",K=_.pe&&!V,W=(0,o.mN)({resolver:(0,a.u)(A),defaultValues:{REFRESH_TOKEN_ROTATION_ENABLED:!1,SECURITY_REFRESH_TOKEN_REUSE_INTERVAL:0}}),H=(0,o.mN)({resolver:(0,a.u)(F),defaultValues:{SESSIONS_TIMEBOX:0,SESSIONS_INACTIVITY_TIMEOUT:0,SESSIONS_SINGLE_PER_USER:!1}});return((0,i.useEffect)(()=>{s&&(w||W.reset({REFRESH_TOKEN_ROTATION_ENABLED:s.REFRESH_TOKEN_ROTATION_ENABLED||!1,SECURITY_REFRESH_TOKEN_REUSE_INTERVAL:s.SECURITY_REFRESH_TOKEN_REUSE_INTERVAL}),U||H.reset({SESSIONS_TIMEBOX:s.SESSIONS_TIMEBOX||0,SESSIONS_INACTIVITY_TIMEOUT:s.SESSIONS_INACTIVITY_TIMEOUT||0,SESSIONS_SINGLE_PER_USER:s.SESSIONS_SINGLE_PER_USER||!1}))},[s,w,U]),O)?(0,n.jsx)(u.gu,{isFullWidth:!0,children:(0,n.jsx)(m.A,{error:d,subject:"Failed to retrieve auth configuration"})}):L?C?(0,n.jsx)(u.gu,{isFullWidth:!0,children:(0,n.jsx)(I.yV,{})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u.gu,{isFullWidth:!0,"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"SessionsAuthSettingsForm.tsx",children:[(0,n.jsx)(u.sZ,{className:"mb-4","data-sentry-element":"ScaffoldSectionTitle","data-sentry-source-file":"SessionsAuthSettingsForm.tsx",children:"Refresh Tokens"}),(0,n.jsx)(j.lV,{...W,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"SessionsAuthSettingsForm.tsx",children:(0,n.jsx)("form",{onSubmit:W.handleSubmit(e=>{let s={...e};M(!0),k({projectRef:t,config:s},{onError:e=>{l.oR.error("Failed to update refresh token settings: ".concat(null==e?void 0:e.message)),M(!1)},onSuccess:()=>{l.oR.success("Successfully updated refresh token settings"),M(!1)}})}),className:"space-y-4",children:(0,n.jsxs)(g.Zp,{"data-sentry-element":"Card","data-sentry-source-file":"SessionsAuthSettingsForm.tsx",children:[(0,n.jsx)(g.Wu,{className:"pt-6","data-sentry-element":"CardContent","data-sentry-source-file":"SessionsAuthSettingsForm.tsx",children:(0,n.jsx)(j.zB,{control:W.control,name:"REFRESH_TOKEN_ROTATION_ENABLED",render:e=>{let{field:t}=e;return(0,n.jsx)(v.M,{layout:"flex-row-reverse",label:"Detect and revoke potentially compromised refresh tokens",description:"Prevent replay attacks from potentially compromised refresh tokens.",children:(0,n.jsx)(j.MJ,{children:(0,n.jsx)(p.d,{checked:t.value,onCheckedChange:t.onChange,disabled:!B})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"SessionsAuthSettingsForm.tsx"})}),(0,n.jsx)(g.Wu,{"data-sentry-element":"CardContent","data-sentry-source-file":"SessionsAuthSettingsForm.tsx",children:(0,n.jsx)(j.zB,{control:W.control,name:"SECURITY_REFRESH_TOKEN_REUSE_INTERVAL",render:e=>{let{field:t}=e;return(0,n.jsx)(v.M,{layout:"flex-row-reverse",label:"Refresh token reuse interval",description:"Time interval where the same refresh token can be used multiple times to request for an access token. Recommendation: 10 seconds.",children:(0,n.jsx)(j.MJ,{children:(0,n.jsx)(N.j,{postTab:"seconds",children:(0,n.jsx)(T.p,{type:"number",min:0,...t,disabled:!B})})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"SessionsAuthSettingsForm.tsx"})}),(0,n.jsxs)(g.wL,{className:"justify-end space-x-2","data-sentry-element":"CardFooter","data-sentry-source-file":"SessionsAuthSettingsForm.tsx",children:[W.formState.isDirty&&(0,n.jsx)(b.$,{type:"default",onClick:()=>W.reset(),children:"Cancel"}),(0,n.jsx)(b.$,{type:"primary",htmlType:"submit",disabled:!B||w||!W.formState.isDirty,loading:w,"data-sentry-element":"Button","data-sentry-source-file":"SessionsAuthSettingsForm.tsx",children:"Save changes"})]})]})})})]}),(0,n.jsxs)(u.gu,{isFullWidth:!0,"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"SessionsAuthSettingsForm.tsx",children:[(0,n.jsx)(u.sZ,{className:"mb-4","data-sentry-element":"ScaffoldSectionTitle","data-sentry-source-file":"SessionsAuthSettingsForm.tsx",children:"User Sessions"}),(0,n.jsx)(j.lV,{...H,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"SessionsAuthSettingsForm.tsx",children:(0,n.jsx)("form",{onSubmit:H.handleSubmit(e=>{let s={...e};P(!0),k({projectRef:t,config:s},{onError:e=>{l.oR.error("Failed to update user session settings: ".concat(null==e?void 0:e.message)),P(!1)},onSuccess:()=>{l.oR.success("Successfully updated user session settings"),P(!1)}})}),className:"space-y-4",children:(0,n.jsxs)(g.Zp,{"data-sentry-element":"Card","data-sentry-source-file":"SessionsAuthSettingsForm.tsx",children:[(0,n.jsx)(g.Wu,{"data-sentry-element":"CardContent","data-sentry-source-file":"SessionsAuthSettingsForm.tsx",children:(0,n.jsx)(j.zB,{control:H.control,name:"SESSIONS_SINGLE_PER_USER",render:e=>{let{field:t}=e;return(0,n.jsx)(v.M,{layout:"flex-row-reverse",label:"Enforce single session per user",description:"If enabled, all but a user's most recently active session will be terminated.",children:(0,n.jsx)(j.MJ,{children:(0,n.jsx)(p.d,{checked:t.value,onCheckedChange:t.onChange,disabled:!B||!V})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"SessionsAuthSettingsForm.tsx"})}),(0,n.jsx)(g.Wu,{"data-sentry-element":"CardContent","data-sentry-source-file":"SessionsAuthSettingsForm.tsx",children:(0,n.jsx)(j.zB,{control:H.control,name:"SESSIONS_TIMEBOX",render:e=>{let{field:t}=e;return(0,n.jsx)(v.M,{layout:"flex-row-reverse",label:"Time-box user sessions",description:"The amount of time before a user is forced to sign in again. Use 0 for never.",children:(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(j.MJ,{children:(0,n.jsx)(N.j,{postTab:(0,n.jsx)(R,{value:t.value||0}),children:(0,n.jsx)(T.p,{type:"number",min:0,...t,disabled:!B||!V})})})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"SessionsAuthSettingsForm.tsx"})}),(0,n.jsx)(g.Wu,{"data-sentry-element":"CardContent","data-sentry-source-file":"SessionsAuthSettingsForm.tsx",children:(0,n.jsx)(j.zB,{control:H.control,name:"SESSIONS_INACTIVITY_TIMEOUT",render:e=>{let{field:t}=e;return(0,n.jsx)(v.M,{layout:"flex-row-reverse",label:"Inactivity timeout",description:"The amount of time a user needs to be inactive to be forced to sign in again. Use 0 for never.",children:(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(j.MJ,{children:(0,n.jsx)(N.j,{postTab:(0,n.jsx)(R,{value:t.value||0}),children:(0,n.jsx)(T.p,{type:"number",...t,disabled:!B||!V})})})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"SessionsAuthSettingsForm.tsx"})}),K&&(0,n.jsx)(h.A,{fullWidth:!0,primaryText:"Configuring user sessions is only available on the Pro Plan and above",secondaryText:"Upgrade to the Pro plan to configure settings for user sessions"}),(0,n.jsxs)(g.wL,{className:"justify-end space-x-2","data-sentry-element":"CardFooter","data-sentry-source-file":"SessionsAuthSettingsForm.tsx",children:[H.formState.isDirty&&(0,n.jsx)(b.$,{type:"default",onClick:()=>H.reset(),children:"Cancel"}),(0,n.jsx)(b.$,{type:"primary",htmlType:"submit",disabled:!B||U||!H.formState.isDirty,loading:U,"data-sentry-element":"Button","data-sentry-source-file":"SessionsAuthSettingsForm.tsx",children:"Save changes"})]})]})})})]})]}):(0,n.jsx)(u.gu,{isFullWidth:!0,children:(0,n.jsx)(S.A,{resourceText:"view auth configuration settings"})})};var C=s(87442),k=s(10508),w=s(8750),M=s(53931);let U=()=>{let{can:e,isSuccess:t}=(0,y.Qp)(r.aG.READ,"custom_config_gotrue");return t&&!e?(0,n.jsx)(S.A,{isFullPage:!0,resourceText:"access your project's authentication settings"}):(0,n.jsx)(u.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-component":"SessionsPage","data-sentry-source-file":"sessions.tsx",children:t?(0,n.jsx)(O,{}):(0,n.jsx)(u.gu,{isFullWidth:!0,children:(0,n.jsx)(M.yV,{})})})};U.getLayout=e=>(0,n.jsx)(k.A,{children:(0,n.jsx)(C.A,{children:(0,n.jsx)(w.M,{title:"User Sessions",subtitle:"Configure settings for user sessions and refresh tokens",children:e})})});let P=U},87442:(e,t,s)=>{"use strict";s.d(t,{A:()=>h});var n=s(80263),r=s(80814),a=s(22891),i=s(91958),o=s(93873),l=s(37631),d=s(2657),c=s(9497),u=s(29471),m=s(1458);let S=()=>{let e=(0,r.useRouter)(),{ref:t="default"}=(0,a.g)(),s=(0,a._P)("authOverviewPage"),c=(0,a._P)("EnableOAuth21"),u=(0,i.hN)(),{authenticationSignInProviders:S,authenticationRateLimits:h,authenticationEmails:f,authenticationMultiFactor:x,authenticationAttackProtection:y,authenticationAdvanced:E}=(0,d.x)(["authentication:sign_in_providers","authentication:rate_limits","authentication:emails","authentication:multi_factor","authentication:attack_protection","authentication:advanced"]);(0,l.$E)({projectRef:t});let _=e.pathname.split("/")[4];return(0,n.jsx)(o.l,{page:_,menu:(0,m.B)(t,{authenticationSignInProviders:S,authenticationRateLimits:h,authenticationEmails:f,authenticationMultiFactor:x,authenticationAttackProtection:y,authenticationAdvanced:E,authenticationShowOverview:s,authenticationShowSecurityNotifications:u,authenticationOauth21:c}),"data-sentry-element":"ProductMenu","data-sentry-component":"AuthProductMenu","data-sentry-source-file":"AuthLayout.tsx"})},h=(0,c.r)(e=>{let{children:t}=e;return(0,n.jsx)(u.k,{title:"Authentication",product:"Authentication",productMenu:(0,n.jsx)(S,{}),isBlocking:!1,"data-sentry-element":"ProjectLayout","data-sentry-component":"AuthLayout","data-sentry-source-file":"AuthLayout.tsx",children:t})})}},e=>{e.O(0,[60858,15599,16110,27764,36538,44033,76984,72391,35035,40545,596,10508,48340,75187,29471,8750,50143,90636,46593,38792],()=>e(e.s=56481)),_N_E=e.O()}]);