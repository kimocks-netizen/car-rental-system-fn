try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="6e82673f-5909-4668-8d3e-8a29c8a3f782",e._sentryDebugIdIdentifier="sentry-dbid-6e82673f-5909-4668-8d3e-8a29c8a3f782")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63973],{1374:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]])},2885:(e,t,n)=>{"use strict";function a(e){return"\n    begin;\n\n    ".concat(e,"\n    \n    commit;\n  ")}n.d(t,{d:()=>a})},13655:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]])},14354:(e,t,n)=>{"use strict";n.d(t,{KP:()=>d,Nu:()=>c,d8:()=>l,l3:()=>o});var a=n(80263),r=n(79279);n(53239);var s=n(80100);let i=(0,r.F)(["pt-12 last:pb-12 gap-6"],{variants:{orientation:{horizontal:"grid @3xl:grid-cols-[1fr_2fr] @3xl:gap-12",vertical:"flex flex-col"}},defaultVariants:{orientation:"vertical"}}),l=e=>{let{className:t,orientation:n="vertical",children:r,...l}=e;return(0,a.jsx)("div",{"data-slot":"page-section","data-orientation":n,className:(0,s.cn)(i({orientation:n}),t),...l,"data-sentry-component":"PageSectionRoot","data-sentry-source-file":"index.tsx",children:r})};l.displayName="PageSectionRoot";let o=e=>{let{className:t,children:n,...r}=e;return(0,a.jsx)("div",{"data-slot":"page-section-summary",className:(0,s.cn)("flex flex-col gap-1",t),...r,"data-sentry-component":"PageSectionSummary","data-sentry-source-file":"index.tsx",children:n})};o.displayName="PageSectionSummary";let c=e=>{let{className:t,children:n,...r}=e;return(0,a.jsx)("h2",{"data-slot":"page-section-title",className:(0,s.cn)("heading-section",t),...r,"data-sentry-component":"PageSectionTitle","data-sentry-source-file":"index.tsx",children:n})};c.displayName="PageSectionTitle";let d=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{"data-slot":"page-section-content",className:(0,s.cn)(t),...n,"data-sentry-component":"PageSectionContent","data-sentry-source-file":"index.tsx"})};d.displayName="PageSectionContent"},18306:(e,t,n)=>{"use strict";e.exports=n(84406)},19197:(e,t,n)=>{"use strict";n.d(t,{AL:()=>c,J5:()=>u,J_:()=>o,N1:()=>l,aw:()=>d,fX:()=>f,mL:()=>m,mN:()=>p,wB:()=>y,wy:()=>x,x0:()=>h});var a=n(9012),r=n.n(a),s=n(14506),i=n.n(s);let l=["int2","int4","int8","float4","float8","numeric","double precision"],o=["json","jsonb"],c=["text","varchar"],d=["timestamp","timestamptz"],u=["date"],m=["time","timetz"],p=r()(d,u,m),y=["uuid","bool","vector","bytea"],h=i()(r()(l,o,c,p,y)),x={varchar:{alternative:"text",reference:"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_varchar.28n.29_by_default"},json:{alternative:"jsonb",reference:"https://www.postgresql.org/docs/current/datatype-json.html"},timetz:{alternative:"timestamptz",reference:"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_timetz"},timestamp:{alternative:"timestamptz",reference:"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_timestamp_.28without_time_zone.29"}},f=[{name:"int2",description:"Signed two-byte integer",type:"number"},{name:"int4",description:"Signed four-byte integer",type:"number"},{name:"int8",description:"Signed eight-byte integer",type:"number"},{name:"float4",description:"Single precision floating-point number (4 bytes)",type:"number"},{name:"float8",description:"Double precision floating-point number (8 bytes)",type:"number"},{name:"numeric",description:"Exact numeric of selectable precision",type:"number"},{name:"json",description:"Textual JSON data",type:"json"},{name:"jsonb",description:"Binary JSON data, decomposed",type:"json"},{name:"text",description:"Variable-length character string",type:"text"},{name:"varchar",description:"Variable-length character string",type:"text"},{name:"uuid",description:"Universally unique identifier",type:"text"},{name:"date",description:"Calendar date (year, month, day)",type:"time"},{name:"time",description:"Time of day (no time zone)",type:"time"},{name:"timetz",description:"Time of day, including time zone",type:"time"},{name:"timestamp",description:"Date and time (no time zone)",type:"time"},{name:"timestamptz",description:"Date and time, including time zone",type:"time"},{name:"bool",description:"Logical boolean (true/false)",type:"bool"},{name:"bytea",description:"Variable-length binary string",type:"others"}]},22730:(e,t,n)=>{"use strict";n.d(t,{z:()=>d});var a=n(78510),r=n(67850),s=n(24523),i=n(9620),l=n(85039),o=n(87727);async function c(e,t,n){let{projectRef:r,connectionString:i}=e;if(!r)throw Error("projectRef is required");let l=new Headers(n);i&&l.set("x-connection-encrypted",i);let{data:o,error:c}=await (0,s.Jt)("/platform/pg-meta/{ref}/extensions",{params:{header:{"x-connection-encrypted":i,"x-pg-application-name":a.r},path:{ref:r}},headers:l,signal:t});return c&&(0,s.H4)(c),o}let d=function(e){let{projectRef:t,connectionString:n}=e,{enabled:a=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{data:d}=(0,i.YA)(),u=(null==d?void 0:d.status)===l.BU.ACTIVE_HEALTHY;return(0,r.I)({queryKey:o.I.list(t),queryFn:e=>{let{signal:a}=e;return c({projectRef:t,connectionString:n},a)},enabled:a&&void 0!==t&&u,...s})}},29948:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},31626:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},35693:(e,t,n)=>{"use strict";n.d(t,{i:()=>d});var a=n(80263),r=n(53239),s=n(95137),i=n(99779),l=n(63335),o=n(44725);let c=e=>{let{onClose:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:(0,a.jsx)(s.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:"Schemas managed by Supabase"})}),(0,a.jsx)(s.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"ProtectedSchemaWarning.tsx"}),(0,a.jsxs)(s.OO,{className:"space-y-2 prose","data-sentry-element":"DialogSection","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:[(0,a.jsx)("p",{className:"text-sm",children:"The following schemas are managed by Supabase and are currently protected from write access through the dashboard."}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:l.$O.map(e=>(0,a.jsx)("code",{className:"text-xs",children:e},e))}),(0,a.jsx)("p",{className:"text-sm !mt-4",children:"These schemas are critical to the functionality of your Supabase project and hence we highly recommend not altering them."}),(0,a.jsx)("p",{className:"text-sm",children:"You can, however, still interact with those schemas through the SQL Editor although we advise you only do so if you know what you are doing."})]}),(0,a.jsx)(s.Es,{"data-sentry-element":"DialogFooter","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:(0,a.jsx)("div",{className:"flex items-center justify-end space-x-2",children:(0,a.jsx)(i.$,{type:"default",onClick:t,"data-sentry-element":"Button","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:"Understood"})})})]})},d=e=>{let{size:t="md",schema:n,entity:d}=e,[u,m]=(0,r.useState)(!1),{isSchemaLocked:p,reason:y,fdwType:h}=(0,l.BQ)({schema:n});return p?(0,a.jsx)(o.Z,{showIcon:"sm"!==t,type:"note",title:"sm"===t?"Viewing protected schema":"Viewing ".concat(d," from a protected schema"),className:"[&_p]:!m-0","data-sentry-element":"Admonition","data-sentry-component":"ProtectedSchemaWarning","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:"fdw"===y&&"iceberg"===h?(0,a.jsxs)("p",{children:["The ",(0,a.jsx)("code",{className:"text-code-inline",children:n})," schema is used by Supabase to connect to analytics buckets and is read-only through the dashboard."]}):"fdw"===y&&"s3_vectors"===h?(0,a.jsxs)("p",{children:["The ",(0,a.jsx)("code",{className:"text-xs",children:n})," schema is used by Supabase to connect to vector buckets and is read-only through the dashboard."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"mb-2",children:["The ",(0,a.jsx)("code",{className:"text-code-inline",children:n})," schema is managed by Supabase and is read-only through the dashboard."]}),(0,a.jsxs)(s.lG,{open:u,onOpenChange:m,children:[(0,a.jsx)(s.zM,{asChild:!0,children:(0,a.jsx)(i.$,{type:"default",size:"tiny",onClick:()=>m(!0),children:"Learn more"})}),(0,a.jsx)(s.Cf,{children:(0,a.jsx)(c,{onClose:()=>m(!1)})})]})]})}):null}},40247:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/database/types",function(){return n(79632)}])},46087:(e,t,n)=>{"use strict";n.d(t,{$:()=>l,s:()=>i});var a=n(53239),r=n(23850),s=n(73969);function i(e){let{enabled:t,urlKey:n,select:s,onError:i}=e,[l,o]=(0,r.ZA)(n,r.tU.withOptions({history:"push",clearOnDefault:!0})),c=(0,a.useMemo)(()=>l?s(l):void 0,[l,s]);return(0,a.useEffect)(()=>{t&&l&&!c&&(i(Error("not found"),l),o(null))},[t,i,l,o,c]),{value:c,setValue:o}}let l=(e,t,n)=>{t!==e.current?s.oR.error(n):e.current=null}},53407:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]])},54831:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},56748:(e,t,n)=>{"use strict";n.d(t,{Y:()=>a});let a={list:e=>["projects",e,"fdws"]}},57384:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});var a=n(23850),r=n(53239),s=n(22891);let i=()=>{var e;let{ref:t}=(0,s.g)(),n=t&&t.length>0&&window.localStorage.getItem(s.rS.LAST_SELECTED_SCHEMA(t))||"public",[i,l]=(e=(0,r.useMemo)(()=>n,[t]),(0,a.ZA)("schema",a.tU.withDefault(e).withOptions({clearOnDefault:!1})));return(0,r.useEffect)(()=>{t&&t.length>0&&window.localStorage.setItem(s.rS.LAST_SELECTED_SCHEMA(t),i)},[i,t]),{selectedSchema:i,setSelectedSchema:l}}},66959:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("DatabaseZap",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]])},68296:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var a=n(80263),r=n(80814),s=n(91958),i=n(93873),l=n(22730),o=n(78937),c=n(2657),d=n(9620),u=n(9497),m=n(29471),p=n(54278);let y=()=>{let{data:e}=(0,d.YA)(),t=(0,r.useRouter)().pathname.split("/")[4],{data:n}=(0,l.z)({projectRef:null==e?void 0:e.ref,connectionString:null==e?void 0:e.connectionString}),{data:u}=(0,o.Q)({projectRef:null==e?void 0:e.ref}),m=void 0!==(null!=n?n:[]).find(e=>"pg_net"===e.name),y=(null==u?void 0:u.selected_addons.find(e=>"pitr"===e.type))!==void 0,h=(0,s.p4)(),{databaseReplication:x,databaseRoles:f,integrationsWrappers:g}=(0,c.x)(["database:replication","database:roles","integrations:wrappers"]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(i.l,{page:t,menu:(0,p.k)(e,{pgNetExtensionExists:m,pitrEnabled:y,columnLevelPrivileges:h,showPgReplicate:x,showRoles:f,showWrappers:g}),"data-sentry-element":"ProductMenu","data-sentry-source-file":"DatabaseLayout.tsx"})})},h=(0,u.r)(e=>{let{children:t}=e;return(0,a.jsx)(m.k,{product:"Database",productMenu:(0,a.jsx)(y,{}),isBlocking:!1,"data-sentry-element":"ProjectLayout","data-sentry-component":"DatabaseLayout","data-sentry-source-file":"DatabaseLayout.tsx",children:t})})},69988:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]])},74195:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]])},74310:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},77444:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},78910:(e,t,n)=>{"use strict";var a=n(18306),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};function o(e){return a.isMemo(e)?i:l[e.$$typeof]||r}l[a.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l[a.Memo]=i;var c=Object.defineProperty,d=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,y=Object.prototype;e.exports=function e(t,n,a){if("string"!=typeof n){if(y){var r=p(n);r&&r!==y&&e(t,r,a)}var i=d(n);u&&(i=i.concat(u(n)));for(var l=o(t),h=o(n),x=0;x<i.length;++x){var f=i[x];if(!s[f]&&!(a&&a[f])&&!(h&&h[f])&&!(l&&l[f])){var g=m(n,f);try{c(t,f,g)}catch(e){}}}}return t}},79632:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>em});var a=n(80263),r=n(31092),s=n(77444),i=n(3225),l=n(33922),o=n(23850),c=n(53239),d=n(73969),u=n(44168),m=n(41273),p=n(84438),y=n(53931),h=n(81536),x=n(57384),f=n(9620),g=n(46087),j=n(63335),v=n(80421),b=n(99779),S=n(78039),w=n(78511),N=n(21162),k=n(35693),E=n(32981),A=n(12123),C=n(86510),P=n(90376),T=n(52555),_=n.n(T),D=n(68889),z=n(87494),$=n(10663),R=n(51355),M=n(80210),F=n(59356),L=n(2885),q=n(99423);async function V(e){let{projectRef:t,connectionString:n,schema:a,name:r,description:s,values:i}=e,l='create type "'.concat(a,'"."').concat(r,'" as enum (').concat(i.map(e=>"'".concat(e,"'")).join(", "),");"),o=void 0!==s?'comment on type "'.concat(a,'"."').concat(r,"\" is '").concat(s,"';"):"",c=(0,L.d)("".concat(l," ").concat(o)),{result:d}=await (0,F.E)({projectRef:t,connectionString:n,sql:c});return d}let I=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,R.jE)();return(0,M.n)({mutationFn:e=>V(e),async onSuccess(t,n,r){let{projectRef:s}=n;await a.invalidateQueries({queryKey:q.K.list(s)}),await (null==e?void 0:e(t,n,r))},async onError(e,n,a){void 0===t?d.oR.error("Failed to create enumerated type: ".concat(e.message)):t(e,n,a)},...n})};var O=n(79861),Y=n(65887),B=n(27371),H=n(80100),W=n(20033),J=n(90041);let K=e=>{let{index:t,id:n,field:r,isDisabled:s=!1,onRemoveValue:i}=e;return(0,a.jsx)(D.sx,{draggableId:n,index:t,isDragDisabled:s,"data-sentry-element":"Draggable","data-sentry-component":"EnumeratedTypeValueRow","data-sentry-source-file":"EnumeratedTypeValueRow.tsx",children:e=>(0,a.jsxs)("div",{ref:e.innerRef,...e.draggableProps,className:"flex items-center space-x-2 space-y-2",children:[(0,a.jsx)("div",{...e.dragHandleProps,className:"opacity-50 hover:opacity-100 transition ".concat(s?"text-foreground-lighter !cursor-default":"text-foreground"),children:(0,a.jsx)(J.A,{size:16,strokeWidth:1.5})}),(0,a.jsx)(B.p,{...r,className:"w-full"}),(0,a.jsx)(b.$,{type:"default",size:"small",disabled:s,icon:(0,a.jsx)(l.A,{strokeWidth:1.5,size:16}),className:"px-2",onClick:()=>i()})]})})};var Q=n(19197);let U=[...Q.N1,...Q.AL,...Q.J_,...Q.aw,...Q.mL,...Q.J5,...Q.wB,"bigint","bigserial","bit","bit varying","boolean","box","bytea","char","character","character varying","cidr","circle","date","double precision","inet","int","integer","interval","line","lseg","macaddr","macaddr8","money","numeric","decimal","path","pg_lsn","pg_snapshot","point","polygon","real","smallint","smallserial","serial","time with timezone","timestamp with timezone","tsquery","tsvector","txid_snapshot","xml"],X=e=>{let{visible:t,onClose:n,schema:r}=e,s={name:"",description:"",values:[{value:""}]},i=(0,c.useRef)(null),{data:l}=(0,f.YA)(),{mutate:o,isPending:u}=I({onSuccess:(e,t)=>{d.oR.success('Successfully created type "'.concat(t.name,'"')),j()}});(0,c.useEffect)(()=>{p.reset(s)},[t]);let m=$.Ik({name:$.Yj().min(1,"Please provide a name for your enumerated type").refine(e=>!U.includes(e),{message:"Name cannot be a native Postgres data type"}).default(""),description:$.Yj().default("").optional(),values:$.Ik({value:$.Yj().min(1,"Please provide a value")}).array().default([])}),p=(0,z.mN)({resolver:(0,E.u)(m),defaultValues:s}),{fields:y,append:h,remove:x,move:g}=(0,z.jz)({name:"values",control:p.control}),j=()=>{p.reset(s),n()};return(0,a.jsx)(O.Ay,{loading:u,visible:t,onCancel:j,header:"Create a new enumerated type",confirmText:"Create type",onConfirm:()=>{i.current&&i.current.click()},"data-sentry-element":"SidePanel","data-sentry-component":"CreateEnumeratedTypeSidePanel","data-sentry-source-file":"CreateEnumeratedTypeSidePanel.tsx",children:(0,a.jsx)(O.Ay.Content,{className:"py-4","data-sentry-element":"SidePanel.Content","data-sentry-source-file":"CreateEnumeratedTypeSidePanel.tsx",children:(0,a.jsx)(Y.lV,{...p,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"CreateEnumeratedTypeSidePanel.tsx",children:(0,a.jsxs)("form",{className:"space-y-4",onSubmit:p.handleSubmit(e=>{var t;return(null==l?void 0:l.ref)===void 0?console.error("Project ref required"):(null==l?void 0:l.connectionString)===void 0?console.error("Project connectionString required"):void o({projectRef:l.ref,connectionString:l.connectionString,schema:r,name:e.name,description:null==(t=e.description)?void 0:t.replaceAll("'","''"),values:e.values.filter(e=>e.value.length>0).map(e=>e.value.trim())})}),children:[(0,a.jsx)(Y.zB,{control:p.control,name:"name",render:e=>{let{field:t}=e;return(0,a.jsxs)(Y.eI,{children:[(0,a.jsx)(Y.lR,{children:"Name"}),(0,a.jsx)(Y.MJ,{children:(0,a.jsx)(B.p,{...t})}),(0,a.jsx)(Y.C5,{})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreateEnumeratedTypeSidePanel.tsx"}),(0,a.jsx)(Y.zB,{control:p.control,name:"description",render:e=>{let{field:t}=e;return(0,a.jsxs)(Y.eI,{children:[(0,a.jsx)(Y.lR,{children:"Description"}),(0,a.jsx)(Y.MJ,{children:(0,a.jsx)(B.p,{...t})}),(0,a.jsx)(Y.Rr,{children:"Optional"})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreateEnumeratedTypeSidePanel.tsx"}),(0,a.jsx)(D.JY,{onDragEnd:e=>(e=>{e.destination&&g(e.source.index,e.destination.index)})(e),"data-sentry-element":"DragDropContext","data-sentry-source-file":"CreateEnumeratedTypeSidePanel.tsx",children:(0,a.jsx)(D.gL,{droppableId:"enum_type_values_droppable","data-sentry-element":"Droppable","data-sentry-source-file":"CreateEnumeratedTypeSidePanel.tsx",children:e=>(0,a.jsxs)("div",{ref:e.innerRef,children:[y.map((e,t)=>(0,a.jsx)(Y.zB,{control:p.control,name:"values.".concat(t,".value"),render:n=>{let{field:r}=n;return(0,a.jsxs)(Y.eI,{children:[(0,a.jsx)(Y.lR,{className:(0,H.cn)(0!==t&&"sr-only"),children:"Values"}),0===t&&(0,a.jsxs)(W.Fc,{children:[(0,a.jsx)(A.A,{strokeWidth:1.5}),(0,a.jsx)(W.XL,{children:"After creation, values cannot be deleted or sorted"}),(0,a.jsxs)(W.TN,{children:[(0,a.jsx)("p",{className:"!leading-normal track",children:"You will need to delete and recreate the enumerated type with the updated values instead."}),(0,a.jsx)(b.$,{asChild:!0,type:"default",icon:(0,a.jsx)(C.A,{strokeWidth:1.5}),className:"mt-2",children:(0,a.jsx)(_(),{href:"https://www.postgresql.org/message-id/21012.1459434338%40sss.pgh.pa.us",target:"_blank",rel:"noreferrer",children:"Learn more"})})]})]}),(0,a.jsx)(Y.MJ,{children:(0,a.jsx)(K,{index:t,id:e.id,field:r,isDisabled:y.length<2,onRemoveValue:()=>x(t)})}),(0,a.jsx)(Y.C5,{className:"ml-6"})]})}},e.id)),e.placeholder]})})}),(0,a.jsx)(b.$,{type:"default",icon:(0,a.jsx)(P.A,{strokeWidth:1.5}),onClick:()=>h({value:""}),"data-sentry-element":"Button","data-sentry-source-file":"CreateEnumeratedTypeSidePanel.tsx",children:"Add value"}),(0,a.jsx)(b.$,{ref:i,htmlType:"submit",type:"default",className:"hidden","data-sentry-element":"Button","data-sentry-source-file":"CreateEnumeratedTypeSidePanel.tsx",children:"Update"})]})})})})};async function Z(e){let{projectRef:t,connectionString:n,name:a,schema:r}=e,s="drop type if exists ".concat(r,'."').concat(a,'"'),{result:i}=await (0,F.E)({projectRef:t,connectionString:n,sql:s});return i}let G=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,R.jE)();return(0,M.n)({mutationFn:e=>Z(e),async onSuccess(t,n,r){let{projectRef:s}=n;await a.invalidateQueries({queryKey:q.K.list(s)}),await (null==e?void 0:e(t,n,r))},async onError(e,n,a){void 0===t?d.oR.error("Failed to create enumerated type: ".concat(e.message)):t(e,n,a)},...n})};var ee=n(68421);let et=e=>{let{visible:t,selectedEnumeratedType:n,onClose:r,onDelete:s}=e,{data:i}=(0,f.YA)(),{mutate:l,isPending:o}=G({onSuccess:()=>{d.oR.success('Successfully deleted "'.concat(n.name,'"')),r()}});return(0,a.jsxs)(ee.A,{variant:"destructive",size:"medium",loading:o,visible:t,title:(0,a.jsxs)(a.Fragment,{children:["Confirm to delete enumerated type"," ",(0,a.jsx)("code",{className:"text-sm",children:null==n?void 0:n.name})]}),confirmLabel:"Confirm delete",confirmLabelLoading:"Deleting...",onCancel:r,onConfirm:()=>void 0===n?console.error("No enumerated type selected"):(null==i?void 0:i.ref)===void 0?console.error("Project ref required"):(null==i?void 0:i.connectionString)===void 0?console.error("Project connectionString required"):void(null==s||s(),l({projectRef:null==i?void 0:i.ref,connectionString:null==i?void 0:i.connectionString,name:n.name,schema:n.schema})),alert:{title:"This action cannot be undone",description:"You will need to re-create the enumerated type if you want to revert the deletion."},"data-sentry-element":"ConfirmationModal","data-sentry-component":"DeleteEnumeratedTypeModal","data-sentry-source-file":"DeleteEnumeratedTypeModal.tsx",children:[(0,a.jsx)("p",{className:"text-sm",children:"Before deleting this enumerated type, consider:"}),(0,a.jsx)("ul",{className:"space-y-2 mt-2 text-sm text-foreground-light",children:(0,a.jsx)("li",{className:"list-disc ml-6",children:"This enumerated type is no longer in use in any tables or functions"})})]})};async function en(e){let{projectRef:t,connectionString:n,schema:a,name:r,description:s,values:i=[]}=e,l=[];r.original!==r.updated&&l.push('alter type "'.concat(a,'"."').concat(r.original,'" rename to "').concat(r.updated,'";')),i.length>0&&i.forEach((e,t)=>{if(e.isNew)if(0===t){let t=i.find(e=>!e.isNew);l.push('alter type "'.concat(a,'"."').concat(r.updated,"\" add value '").concat(e.updated,"' before '").concat(null==t?void 0:t.original,"';"))}else l.push('alter type "'.concat(a,'"."').concat(r.updated,"\" add value '").concat(e.updated,"' after '").concat(i[t-1].updated,"';"));else e.original!==e.updated&&l.push('alter type "'.concat(a,'"."').concat(r.updated,"\" rename value '").concat(e.original,"' to '").concat(e.updated,"';"))}),void 0!==s&&l.push('comment on type "'.concat(a,'"."').concat(r.updated,"\" is '").concat(s,"';"));let o=(0,L.d)(l.join(" ")),{result:c}=await (0,F.E)({projectRef:t,connectionString:n,sql:o});return c}let ea=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,R.jE)();return(0,M.n)({mutationFn:e=>en(e),async onSuccess(t,n,r){let{projectRef:s}=n;await a.invalidateQueries({queryKey:q.K.list(s)}),await (null==e?void 0:e(t,n,r))},async onError(e,n,a){void 0===t?d.oR.error("Failed to add value to enumerated type: ".concat(e.message)):t(e,n,a)},...n})},er=e=>{var t;let{visible:n,selectedEnumeratedType:r,onClose:s}=e,i=(0,c.useRef)(null),{data:l}=(0,f.YA)(),{mutate:o,isPending:u}=ea({onSuccess:(e,t)=>{d.oR.success('Successfully updated type "'.concat(t.name.updated,'"')),s()}}),m=$.Ik({name:$.Yj().min(1,"Please provide a name for your enumerated type").default(""),description:$.Yj().default("").optional(),values:$.Ik({isNew:$.zM(),originalValue:$.Yj(),updatedValue:$.Yj().min(1,"Please provide a value")}).array().default([])}),p=(0,z.mN)({resolver:(0,E.u)(m),defaultValues:{name:"",description:"",values:[{isNew:!0,originalValue:"",updatedValue:""}]}}),{fields:y,append:h,remove:x,move:g}=(0,z.jz)({name:"values",control:p.control}),j=(null!=(t=null==r?void 0:r.enums)?t:[]).map(e=>({isNew:!1,originalValue:e,updatedValue:e}));return(0,c.useEffect)(()=>{if(void 0!==r){var e;p.reset({name:r.name,description:null!=(e=r.comment)?e:"",values:j})}void 0==r&&p.reset({values:j})},[r]),(0,a.jsx)(O.Ay,{loading:u,visible:n,onCancel:s,header:'Update type "'.concat(null==r?void 0:r.name,'"'),confirmText:"Update type",onConfirm:()=>{i.current&&i.current.click()},"data-sentry-element":"SidePanel","data-sentry-component":"EditEnumeratedTypeSidePanel","data-sentry-source-file":"EditEnumeratedTypeSidePanel.tsx",children:(0,a.jsx)(O.Ay.Content,{className:"py-4","data-sentry-element":"SidePanel.Content","data-sentry-source-file":"EditEnumeratedTypeSidePanel.tsx",children:(0,a.jsx)(Y.lV,{...p,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"EditEnumeratedTypeSidePanel.tsx",children:(0,a.jsxs)("form",{className:"space-y-4",onSubmit:p.handleSubmit(e=>{var t;if((null==l?void 0:l.ref)===void 0)return console.error("Project ref required");if((null==l?void 0:l.connectionString)===void 0)return console.error("Project connectionString required");if(void 0===r)return console.error("selectedEnumeratedType required");let n={schema:r.schema,name:{original:r.name,updated:e.name},values:e.values.filter(e=>0!==e.updatedValue.length).map(e=>({original:e.originalValue,updated:e.updatedValue.trim(),isNew:e.isNew})),...e.description!==r.comment?{description:null==(t=e.description)?void 0:t.replaceAll("'","''")}:{}};o({projectRef:l.ref,connectionString:l.connectionString,...n})}),children:[(0,a.jsx)(Y.zB,{control:p.control,name:"name",render:e=>{let{field:t}=e;return(0,a.jsxs)(Y.eI,{children:[(0,a.jsx)(Y.lR,{children:"Name"}),(0,a.jsx)(Y.MJ,{children:(0,a.jsx)(B.p,{...t})}),(0,a.jsx)(Y.C5,{})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"EditEnumeratedTypeSidePanel.tsx"}),(0,a.jsx)(Y.zB,{control:p.control,name:"description",render:e=>{let{field:t}=e;return(0,a.jsxs)(Y.eI,{children:[(0,a.jsx)(Y.lR,{children:"Description"}),(0,a.jsx)(Y.MJ,{children:(0,a.jsx)(B.p,{...t})}),(0,a.jsx)(Y.Rr,{children:"Optional"})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"EditEnumeratedTypeSidePanel.tsx"}),(0,a.jsx)(D.JY,{onDragEnd:e=>(e=>{e.destination&&g(e.source.index,e.destination.index)})(e),"data-sentry-element":"DragDropContext","data-sentry-source-file":"EditEnumeratedTypeSidePanel.tsx",children:(0,a.jsx)(D.gL,{droppableId:"enum_type_values_droppable","data-sentry-element":"Droppable","data-sentry-source-file":"EditEnumeratedTypeSidePanel.tsx",children:e=>(0,a.jsxs)("div",{ref:e.innerRef,children:[y.map((e,t)=>(0,a.jsx)(Y.zB,{control:p.control,name:"values.".concat(t,".updatedValue"),render:n=>{let{field:r}=n;return(0,a.jsxs)(Y.eI,{children:[(0,a.jsx)(Y.lR,{className:(0,H.cn)(0!==t&&"sr-only"),children:"Values"}),0===t&&(0,a.jsxs)(W.Fc,{children:[(0,a.jsx)(A.A,{strokeWidth:1.5}),(0,a.jsx)(W.XL,{children:"Existing values cannot be deleted or sorted"}),(0,a.jsxs)(W.TN,{children:[(0,a.jsx)("p",{className:"!leading-normal track",children:"You will need to delete and recreate the enumerated type with the updated values instead."}),(0,a.jsx)(b.$,{asChild:!0,type:"default",icon:(0,a.jsx)(C.A,{strokeWidth:1.5}),className:"mt-2",children:(0,a.jsx)(_(),{href:"https://www.postgresql.org/message-id/21012.1459434338%40sss.pgh.pa.us",target:"_blank",rel:"noreferrer",children:"Learn more"})})]})]}),(0,a.jsx)(Y.MJ,{children:(0,a.jsx)(K,{index:t,id:e.id,field:r,isDisabled:!e.isNew,onRemoveValue:()=>x(t)})}),(0,a.jsx)(Y.C5,{className:"ml-6"})]})}},e.id)),e.placeholder]})})}),(0,a.jsx)(b.$,{type:"default",icon:(0,a.jsx)(P.A,{strokeWidth:1.5}),onClick:()=>h({isNew:!0,originalValue:"",updatedValue:""}),"data-sentry-element":"Button","data-sentry-source-file":"EditEnumeratedTypeSidePanel.tsx",children:"Add value"}),(0,a.jsx)(b.$,{ref:i,htmlType:"submit",type:"default",className:"hidden","data-sentry-element":"Button","data-sentry-source-file":"EditEnumeratedTypeSidePanel.tsx",children:"Update"})]})})})})},es=()=>{let{data:e}=(0,f.YA)(),[t,n]=(0,c.useState)(""),{selectedSchema:E,setSelectedSchema:A}=(0,x.k)(),C=(0,c.useRef)(null),{data:P,error:T,isLoading:_,isError:D,isSuccess:z}=(0,h.p)({projectRef:null==e?void 0:e.ref,connectionString:null==e?void 0:e.connectionString}),[$,R]=(0,o.ZA)("new",o.cr.withDefault(!1).withOptions({history:"push",clearOnDefault:!0})),{value:M,setValue:F}=(0,g.s)({urlKey:"edit",select:e=>e?null==P?void 0:P.find(t=>t.id.toString()===e):void 0,enabled:!!P,onError:()=>d.oR.error("Enumerated Type not found")}),{value:L,setValue:q}=(0,g.s)({urlKey:"delete",select:e=>e?null==P?void 0:P.find(t=>t.id.toString()===e):void 0,enabled:!!P,onError:(e,t)=>(0,g.$)(C,t,"Enumerated Type not found")}),V=(null!=P?P:[]).filter(e=>e.enums.length>0),I=t.length>0?V.filter(e=>e.schema===E&&e.name.toLowerCase().includes(t.toLowerCase())):V.filter(e=>e.schema===E),{isSchemaLocked:O}=(0,j.BQ)({schema:E});return(0,a.jsxs)("div",{className:"space-y-4","data-sentry-component":"EnumeratedTypes","data-sentry-source-file":"EnumeratedTypes.tsx",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-2 flex-wrap",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-2 flex-wrap",children:[(0,a.jsx)(p.A,{className:"w-full lg:w-[180px]",size:"tiny",showError:!1,selectedSchemaName:E,onSelectSchema:A,"data-sentry-element":"SchemaSelector","data-sentry-source-file":"EnumeratedTypes.tsx"}),(0,a.jsx)(v.A,{size:"tiny",value:t,className:"w-full lg:w-52",onChange:e=>n(e.target.value),placeholder:"Search for a type",icon:(0,a.jsx)(r.A,{size:14}),"data-sentry-element":"Input","data-sentry-source-file":"EnumeratedTypes.tsx"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{href:"https://www.postgresql.org/docs/current/datatype-enum.html","data-sentry-element":"DocsButton","data-sentry-source-file":"EnumeratedTypes.tsx"}),!O&&(0,a.jsx)(b.$,{className:"ml-auto flex-1",type:"primary",onClick:()=>R(!0),children:"Create type"})]})]}),O&&(0,a.jsx)(k.i,{schema:E,entity:"enumerated types"}),_&&(0,a.jsx)(y.yV,{}),D&&(0,a.jsx)(u.A,{error:T,subject:"Failed to retrieve database enumerated types"}),z&&(0,a.jsx)(S.Zp,{children:(0,a.jsxs)(w.XI,{children:[(0,a.jsx)(w.A0,{children:(0,a.jsxs)(w.Hj,{children:[(0,a.jsx)(w.nd,{children:"Schema"},"schema"),(0,a.jsx)(w.nd,{children:"Name"},"name"),(0,a.jsx)(w.nd,{children:"Values"},"values"),(0,a.jsx)(w.nd,{},"actions")]})}),(0,a.jsx)(w.BF,{children:(0,a.jsxs)(a.Fragment,{children:[0===I.length&&0===t.length&&(0,a.jsx)(w.Hj,{children:(0,a.jsxs)(w.nA,{colSpan:4,children:[(0,a.jsx)("p",{className:"text-sm text-foreground",children:"No enumerated types created yet"}),(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:['There are no enumerated types found in the schema "',E,'"']})]})}),0===I.length&&t.length>0&&(0,a.jsx)(w.Hj,{children:(0,a.jsxs)(w.nA,{colSpan:4,children:[(0,a.jsx)("p",{className:"text-sm text-foreground",children:"No results found"}),(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:['Your search for "',t,'" did not return any results']})]})}),I.length>0&&I.map(e=>(0,a.jsxs)(w.Hj,{children:[(0,a.jsx)(w.nA,{className:"w-20",children:(0,a.jsx)("p",{className:"w-20 truncate",children:e.schema})}),(0,a.jsx)(w.nA,{children:e.name}),(0,a.jsx)(w.nA,{children:e.enums.join(", ")}),(0,a.jsx)(w.nA,{children:!O&&(0,a.jsx)("div",{className:"flex justify-end items-center space-x-2",children:(0,a.jsxs)(N.rI,{children:[(0,a.jsx)(N.ty,{asChild:!0,children:(0,a.jsx)(b.$,{type:"default",className:"px-1",icon:(0,a.jsx)(s.A,{})})}),(0,a.jsxs)(N.SQ,{side:"bottom",align:"end",className:"w-32",children:[(0,a.jsxs)(N._2,{className:"space-x-2",onClick:()=>F(e.id.toString()),children:[(0,a.jsx)(i.A,{size:14}),(0,a.jsx)("p",{children:"Update type"})]}),(0,a.jsxs)(N._2,{className:"space-x-2",onClick:()=>q(e.id.toString()),children:[(0,a.jsx)(l.A,{size:14}),(0,a.jsx)("p",{children:"Delete type"})]})]})]})})})]},e.id))]})})]})}),(0,a.jsx)(X,{visible:$,onClose:()=>R(!1),schema:E,"data-sentry-element":"CreateEnumeratedTypeSidePanel","data-sentry-source-file":"EnumeratedTypes.tsx"}),(0,a.jsx)(er,{visible:!!M,selectedEnumeratedType:M,onClose:()=>F(null),"data-sentry-element":"EditEnumeratedTypeSidePanel","data-sentry-source-file":"EnumeratedTypes.tsx"}),(0,a.jsx)(et,{visible:!!L,selectedEnumeratedType:L,onClose:()=>q(null),onDelete:()=>{L&&(C.current=L.id.toString())},"data-sentry-element":"DeleteEnumeratedTypeModal","data-sentry-source-file":"EnumeratedTypes.tsx"})]})};var ei=n(68296),el=n(10508),eo=n(45218),ec=n(30688),ed=n(14354);let eu=()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ec.zY,{size:"large","data-sentry-element":"PageHeader","data-sentry-source-file":"types.tsx",children:(0,a.jsx)(ec.Ys,{"data-sentry-element":"PageHeaderMeta","data-sentry-source-file":"types.tsx",children:(0,a.jsxs)(ec.tq,{"data-sentry-element":"PageHeaderSummary","data-sentry-source-file":"types.tsx",children:[(0,a.jsx)(ec.RR,{"data-sentry-element":"PageHeaderTitle","data-sentry-source-file":"types.tsx",children:"Database Enumerated Types"}),(0,a.jsx)(ec.NV,{"data-sentry-element":"PageHeaderDescription","data-sentry-source-file":"types.tsx",children:"Custom data types that you can use in your database tables or functions"})]})})}),(0,a.jsx)(eo.L,{size:"large","data-sentry-element":"PageContainer","data-sentry-source-file":"types.tsx",children:(0,a.jsx)(ed.d8,{"data-sentry-element":"PageSection","data-sentry-source-file":"types.tsx",children:(0,a.jsx)(ed.KP,{"data-sentry-element":"PageSectionContent","data-sentry-source-file":"types.tsx",children:(0,a.jsx)(es,{"data-sentry-element":"EnumeratedTypes","data-sentry-source-file":"types.tsx"})})})})]});eu.getLayout=e=>(0,a.jsx)(el.A,{children:(0,a.jsx)(ei.A,{title:"Database",children:e})});let em=eu},81536:(e,t,n)=>{"use strict";n.d(t,{p:()=>o});var a=n(67850),r=n(78510),s=n(24523),i=n(99423);async function l(e,t){let{projectRef:n,connectionString:a}=e;if(!n)throw Error("projectRef is required");let i=new Headers;a&&i.set("x-connection-encrypted",a);let{data:l,error:o}=await (0,s.Jt)("/platform/pg-meta/{ref}/types",{params:{header:{"x-connection-encrypted":a,"x-pg-application-name":r.r},path:{ref:n}},headers:Object.fromEntries(i),signal:t});return o&&(0,s.H4)(o),l}let o=function(e){let{projectRef:t,connectionString:n}=e,{enabled:r=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.I)({queryKey:i.K.list(t),queryFn:e=>{let{signal:a}=e;return l({projectRef:t,connectionString:n},a)},enabled:r&&void 0!==t,...s})}},84406:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,a=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,o=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,d=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,m=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,y=n?Symbol.for("react.suspense_list"):60120,h=n?Symbol.for("react.memo"):60115,x=n?Symbol.for("react.lazy"):60116,f=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,j=n?Symbol.for("react.responder"):60118,v=n?Symbol.for("react.scope"):60119;function b(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case d:case u:case s:case l:case i:case p:return e;default:switch(e=e&&e.$$typeof){case c:case m:case x:case h:case o:return e;default:return t}}case r:return t}}}function S(e){return b(e)===u}t.AsyncMode=d,t.ConcurrentMode=u,t.ContextConsumer=c,t.ContextProvider=o,t.Element=a,t.ForwardRef=m,t.Fragment=s,t.Lazy=x,t.Memo=h,t.Portal=r,t.Profiler=l,t.StrictMode=i,t.Suspense=p,t.isAsyncMode=function(e){return S(e)||b(e)===d},t.isConcurrentMode=S,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===o},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},t.isForwardRef=function(e){return b(e)===m},t.isFragment=function(e){return b(e)===s},t.isLazy=function(e){return b(e)===x},t.isMemo=function(e){return b(e)===h},t.isPortal=function(e){return b(e)===r},t.isProfiler=function(e){return b(e)===l},t.isStrictMode=function(e){return b(e)===i},t.isSuspense=function(e){return b(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===u||e===l||e===i||e===p||e===y||"object"==typeof e&&null!==e&&(e.$$typeof===x||e.$$typeof===h||e.$$typeof===o||e.$$typeof===c||e.$$typeof===m||e.$$typeof===g||e.$$typeof===j||e.$$typeof===v||e.$$typeof===f)},t.typeOf=b},84438:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var a=n(80263),r=n(72112),s=n(32157),i=n(23892),l=n(90376),o=n(53239),c=n(32775),d=n(80090),u=n(9620),m=n(99779),p=n(73640),y=n(20033),h=n(61548),x=n(29244),f=n(97757);let g=e=>{let{className:t,disabled:n=!1,size:g="tiny",showError:j=!0,selectedSchemaName:v,supportSelectAll:b=!1,excludedSchemas:S=[],onSelectSchema:w,onSelectCreateSchema:N,portal:k=!0,align:E="start"}=e,[A,C]=(0,o.useState)(!1),{can:P}=(0,d.Qp)(r.aG.TENANT_SQL_ADMIN_WRITE,"schemas"),{data:T}=(0,u.YA)(),{data:_,isLoading:D,isSuccess:z,isError:$,error:R,refetch:M}=(0,c.w$)({projectRef:null==T?void 0:T.ref,connectionString:null==T?void 0:T.connectionString}),F=(_||[]).filter(e=>!S.includes(e.name)).sort((e,t)=>e.name.localeCompare(t.name));return(0,a.jsxs)("div",{className:t,"data-sentry-component":"SchemaSelector","data-sentry-source-file":"SchemaSelector.tsx",children:[D&&(0,a.jsx)(m.$,{type:"default",className:"w-full [&>span]:w-full",size:g,disabled:!0,children:(0,a.jsx)(p.E,{className:"w-full h-3 bg-foreground-muted"})},"schema-selector-skeleton"),j&&$&&(0,a.jsxs)(y.Fc,{variant:"warning",className:"!px-3 !py-3",children:[(0,a.jsx)(y.XL,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,a.jsxs)(y.TN,{className:"text-xs mb-2 break-words",children:["Error: ",null==R?void 0:R.message]}),(0,a.jsx)(m.$,{type:"default",size:"tiny",onClick:()=>M(),children:"Reload schemas"})]}),z&&(0,a.jsxs)(h.AM,{open:A,onOpenChange:C,modal:!1,children:[(0,a.jsx)(h.Wv,{asChild:!0,children:(0,a.jsx)(m.$,{size:g,disabled:n,type:"default","data-testid":"schema-selector",className:"w-full [&>span]:w-full !pr-1 space-x-1",iconRight:(0,a.jsx)(s.A,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:v?(0,a.jsxs)("div",{className:"w-full flex gap-1",children:[(0,a.jsx)("p",{className:"text-foreground-lighter",children:"schema"}),(0,a.jsx)("p",{className:"text-foreground",children:"*"===v?"All schemas":v})]}):(0,a.jsx)("div",{className:"w-full flex gap-1",children:(0,a.jsx)("p",{className:"text-foreground-lighter",children:"Choose a schema..."})})})}),(0,a.jsx)(h.hl,{className:"p-0 min-w-[200px] pointer-events-auto",side:"bottom",align:E,portal:k,sameWidthAsTrigger:!0,children:(0,a.jsxs)(x.uB,{children:[(0,a.jsx)(x.G7,{placeholder:"Find schema..."}),(0,a.jsxs)(x.oI,{children:[(0,a.jsx)(x.xL,{children:"No schemas found"}),(0,a.jsx)(x.L$,{children:(0,a.jsxs)(f.FK,{className:(F||[]).length>7?"h-[210px]":"",children:[b&&(0,a.jsxs)(x.h_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{w("*"),C(!1)},onClick:()=>{w("*"),C(!1)},children:[(0,a.jsx)("span",{children:"All schemas"}),"*"===v&&(0,a.jsx)(i.A,{className:"text-brand",strokeWidth:2,size:16})]},"select-all"),null==F?void 0:F.map(e=>(0,a.jsxs)(x.h_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{w(e.name),C(!1)},onClick:()=>{w(e.name),C(!1)},children:[(0,a.jsx)("span",{children:e.name}),v===e.name&&(0,a.jsx)(i.A,{className:"text-brand",strokeWidth:2,size:16})]},e.id))]})}),void 0!==N&&P&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.fx,{}),(0,a.jsx)(x.L$,{children:(0,a.jsxs)(x.h_,{className:"cursor-pointer flex items-center gap-x-2 w-full",onSelect:()=>{N(),C(!1)},onClick:()=>{N(),C(!1)},children:[(0,a.jsx)(l.A,{size:12}),"Create a new schema"]})})]})]})]})})]})]})}},98103:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]])},99940:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(86848).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])}},e=>{e.O(0,[74335,60858,15599,16110,27764,36538,44033,26616,55754,76984,72391,35035,40545,596,10508,48340,75187,29471,91312,63335,90636,46593,38792],()=>e(e.s=40247)),_N_E=e.O()}]);