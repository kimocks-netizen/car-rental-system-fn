try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="55dd542e-f90c-4c74-9be1-dbd2d5984d3b",e._sentryDebugIdIdentifier="sentry-dbid-55dd542e-f90c-4c74-9be1-dbd2d5984d3b")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[57293],{1155:(e,t,n)=>{"use strict";n.d(t,{A:()=>P});var r=n(80263),a=n(86510),l=n(52555),s=n.n(l),o=n(73969),i=n(41591),c=n(20426),d=n(51355),u=n(80210),m=n(76984),f=n(59356),p=n(99842),x=n(13693),y=n(6843),h=n(90188);async function j(e){let{projectRef:t,connectionString:n,table:r,filters:a,roleImpersonationState:l}=e,s=(0,p.Nf)(function(e){var t;let{table:n,filters:r}=e,a=new m.Query().from(n.name,null!=(t=n.schema)?t:void 0).delete();return r.filter(e=>e.value&&""!==e.value).forEach(e=>{let t=(0,h.b)(n,e);a=a.filter(e.column,e.operator,t)}),a.toSql()}({table:r,filters:a}),l),{result:o}=await (0,f.E)({projectRef:t,connectionString:n,sql:s,isRoleImpersonationEnabled:(0,x._c)(null==l?void 0:l.role)});return o}let g=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,d.jE)();return(0,u.n)({mutationFn:e=>j(e),async onSuccess(t,n,a){let{projectRef:l,table:s}=n;await r.invalidateQueries({queryKey:y.j.tableRowsAndCount(l,s.id)}),await (null==e?void 0:e(t,n,a))},async onError(e,n,r){void 0===t?o.oR.error("Failed to delete all table rows: ".concat(e.message)):t(e,n,r)},...n})};var b=n(29445),v=n(41273),w=n(85039);async function N(e){let{projectRef:t,connectionString:n,table:r,rows:a,roleImpersonationState:l}=e,s=(0,p.Nf)(function(e){var t;let{table:n,rows:r}=e,{primaryKeys:a,error:l}=(0,h.j)({table:n});if(l)throw l;let s=new m.Query().from(n.name,null!=(t=n.schema)?t:void 0).delete();return null==a||a.forEach(e=>{let t=r.map(t=>t[e]);s=s.filter(e,"in",t)}),s.toSql()}({table:r,rows:a}),l),{result:o}=await (0,f.E)({projectRef:t,connectionString:n,sql:s,isRoleImpersonationEnabled:(0,x._c)(null==l?void 0:l.role)});return o}let S=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,d.jE)();return(0,u.n)({mutationFn:e=>N(e),async onSuccess(t,n,r){let{projectRef:l,table:s}=n;await a.invalidateQueries({queryKey:y.j.tableRowsAndCount(l,s.id)}),await (null==e?void 0:e(t,n,r))},async onError(e,n,a){if(void 0===t){let{table:t,rows:a}=n,l=e.message.includes("Please add a primary key column"),s=e.message.includes("violates foreign key constraint"),i=a.length>1;if(s){let n=t.name,a=e.message.split("on table ")[2].replaceAll('"',""),l=e.message.split("foreign key constraint")[1].split("on table")[0].replaceAll('"',""),s=i?"Unable to delete rows as one of them is currently referenced by a foreign key constraint from the table `".concat(a,"`."):"Unable to delete row as it is currently referenced by a foreign key constraint from the table `".concat(a,"`."),c="Set an on delete behavior on the foreign key relation `".concat(l,"` in the `").concat(a,"` table to automatically respond when row(s) are being deleted in the `").concat(n,"` table.");(0,o.oR)(s,{description:(0,r.jsx)(b.o,{content:c,className:"[&>p]:m-0"}),action:(0,r.jsx)("div",{className:"w-full flex gap-x-2 !mx-0 mt-3",children:(0,r.jsx)(v.A,{href:"".concat(w.aq,"/guides/database/postgres/cascade-deletes")})})})}else l?(0,o.oR)("Unable to delete row(s) as table has no primary keys",{description:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-foreground-light",children:"Add a primary key column to your table first to serve as a unique identifier for each row before updating or deleting the row."}),(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)(v.A,{href:"".concat(w.aq,"/guides/database/tables#primary-keys")})})]})}):o.oR.error("Failed to delete table row: ".concat(e.message))}else t(e,n,a)},...n})};async function C(e){let{projectRef:t,connectionString:n,table:r}=e,a=function(e){var t;let{table:n}=e;return new m.Query().from(n.name,null!=(t=n.schema)?t:void 0).truncate().toSql()}({table:r}),{result:l}=await (0,f.E)({projectRef:t,connectionString:n,sql:a});return l}let A=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,d.jE)();return(0,u.n)({mutationFn:e=>C(e),async onSuccess(t,n,a){let{projectRef:l,table:s}=n;await r.invalidateQueries({queryKey:y.j.tableRowsAndCount(l,s.id)}),await (null==e?void 0:e(t,n,a))},async onError(e,n,r){void 0===t?o.oR.error("Failed to truncate table row: ".concat(e.message)):t(e,n,r)},...n})};var D=n(31582),R=n(9620),k=n(71344),T=n(98357),E=n(20033),_=n(99779),M=n(68421);let P=e=>{var t,n,l,d,u,m,f,p,y;let{selectedTable:h,onTableDeleted:j}=e,{data:b}=(0,R.YA)(),v=(0,k.ap)(),{filters:w,onApplyFilters:N}=(0,i.M)(),{mutate:C}=(0,c.T)({onSuccess:()=>{var e;if((null==(e=v.confirmationDialog)?void 0:e.type)!=="column")return;let t=v.confirmationDialog.column;(e=>{let{columnName:t}=e;N(w.filter(e=>e.column!==t))})({columnName:t.name}),o.oR.success('Successfully deleted column "'.concat(t.name,'"'))},onError:e=>{var t;if((null==(t=v.confirmationDialog)?void 0:t.type)!=="column")return;let n=v.confirmationDialog.column;o.oR.error("Failed to delete ".concat(n.name,": ").concat(e.message))},onSettled:()=>{v.closeConfirmationDialog()}}),{mutate:P}=(0,D.A)({onSuccess:async()=>{o.oR.success('Successfully deleted table "'.concat(null==h?void 0:h.name,'"')),null==j||j()},onError:e=>{o.oR.error("Failed to delete ".concat(null==h?void 0:h.name,": ").concat(e.message))},onSettled:()=>{v.closeConfirmationDialog()}}),{mutate:$,isPending:L}=S({onSuccess:()=>{var e,t,n;(null==(e=v.confirmationDialog)?void 0:e.type)==="row"&&(null==(t=(n=v.confirmationDialog).callback)||t.call(n)),o.oR.success("Successfully deleted selected row(s)")},onSettled:()=>{v.closeConfirmationDialog()}}),{mutate:F,isPending:I}=g({onSuccess:()=>{var e,t,n;(null==(e=v.confirmationDialog)?void 0:e.type)==="row"&&(null==(t=(n=v.confirmationDialog).callback)||t.call(n)),o.oR.success("Successfully deleted selected rows")},onError:e=>{o.oR.error("Failed to delete rows: ".concat(e.message))},onSettled:()=>{v.closeConfirmationDialog()}}),{mutate:q,isPending:O}=A({onSuccess:()=>{var e,t,n;(null==(e=v.confirmationDialog)?void 0:e.type)==="row"&&(null==(t=(n=v.confirmationDialog).callback)||t.call(n)),o.oR.success("Successfully deleted all rows from table")},onError:e=>{o.oR.error("Failed to delete rows: ".concat(e.message))},onSettled:()=>{v.closeConfirmationDialog()}}),z=(null==(t=v.confirmationDialog)?void 0:t.type)==="row"&&v.confirmationDialog.allRowsSelected,H=(null==(n=v.confirmationDialog)?void 0:n.type)==="row"?v.confirmationDialog.allRowsSelected?null!=(y=v.confirmationDialog.numRows)?y:0:v.confirmationDialog.rows.length:0,Q=((null==(l=v.confirmationDialog)?void 0:l.type)==="column"||(null==(d=v.confirmationDialog)?void 0:d.type)==="table")&&v.confirmationDialog.isDeleteWithCascade,W=async()=>{var e;if((null==(e=v.confirmationDialog)?void 0:e.type)!=="column"||void 0===b)return;let t=v.confirmationDialog.column;void 0!==t&&C({column:t,cascade:Q,projectRef:b.ref,connectionString:null==b?void 0:b.connectionString})},Y=async()=>{var e;(null==(e=v.confirmationDialog)?void 0:e.type)==="table"&&void 0!==h&&P({projectRef:null==b?void 0:b.ref,connectionString:null==b?void 0:b.connectionString,id:h.id,name:h.name,schema:h.schema,cascade:Q})},K=(0,x.Qj)(),U=async()=>{var e;if(!b)return console.error("Project ref is required");if(!h)return console.error("Selected table required");if((null==(e=v.confirmationDialog)?void 0:e.type)!=="row")return;let t=v.confirmationDialog.rows;if(v.confirmationDialog.allRowsSelected)if(0===w.length){if(void 0!==K().role)return v.closeConfirmationDialog(),o.oR.error("Table truncation is not supported when impersonating a role");q({projectRef:b.ref,connectionString:b.connectionString,table:h})}else F({projectRef:b.ref,connectionString:b.connectionString,table:h,filters:w,roleImpersonationState:K()});else $({projectRef:b.ref,connectionString:b.connectionString,table:h,rows:t,roleImpersonationState:K()})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.A,{variant:"destructive",size:"small",visible:(null==(u=v.confirmationDialog)?void 0:u.type)==="column",title:'Confirm deletion of column "'.concat((null==(m=v.confirmationDialog)?void 0:m.type)==="column"&&v.confirmationDialog.column.name,'"'),confirmLabel:"Delete",confirmLabelLoading:"Deleting",onCancel:()=>{v.closeConfirmationDialog()},onConfirm:W,"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"DeleteConfirmationDialogs.tsx",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("p",{className:"text-sm text-foreground-light",children:"Are you sure you want to delete the selected column? This action cannot be undone."}),(0,r.jsx)(T.A,{label:"Drop column with cascade?",description:"Deletes the column and its dependent objects",checked:Q,onChange:()=>v.toggleConfirmationIsWithCascade(),"data-sentry-element":"Checkbox","data-sentry-source-file":"DeleteConfirmationDialogs.tsx"}),Q&&(0,r.jsxs)(E.Fc,{variant:"warning",title:"Warning: Dropping with cascade may result in unintended consequences",children:[(0,r.jsx)(E.XL,{children:"All dependent objects will be removed, as will any objects that depend on them, recursively."}),(0,r.jsx)(E.TN,{children:(0,r.jsx)(_.$,{asChild:!0,size:"tiny",type:"default",icon:(0,r.jsx)(a.A,{}),children:(0,r.jsx)(s(),{href:"https://www.postgresql.org/docs/current/ddl-depend.html",target:"_blank",rel:"noreferrer",children:"About dependency tracking"})})})]})]})}),(0,r.jsx)(M.A,{variant:"destructive",size:"small",visible:(null==(f=v.confirmationDialog)?void 0:f.type)==="table",title:(0,r.jsx)("span",{className:"break-words",children:'Confirm deletion of table "'.concat(null==h?void 0:h.name,'"')}),confirmLabel:"Delete",confirmLabelLoading:"Deleting",onCancel:()=>{v.closeConfirmationDialog()},onConfirm:Y,"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"DeleteConfirmationDialogs.tsx",children:(0,r.jsxs)("div",{"data-testid":"confirm-delete-table-modal",className:"space-y-4",children:[(0,r.jsx)("p",{className:"text-sm text-foreground-light",children:"Are you sure you want to delete the selected table? This action cannot be undone."}),(0,r.jsx)(T.A,{label:"Drop table with cascade?",description:"Deletes the table and its dependent objects",checked:Q,onChange:()=>v.toggleConfirmationIsWithCascade(!Q),"data-sentry-element":"Checkbox","data-sentry-source-file":"DeleteConfirmationDialogs.tsx"}),Q&&(0,r.jsxs)(E.Fc,{variant:"warning",children:[(0,r.jsx)(E.XL,{children:"Warning: Dropping with cascade may result in unintended consequences"}),(0,r.jsx)(E.TN,{children:"All dependent objects will be removed, as will any objects that depend on them, recursively."}),(0,r.jsx)(E.TN,{className:"mt-4",children:(0,r.jsx)(_.$,{asChild:!0,size:"tiny",type:"default",icon:(0,r.jsx)(a.A,{}),children:(0,r.jsx)(s(),{href:"https://www.postgresql.org/docs/current/ddl-depend.html",target:"_blank",rel:"noreferrer",children:"About dependency tracking"})})})]})]})}),(0,r.jsx)(M.A,{variant:"destructive",size:"small",visible:(null==(p=v.confirmationDialog)?void 0:p.type)==="row",title:(0,r.jsxs)("p",{className:"break-words",children:[(0,r.jsx)("span",{children:"Confirm to delete the selected row"}),(0,r.jsx)("span",{children:H>1&&"s"})]}),confirmLabel:"Delete",confirmLabelLoading:"Deleting",onCancel:()=>v.closeConfirmationDialog(),onConfirm:()=>U(),loading:O||L||I,"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"DeleteConfirmationDialogs.tsx",children:(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("p",{className:"text-sm text-foreground-light",children:[(0,r.jsx)("span",{children:"Are you sure you want to delete "}),(0,r.jsxs)("span",{children:[z?"all":"the selected"," "]}),(0,r.jsx)("span",{children:H>1&&"".concat(H," ")}),(0,r.jsx)("span",{children:"row"}),(0,r.jsx)("span",{children:H>1&&"s"}),(0,r.jsx)("span",{children:"? This action cannot be undone."})]})})})]})}},18306:(e,t,n)=>{"use strict";e.exports=n(84406)},21416:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(80263),a=n(52555),l=n.n(a),s=n(24487),o=n(21650),i=n(99779);let c=e=>{let{name:t="",isActive:n,isExternal:a,icon:c,rightIcon:d,url:u="",target:m="_self",onClick:f,textClassName:p="",hoverText:x="",label:y}=e,h=(0,r.jsx)(s.Ay.Item,{icon:c,rounded:!0,active:n,onClick:f,children:(0,r.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,r.jsxs)("div",{title:x||("string"==typeof t?t:""),className:"flex space-between items-center gap-2 truncate w-full "+p,children:[(0,r.jsx)("span",{className:"truncate flex-1",children:t}),void 0!==y&&(0,r.jsx)(o.E,{variant:"warning",size:"tiny",children:y})]}),d&&(0,r.jsx)("div",{children:d})]})});return u?a?(0,r.jsx)(i.$,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:c,children:(0,r.jsx)(l(),{href:u,target:"_blank",rel:"noreferrer",children:t})}):(0,r.jsx)(l(),{href:u,className:"block",target:m,children:h}):h}},22730:(e,t,n)=>{"use strict";n.d(t,{z:()=>d});var r=n(78510),a=n(67850),l=n(24523),s=n(9620),o=n(85039),i=n(87727);async function c(e,t,n){let{projectRef:a,connectionString:s}=e;if(!a)throw Error("projectRef is required");let o=new Headers(n);s&&o.set("x-connection-encrypted",s);let{data:i,error:c}=await (0,l.Jt)("/platform/pg-meta/{ref}/extensions",{params:{header:{"x-connection-encrypted":s,"x-pg-application-name":r.r},path:{ref:a}},headers:o,signal:t});return c&&(0,l.H4)(c),i}let d=function(e){let{projectRef:t,connectionString:n}=e,{enabled:r=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{data:d}=(0,s.YA)(),u=(null==d?void 0:d.status)===o.BU.ACTIVE_HEALTHY;return(0,a.I)({queryKey:i.I.list(t),queryFn:e=>{let{signal:r}=e;return c({projectRef:t,connectionString:n},r)},enabled:r&&void 0!==t&&u,...l})}},24487:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>m});var r=n(80263),a=n(53239),l=n(7981),s=n(80100);function o(e){let{children:t,className:n,tag:a="div",style:l}=e;return(0,r.jsx)("".concat(a),{style:l,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}o.Title=function(e){let{className:t,level:n=1,children:a,style:l}=e;return(0,r.jsx)("h".concat(n),{style:l,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:a})},o.Text=function(e){let{className:t,children:n,style:a,type:l,disabled:s,mark:o,code:i,keyboard:c,underline:d,strikethrough:u,strong:m,small:f}=e;return i?(0,r.jsx)("code",{style:a,children:n}):o?(0,r.jsx)("mark",{style:a,children:n}):c?(0,r.jsx)("kbd",{style:a,children:n}):m?(0,r.jsx)("strong",{style:a,children:n}):(0,r.jsx)("span",{style:a,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:n})},o.Link=function(e){let{children:t,target:n="_blank",href:a,className:l,onClick:s,style:o}=e;return(0,r.jsx)("a",{onClick:s,href:a,target:n,rel:"noopener noreferrer",style:o,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})};let i=(0,a.createContext)({type:"text"}),c=e=>{let{type:t}=e;return(0,r.jsx)(i.Provider,{value:{type:t},"data-sentry-element":"MenuContext.Provider","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},d=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function u(e){let{children:t,className:n,ulClassName:a,style:l,type:s="text"}=e;return(0,r.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:n,style:l,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)(c,{type:s,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)("ul",{className:a,children:t})})})}u.Item=function(e){let{children:t,icon:n,active:a,rounded:o,onClick:i,doNotCloseOverlay:c=!1,showActiveBar:u=!1,style:m}=e,f=(0,l.A)("menu"),{type:p}=d(),x=[f.item.base];x.push(f.item.variants[p].base),a?x.push(f.item.variants[p].active):x.push(f.item.variants[p].normal);let y=[f.item.content.base];a?y.push(f.item.content.active):y.push(f.item.content.normal);let h=[f.item.icon.base];return a?h.push(f.item.icon.active):h.push(f.item.icon.normal),(0,r.jsxs)("li",{role:"menuitem",className:(0,s.cn)("outline-none",x),style:m,onClick:i,"aria-current":a?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[n&&(0,r.jsx)("div",{className:"".concat(h.join(" ")," min-w-fit"),children:n}),(0,r.jsx)("span",{className:y.join(" "),children:t})]})},u.Group=function(e){let{children:t,icon:n,title:a}=e,s=(0,l.A)("menu"),{type:o}=d();return(0,r.jsxs)("div",{className:[s.group.base,s.group.variants[o]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[n&&(0,r.jsx)("span",{className:s.group.icon,children:n}),(0,r.jsx)("span",{className:s.group.content,children:a}),t]})},u.Misc=function(e){let{children:t}=e;return(0,r.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)(o.Text,{"data-sentry-element":"Typography.Text","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)("span",{children:t})})})};let m=u},37873:(e,t,n)=>{"use strict";n.d(t,{BS:()=>o,Dm:()=>d,HJ:()=>g,Rf:()=>h,Uw:()=>c,Vw:()=>w,Xr:()=>v,aw:()=>x,bV:()=>s,cJ:()=>f,dX:()=>u,eh:()=>i,fh:()=>b,gu:()=>m,sZ:()=>p,tn:()=>j,xp:()=>y});var r=n(80263),a=n(53239),l=n(80100);let s="mx-auto w-full max-w-[1200px]",o="px-4 @lg:px-6 @xl:px-10",i=(0,a.forwardRef)((e,t)=>{let{className:n,bottomPadding:a,size:s="default",...i}=e;return(0,r.jsx)("div",{ref:t,...i,className:(0,l.cn)("mx-auto w-full @container",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[s],o,a&&"pb-16",n)})}),c=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("header",{...a,ref:t,className:(0,l.cn)("w-full","flex-col gap-3 py-6",n)})}),d=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("h1",{ref:t,...a,className:(0,l.cn)(n)})}),u=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("p",{ref:t,...a,className:(0,l.cn)("text-sm text-foreground-light",n)})}),m=(0,a.forwardRef)((e,t)=>{let{className:n,isFullWidth:a,topPadding:s,...o}=e;return(0,r.jsx)("div",{ref:t,...o,className:(0,l.cn)("flex flex-col first:pt-12 py-6",a?"w-full":"gap-3 @md:grid-cols-12 @lg:grid",n)})}),f=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,...a,className:(0,l.cn)("w-full h-px bg-border",n)})}),p=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("h3",{ref:t,...a,className:(0,l.cn)("text-foreground text-xl",n)})}),x=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("p",{ref:t,...a,className:(0,l.cn)("text-sm text-foreground-light",n)})}),y=(0,a.forwardRef)((e,t)=>{let{className:n,children:a,title:s,...o}=e;return(0,r.jsxs)("div",{ref:t,...o,className:(0,l.cn)("col-span-4 xl:col-span-5 prose text-sm",n),children:[s&&(0,r.jsx)("h2",{children:s}),a]})}),h=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,...a,className:(0,l.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",n)})}),j=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,...a,className:(0,l.cn)("flex flex-col gap-3 items-center",n)})}),g=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,...a,className:(0,l.cn)("flex w-full items-center",n)})}),b=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,...a,className:(0,l.cn)("flex flex-row gap-3",n)})}),v=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,...a,className:(0,l.cn)("flex flex-col gap-3","min-w-[420px]",n)})}),w=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,...a,className:(0,l.cn)(s,o,"my-8 flex flex-col gap-8",n)})});c.displayName="ScaffoldHeader",d.displayName="ScaffoldTitle",u.displayName="ScaffoldDescription",i.displayName="ScaffoldContainer",f.displayName="ScaffoldDivider",m.displayName="ScaffoldSection",v.displayName="ScaffoldColumn",y.displayName="ScaffoldSectionDetail",h.displayName="ScaffoldSectionContent",j.displayName="ScaffoldFilterAndContent",g.displayName="ScaffoldActionsContainer",b.displayName="ScaffoldActionsGroup",w.displayName="ScaffoldContainerLegacy",p.displayName="ScaffoldSectionTitle",x.displayName="ScaffoldSectionDescription"},55446:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>K});var r=n(80263),a=n(76196),l=n(22891),s=n(72112),o=n(83927),i=n.n(o),c=n(23019),d=n(31092),u=n(90376),m=n(23892),f=n(68152),p=n(77444),x=n(3225),y=n(33922),h=n(52555),j=n.n(h),g=n(53239),b=n(68856),v=n(44168),w=n(23729),N=n(89077),S=n(53931),C=n(57648),A=n(52641),D=n(80090),R=n(9620),k=n(63335),T=n(99779),E=n(80421),_=n(21162),M=n(30404),P=n(35693);let $=e=>{var t,n,a,o,h;let{onAddColumn:$=i(),onEditColumn:L=i(),onDeleteColumn:F=i()}=e,{id:I,ref:q}=(0,l.g)(),O=I?Number(I):void 0,{data:z}=(0,R.YA)(),{data:H,error:Q,isError:W,isLoading:Y,isSuccess:K}=(0,C.Pk)({projectRef:null==z?void 0:z.ref,connectionString:null==z?void 0:z.connectionString,id:O}),[U,B]=(0,g.useState)(""),G=(0,A.KO)(H),X=null!=(a=0===U.length?null!=(n=null==H?void 0:H.columns)?n:[]:null==H||null==(t=H.columns)?void 0:t.filter(e=>e.name.includes(U)))?a:[],{isSchemaLocked:V}=(0,k.BQ)({schema:null!=(o=null==H?void 0:H.schema)?o:""}),{can:J}=(0,D.Qp)(s.aG.TENANT_SQL_ADMIN_WRITE,"columns");return(0,r.jsxs)("div",{className:"space-y-4","data-sentry-component":"ColumnList","data-sentry-source-file":"ColumnList.tsx",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(T.$,{asChild:!0,type:"outline",icon:(0,r.jsx)(c.A,{}),style:{padding:"5px"},"data-sentry-element":"Button","data-sentry-source-file":"ColumnList.tsx",children:(0,r.jsx)(j(),{href:"/project/".concat(q,"/database/tables"),"data-sentry-element":"Link","data-sentry-source-file":"ColumnList.tsx"})}),(0,r.jsx)(E.A,{size:"small",placeholder:"Filter columns",value:U,onChange:e=>B(e.target.value),icon:(0,r.jsx)(d.A,{size:12}),"data-sentry-element":"Input","data-sentry-source-file":"ColumnList.tsx"})]}),!V&&G&&(0,r.jsx)(w.G,{icon:(0,r.jsx)(u.A,{}),disabled:!J,onClick:()=>$(),tooltip:{content:{side:"bottom",text:J?void 0:"You need additional permissions to create columns"}},children:"New column"})]}),V&&(0,r.jsx)(P.i,{schema:null!=(h=null==H?void 0:H.schema)?h:"",entity:"columns"}),Y&&(0,r.jsx)(S.yV,{}),W&&(0,r.jsx)(v.A,{error:Q,subject:'Failed to retrieve columns for table "'.concat(null==H?void 0:H.schema,".").concat(null==H?void 0:H.name,'"')}),K&&(0,r.jsx)(r.Fragment,{children:0===X.length?(0,r.jsx)(N.o,{searchString:U,onResetFilter:()=>B("")}):(0,r.jsx)("div",{children:(0,r.jsx)(b.A,{head:[(0,r.jsx)(b.A.th,{children:"Name"},"name"),(0,r.jsx)(b.A.th,{className:"hidden lg:table-cell",children:"Description"},"description"),(0,r.jsx)(b.A.th,{children:"Data Type"},"type"),(0,r.jsx)(b.A.th,{children:"Format"},"format"),(0,r.jsx)(b.A.th,{className:"text-center",children:"Nullable"},"format"),(0,r.jsx)(b.A.th,{},"buttons")],body:X.map(e=>(0,r.jsxs)(b.A.tr,{className:"border-t",children:[(0,r.jsx)(b.A.td,{children:(0,r.jsx)("p",{children:e.name})}),(0,r.jsx)(b.A.td,{className:"break-all whitespace-normal hidden xl:table-cell",children:null!==e.comment?(0,r.jsx)("p",{title:e.comment,children:e.comment}):(0,r.jsx)("p",{className:"text-border-stronger",children:"No description"})}),(0,r.jsx)(b.A.td,{children:(0,r.jsx)("code",{className:"text-xs",children:e.data_type})}),(0,r.jsx)(b.A.td,{className:"font-mono text-xs",children:(0,r.jsx)("code",{className:"text-xs",children:e.format})}),(0,r.jsx)(b.A.td,{className:"font-mono text-xs",children:e.is_nullable?(0,r.jsx)(m.A,{size:16,className:"mx-auto"}):(0,r.jsx)(f.A,{size:16,className:"mx-auto"})}),(0,r.jsx)(b.A.td,{className:"text-right",children:!V&&G&&(0,r.jsxs)(_.rI,{children:[(0,r.jsx)(_.ty,{asChild:!0,children:(0,r.jsx)(T.$,{type:"default",className:"px-1",icon:(0,r.jsx)(p.A,{})})}),(0,r.jsxs)(_.SQ,{side:"bottom",align:"end",className:"w-32",children:[(0,r.jsxs)(M.m_,{children:[(0,r.jsx)(M.k$,{children:(0,r.jsxs)(_._2,{disabled:!J,onClick:()=>L(e),className:"space-x-2",children:[(0,r.jsx)(x.A,{size:12}),(0,r.jsx)("p",{children:"Edit column"})]})}),!J&&(0,r.jsx)(M.ZI,{side:"bottom",children:"Additional permissions required to edit column"})]}),(0,r.jsxs)(M.m_,{children:[(0,r.jsx)(M.k$,{children:(0,r.jsxs)(_._2,{disabled:!J||V,onClick:()=>F(e),className:"space-x-2",children:[(0,r.jsx)(y.A,{stroke:"red",size:12}),(0,r.jsx)("p",{children:"Delete column"})]})}),!J&&(0,r.jsx)(M.ZI,{side:"bottom",children:"Additional permissions required to delete column"})]})]})]})})]},e.name))})})})]})};var L=n(1155),F=n(90065),I=n(68296),q=n(10508),O=n(37873),z=n(91205),H=n(71344),Q=n(10247),W=n(16488);let Y=()=>{var e;let t=(0,H.ap)(),{id:n}=(0,l.g)(),s=n?Number(n):void 0,{data:o}=(0,R.YA)(),{data:i,isLoading:c}=(0,C.Pk)({projectRef:null==o?void 0:o.ref,connectionString:null==o?void 0:o.connectionString,id:s});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"[id].tsx",children:(0,r.jsx)(O.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"[id].tsx",children:(0,r.jsxs)("div",{className:"col-span-12 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(z.M,{className:"!mb-0 !w-fit !whitespace-nowrap",title:"Database Tables","data-sentry-element":"FormHeader","data-sentry-source-file":"[id].tsx"}),(0,r.jsx)(a.A,{size:18,strokeWidth:1.5,className:"text-foreground-light","data-sentry-element":"ChevronRight","data-sentry-source-file":"[id].tsx"}),c?(0,r.jsx)(W.Ay,{className:"w-40"}):(0,r.jsx)(z.M,{className:"!mb-0",title:null!=(e=null==i?void 0:i.name)?e:""})]}),(0,r.jsx)($,{onAddColumn:t.onAddColumn,onEditColumn:t.onEditColumn,onDeleteColumn:t.onDeleteColumn,"data-sentry-element":"ColumnList","data-sentry-source-file":"[id].tsx"})]})})}),(null==o?void 0:o.ref)!==void 0&&void 0!==i&&(0,A.KO)(i)&&(0,r.jsxs)(Q.HQ,{projectRef:null==o?void 0:o.ref,table:i,children:[(0,r.jsx)(L.A,{selectedTable:i}),(0,r.jsx)(F.H,{includeColumns:!0,selectedTable:i})]},"table-editor-table-".concat(i.id))]})};Y.getLayout=e=>(0,r.jsx)(q.A,{children:(0,r.jsx)(I.A,{title:"Database",children:e})});let K=Y},57384:(e,t,n)=>{"use strict";n.d(t,{k:()=>s});var r=n(23850),a=n(53239),l=n(22891);let s=()=>{var e;let{ref:t}=(0,l.g)(),n=t&&t.length>0&&window.localStorage.getItem(l.rS.LAST_SELECTED_SCHEMA(t))||"public",[s,o]=(e=(0,a.useMemo)(()=>n,[t]),(0,r.ZA)("schema",r.tU.withDefault(e).withOptions({clearOnDefault:!1})));return(0,a.useEffect)(()=>{t&&t.length>0&&window.localStorage.setItem(l.rS.LAST_SELECTED_SCHEMA(t),s)},[s,t]),{selectedSchema:s,setSelectedSchema:o}}},63563:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/database/tables/[id]",function(){return n(55446)}])},68296:(e,t,n)=>{"use strict";n.d(t,{A:()=>x});var r=n(80263),a=n(80814),l=n(91958),s=n(93873),o=n(22730),i=n(78937),c=n(2657),d=n(9620),u=n(9497),m=n(29471),f=n(54278);let p=()=>{let{data:e}=(0,d.YA)(),t=(0,a.useRouter)().pathname.split("/")[4],{data:n}=(0,o.z)({projectRef:null==e?void 0:e.ref,connectionString:null==e?void 0:e.connectionString}),{data:u}=(0,i.Q)({projectRef:null==e?void 0:e.ref}),m=void 0!==(null!=n?n:[]).find(e=>"pg_net"===e.name),p=(null==u?void 0:u.selected_addons.find(e=>"pitr"===e.type))!==void 0,x=(0,l.p4)(),{databaseReplication:y,databaseRoles:h,integrationsWrappers:j}=(0,c.x)(["database:replication","database:roles","integrations:wrappers"]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.l,{page:t,menu:(0,f.k)(e,{pgNetExtensionExists:m,pitrEnabled:p,columnLevelPrivileges:x,showPgReplicate:y,showRoles:h,showWrappers:j}),"data-sentry-element":"ProductMenu","data-sentry-source-file":"DatabaseLayout.tsx"})})},x=(0,u.r)(e=>{let{children:t}=e;return(0,r.jsx)(m.k,{product:"Database",productMenu:(0,r.jsx)(p,{}),isBlocking:!1,"data-sentry-element":"ProjectLayout","data-sentry-component":"DatabaseLayout","data-sentry-source-file":"DatabaseLayout.tsx",children:t})})},78910:(e,t,n)=>{"use strict";var r=n(18306),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},l={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function i(e){return r.isMemo(e)?s:o[e.$$typeof]||a}o[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[r.Memo]=s;var c=Object.defineProperty,d=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(p){var a=f(n);a&&a!==p&&e(t,a,r)}var s=d(n);u&&(s=s.concat(u(n)));for(var o=i(t),x=i(n),y=0;y<s.length;++y){var h=s[y];if(!l[h]&&!(r&&r[h])&&!(x&&x[h])&&!(o&&o[h])){var j=m(n,h);try{c(t,h,j)}catch(e){}}}}return t}},79918:(e,t,n)=>{"use strict";n.d(t,{W:()=>s});var r=n(74065),a=n(80814),l=n(53239);function s(){let{replace:e=!0,arrayKeys:t=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=JSON.stringify(t),s=(0,l.useMemo)(()=>new Set(t),[n]),o=(0,a.useRouter)(),i=(0,l.useMemo)(()=>Object.fromEntries(Object.entries(o.query).map(e=>{let[t,n]=e;return s.has(t)?Array.isArray(n)?[t,n]:[t,[n]]:[t,n]})),[s,o.query]),c=(0,r.A)(i);return[i,(0,l.useCallback)(t=>{let n=c.current,r="function"==typeof t?t(n):t,a=Object.fromEntries(Object.entries({...n,...r}).filter(e=>{let[,t]=e;return!!t}));(e?o.replace:o.push)({pathname:o.pathname,query:a},void 0,{shallow:!0,scroll:!1})},[o,e])]}},84406:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,l=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,i=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,d=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,m=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,x=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,h=n?Symbol.for("react.block"):60121,j=n?Symbol.for("react.fundamental"):60117,g=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function v(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case d:case u:case l:case o:case s:case f:return e;default:switch(e=e&&e.$$typeof){case c:case m:case y:case x:case i:return e;default:return t}}case a:return t}}}function w(e){return v(e)===u}t.AsyncMode=d,t.ConcurrentMode=u,t.ContextConsumer=c,t.ContextProvider=i,t.Element=r,t.ForwardRef=m,t.Fragment=l,t.Lazy=y,t.Memo=x,t.Portal=a,t.Profiler=o,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return w(e)||v(e)===d},t.isConcurrentMode=w,t.isContextConsumer=function(e){return v(e)===c},t.isContextProvider=function(e){return v(e)===i},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return v(e)===m},t.isFragment=function(e){return v(e)===l},t.isLazy=function(e){return v(e)===y},t.isMemo=function(e){return v(e)===x},t.isPortal=function(e){return v(e)===a},t.isProfiler=function(e){return v(e)===o},t.isStrictMode=function(e){return v(e)===s},t.isSuspense=function(e){return v(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===l||e===u||e===o||e===s||e===f||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===x||e.$$typeof===i||e.$$typeof===c||e.$$typeof===m||e.$$typeof===j||e.$$typeof===g||e.$$typeof===b||e.$$typeof===h)},t.typeOf=v},89077:(e,t,n)=>{"use strict";n.d(t,{o:()=>s});var r=n(80263),a=n(80100),l=n(99779);let s=e=>{let{searchString:t,onResetFilter:n,className:s}=e;return(0,r.jsxs)("div",{className:(0,a.cn)("bg-surface-100 border border-default px-6 py-4 rounded flex items-center justify-between",s),"data-sentry-component":"NoSearchResults","data-sentry-source-file":"NoSearchResults.tsx",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("p",{className:"text-sm text-foreground",children:"No results found"}),(0,r.jsxs)("p",{className:"text-sm text-foreground-light",children:['Your search for "',t,'" did not return any results']})]}),void 0!==n&&(0,r.jsx)(l.$,{type:"default",onClick:()=>n(),children:"Reset filter"})]})}},91205:(e,t,n)=>{"use strict";n.d(t,{M:()=>s});var r=n(80263),a=n(80100),l=n(41273);let s=e=>{let{title:t,description:n,docsUrl:s,actions:o,className:i}=e;return(0,r.jsxs)("div",{className:(0,a.cn)("w-full mb-6 flex flex-col sm:flex-row md:items-center justify-between gap-4 ".concat(i)),"data-sentry-component":"FormHeader","data-sentry-source-file":"FormHeader.tsx",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("h3",{className:"text-foreground text-xl prose",children:t}),n&&(0,r.jsx)("p",{className:"prose text-sm max-w-2xl",children:n})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row md:items-center gap-x-2",children:[void 0!==s&&(0,r.jsx)(l.A,{href:s}),o]})]})}},93873:(e,t,n)=>{"use strict";n.d(t,{l:()=>o});var r=n(80263),a=n(24487),l=n(21650),s=n(21416);let o=e=>{let{page:t,menu:n}=e;return(0,r.jsx)("div",{className:"flex flex-col space-y-8","data-sentry-component":"ProductMenu","data-sentry-source-file":"index.tsx",children:(0,r.jsx)(a.Ay,{type:"pills","data-sentry-element":"Menu","data-sentry-source-file":"index.tsx",children:n.map((e,o)=>(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"my-6 space-y-8",children:(0,r.jsxs)("div",{className:"mx-3",children:[(0,r.jsx)(a.Ay.Group,{title:e.title?(0,r.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,r.jsx)("span",{children:e.title}),e.isPreview&&(0,r.jsx)(l.E,{variant:"warning",children:"Not production ready"})]}):null}),(0,r.jsx)("div",{children:e.items.map(e=>{let n=e.pages?e.pages.includes(null!=t?t:""):t===e.key;return(0,r.jsx)(s.A,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:n,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),o!==n.length-1&&(0,r.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}},99287:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(80263),a=n(46115),l=n(53239),s=n(7981);let o=e=>{var t,n,o;let{defaultActiveId:i,activeId:c,type:d="pills",size:u="tiny",block:m,onChange:f,onClick:p,scrollable:x,wrappable:y,addOnBefore:h,addOnAfter:j,listClassNames:g,baseClassNames:b,refs:v,children:w}=e,N=l.Children.toArray(w),[S,C]=(0,l.useState)(null!=(o=null!=c?c:i)?o:null==N||null==(n=N[0])||null==(t=n.props)?void 0:t.id);(0,l.useMemo)(()=>{c&&c!==S&&C(c)},[c]);let A=(0,s.A)("tabs");function D(e){null==p||p(e),e!==S&&(null==f||f(e),C(e))}let R=[A[d].list];return x&&R.push(A.scrollable),y&&R.push(A.wrappable),g&&R.push(g),(0,r.jsxs)(a.bL,{value:S,className:[A.base,b].join(" "),ref:null==v?void 0:v.base,"data-sentry-element":"TabsPrimitive.Root","data-sentry-component":"Tabs","data-sentry-source-file":"Tabs.tsx",children:[(0,r.jsxs)(a.B8,{className:R.join(" "),ref:null==v?void 0:v.list,"data-sentry-element":"TabsPrimitive.List","data-sentry-source-file":"Tabs.tsx",children:[h,N.map(e=>{let t=S===e.props.id,n=[A[d].base,A.size[u]];return t?n.push(A[d].active):n.push(A[d].inactive),m&&n.push(A.block),(0,r.jsxs)(a.l9,{onKeyDown:t=>{"Enter"===t.key&&(t.preventDefault(),D(e.props.id))},onClick:()=>D(e.props.id),value:e.props.id,className:n.join(" "),children:[e.props.icon,(0,r.jsx)("span",{children:e.props.label}),e.props.iconRight]},"".concat(e.props.id,"-tab-button"))}),j]}),N]})};o.Panel=e=>{let{children:t,id:n,className:l}=e,o=(0,s.A)("tabs");return(0,r.jsx)(a.UC,{value:n,className:[o.content,l].join(" "),"data-sentry-element":"TabsPrimitive.Content","data-sentry-component":"Panel","data-sentry-source-file":"Tabs.tsx",children:t})};let i=o}},e=>{e.O(0,[74335,60858,15599,16110,27764,36538,44033,26616,652,55754,4499,76984,72391,35035,40545,596,10508,48340,75187,29471,63335,84698,39831,90636,46593,38792],()=>e(e.s=63563)),_N_E=e.O()}]);