try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="62d54ad3-6712-498f-8dc7-8a360e4d1dba",e._sentryDebugIdIdentifier="sentry-dbid-62d54ad3-6712-498f-8dc7-8a360e4d1dba")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[51697],{12719:(e,t,s)=>{s.d(t,{N:()=>n});var n=function(e){return e.API="api",e.STORAGE="storage",e.AUTH="auth",e.QUERY_PERFORMANCE="query_performance",e.DATABASE="database",e}({})},14981:(e,t,s)=>{s.d(t,{_:()=>S});var n=s(80263),a=s(53434),r=s.n(a),o=s(80356),l=s(66646),i=s(28009),c=s(93713),u=s(90309),m=s(52555),_=s.n(m),d=s(80814),p=s(53239),h=s(80100),g=s(22891),f=s(23729),y=s(6436),b=s(66e3),x=s(74544),q=s(4969),v=s(21650);let S=e=>{let{format:t,highlightedValue:s,highlightedLabel:a,hideHighlightedValue:m=!1,hideHighlightedLabel:S=!1,hideHighlightArea:j=!1,title:N,minimalHeader:E=!1,hideChartType:w=!1,chartStyle:T="bar",onChartStyleChange:O,showMaxValue:I=!1,setShowMaxValue:k,docsUrl:A,syncId:R,data:C,xAxisKey:L,yAxisKey:M,xAxisIsDate:H=!0,displayDateInUtc:D,customDateFormat:F,valuePrecision:P=2,shouldFormatBytes:U=!1,isNetworkChart:Y=!1,attributes:B,sql:G,titleTooltip:V,showNewBadge:J}=e,{hoveredIndex:W,isHovered:Q,isCurrentChart:z,setHover:K,clearHover:X}=(0,x.Z)(R||"default"),[Z,$]=(0,p.useState)(s),[ee,et]=(0,p.useState)(a),{ref:es}=(0,g.g)();(0,d.useRouter)(),(0,p.useEffect)(()=>{if(R&&null!==W&&Q&&C&&L&&M){let s=C[W];if(s){let n=s[M];if(B&&B.length>1){var e,t;let a=null!=(t=null==B||null==(e=B.filter(e=>e.omitFromTotal||e.isMaxValue||"reference-line"===e.provider))?void 0:e.map(e=>e.attribute))?t:[];n=Object.entries(s).filter(e=>{let[t,s]=e;return"number"==typeof s&&"timestamp"!==t&&"period_start"!==t&&!a.includes(t)&&B.some(e=>e.attribute===t&&!1!==e.enabled)}).reduce((e,t)=>{let[s,n]=t;return e+n},0)}$(n);let o=a;H&&s[L]?o=(e=>D?r()(e).utc():r()(e))(s[L]).format(F||"YYYY-MM-DD HH:mm:ss"):s[L]&&(o=s[L]),et(o)}}else $(s),et(a)},[W,Q,R,C,L,M,H,D,F,s,a,B]);let en=(0,n.jsxs)("div",{className:"flex flex-row items-center gap-x-2",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-x-2",children:[(0,n.jsx)("h3",{className:"text-foreground-lighter "+(E?"text-xs":"text-sm"),children:N}),V&&(0,n.jsx)(q.I,{children:V})]}),A&&(0,n.jsx)(f.G,{type:"text",className:"px-1",asChild:!0,tooltip:{content:{side:"top",text:"Read docs"}},children:(0,n.jsx)(_(),{href:A,target:"_blank",children:(0,n.jsx)(o.A,{className:"w-4 h-4 text-foreground-lighter"})})})]}),ea=(0,n.jsx)("h4",{className:"text-foreground text-xl font-normal ".concat(E?"text-base":"text-2xl"),children:void 0!==Z&&(e=>{if("number"!=typeof e)return e;if("function"==typeof t)return t(e);if(U){let t=Y?Math.abs(e):e;return(0,y.z3)(t,P)}return(0,b.Eg)(e,P)})(Z)}),er=(0,n.jsx)("h4",{className:"text-foreground-lighter text-xs",children:ee});if(E)return(0,n.jsxs)("div",{className:(0,h.cn)("flex flex-row items-center gap-x-4",j&&"hidden"),style:{minHeight:"1.8rem"},children:[N&&en,(0,n.jsxs)("div",{className:"flex flex-row items-baseline gap-x-2",children:[void 0!==s&&!m&&ea,!S&&er]})]});let eo=void 0!==s&&!m;return(0,n.jsxs)("div",{className:(0,h.cn)("flex-grow flex justify-between items-start min-h-16",j&&"hidden"),"data-sentry-component":"ChartHeader","data-sentry-source-file":"ChartHeader.tsx",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[N&&en,J&&(0,n.jsx)(v.E,{variant:"success",children:"New"})]}),(0,n.jsxs)("div",{className:"h-4",children:[eo&&ea,!S&&er]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[G?(0,n.jsx)(f.G,{type:"default",className:"px-1.5",asChild:!0,tooltip:{content:{side:"top",text:"Open in Log Explorer"}},children:(0,n.jsx)(_(),{href:"/project/".concat(es,"/logs/explorer?q=").concat(encodeURIComponent(G)),children:(0,n.jsx)(l.A,{className:"w-4 h-4 text-foreground-lighter"})})}):null,!w&&O&&(0,n.jsx)(f.G,{type:"default",className:"px-1.5",icon:"bar"===T?(0,n.jsx)(i.A,{}):(0,n.jsx)(c.A,{}),onClick:()=>O("bar"===T?"line":"bar"),tooltip:{content:{side:"top",text:"View as ".concat("bar"===T?"line chart":"bar chart")}}}),k&&(0,n.jsx)(f.G,{type:I?"default":"dashed",className:"px-1.5",icon:(0,n.jsx)(u.A,{className:I?"text-foreground-light":"text-foreground-lighter"}),onClick:()=>k(!I),tooltip:{content:{side:"top",text:"".concat(I?"Hide":"Show"," limit")}}})]})]})}},23463:(e,t,s)=>{s.d(t,{$_:()=>d,EV:()=>c,NY:()=>m,QW:()=>u,cO:()=>o,ig:()=>_,s3:()=>l,xm:()=>i});var n=s(53434),a=s.n(n),r=s(12719);let o=2;var l=function(e){return e.LAST_10_MINUTES="Last 10 minutes",e.LAST_30_MINUTES="Last 30 minutes",e.LAST_60_MINUTES="Last 60 minutes",e.LAST_3_HOURS="Last 3 hours",e.LAST_24_HOURS="Last 24 hours",e.LAST_7_DAYS="Last 7 days",e.LAST_14_DAYS="Last 14 days",e.LAST_28_DAYS="Last 28 days",e}({});let i=[{text:"Last 10 minutes",calcFrom:()=>a()().subtract(10,"minute").toISOString(),calcTo:()=>a()().toISOString(),availableIn:["free","pro","team","enterprise"]},{text:"Last 30 minutes",calcFrom:()=>a()().subtract(30,"minute").toISOString(),calcTo:()=>a()().toISOString(),availableIn:["free","pro","team","enterprise"]},{text:"Last 60 minutes",calcFrom:()=>a()().subtract(1,"hour").toISOString(),calcTo:()=>a()().toISOString(),default:!0,availableIn:["free","pro","team","enterprise"]},{text:"Last 3 hours",calcFrom:()=>a()().subtract(3,"hour").toISOString(),calcTo:()=>a()().toISOString(),availableIn:["free","pro","team","enterprise"]},{text:"Last 24 hours",calcFrom:()=>a()().subtract(1,"day").toISOString(),calcTo:()=>a()().toISOString(),availableIn:["free","pro","team","enterprise"]},{text:"Last 7 days",calcFrom:()=>a()().subtract(7,"day").toISOString(),calcTo:()=>a()().toISOString(),availableIn:["pro","team","enterprise"]},{text:"Last 14 days",calcFrom:()=>a()().subtract(14,"day").toISOString(),calcTo:()=>a()().toISOString(),availableIn:["team","enterprise"]},{text:"Last 28 days",calcFrom:()=>a()().subtract(28,"day").toISOString(),calcTo:()=>a()().toISOString(),availableIn:["team","enterprise"]}],c={iso_timestamp_start:i[0].calcFrom(),iso_timestamp_end:i[0].calcTo()},u=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(0===e.length)return"";let s=e.map(e=>{let t=e.key.split("."),s=[t[t.length-2],t[t.length-1]].join("."),n=e.key.includes(".")?s:e.key,a=e.value.toString().includes('"')||e.value.toString().includes("'"),r=!isNaN(Number(e.value)),o=!r&&a?e.value:"'".concat(e.value,"'"),l=!r&&String(o).toLowerCase(),i=r?e.value:l;switch(e.compare){case"matches":return"REGEXP_CONTAINS(".concat(n,", ").concat(i,")");case"is":default:return"".concat(n," = ").concat(i);case"!=":return"".concat(n," != ").concat(i);case">=":return"".concat(n," >= ").concat(i);case"<=":return"".concat(n," <= ").concat(i);case">":return"".concat(n," > ").concat(i);case"<":return"".concat(n," < ").concat(i)}}).filter(Boolean).join(" AND ");return""===s?"":t?"WHERE "+s:"AND "+s},m={[r.N.API]:{title:"API",queries:{totalRequests:{queryType:"logs",sql:e=>"\n        -- reports-api-total-requests\n        select\n          cast(timestamp_trunc(t.timestamp, hour) as datetime) as timestamp,\n          count(t.id) as count\n        FROM edge_logs t\n          cross join unnest(metadata) as m\n          cross join unnest(m.response) as response\n          cross join unnest(m.request) as request\n          cross join unnest(request.headers) as headers\n          ".concat(u(e),"\n        GROUP BY\n          timestamp\n        ORDER BY\n          timestamp ASC")},topRoutes:{queryType:"logs",sql:e=>"\n        -- reports-api-top-routes\n        select\n          request.path as path,\n          request.method as method,\n          request.search as search,\n          response.status_code as status_code,\n          count(t.id) as count\n        from edge_logs t\n          cross join unnest(metadata) as m\n          cross join unnest(m.response) as response\n          cross join unnest(m.request) as request\n          cross join unnest(request.headers) as headers\n          ".concat(u(e),"\n        group by\n          request.path, request.method, request.search, response.status_code\n        order by\n          count desc\n        limit 10\n        ")},errorCounts:{queryType:"logs",sql:e=>"\n        -- reports-api-error-counts\n        select\n          cast(timestamp_trunc(t.timestamp, hour) as datetime) as timestamp,\n          count(t.id) as count\n        FROM edge_logs t\n          cross join unnest(metadata) as m\n          cross join unnest(m.response) as response\n          cross join unnest(m.request) as request\n          cross join unnest(request.headers) as headers\n        WHERE\n          response.status_code >= 400\n        ".concat(u(e,!1),"\n        GROUP BY\n          timestamp\n        ORDER BY\n          timestamp ASC\n        ")},topErrorRoutes:{queryType:"logs",sql:e=>"\n        -- reports-api-top-error-routes\n        select\n          request.path as path,\n          request.method as method,\n          request.search as search,\n          response.status_code as status_code,\n          count(t.id) as count\n        from edge_logs t\n          cross join unnest(metadata) as m\n          cross join unnest(m.response) as response\n          cross join unnest(m.request) as request\n          cross join unnest(request.headers) as headers\n        where\n          response.status_code >= 400\n        ".concat(u(e,!1),"\n        group by\n          request.path, request.method, request.search, response.status_code\n        order by\n          count desc\n        limit 10\n        ")},responseSpeed:{queryType:"logs",sql:e=>"\n        -- reports-api-response-speed\n        select\n          cast(timestamp_trunc(t.timestamp, hour) as datetime) as timestamp,\n          avg(response.origin_time) as avg\n        FROM\n          edge_logs t\n          cross join unnest(metadata) as m\n          cross join unnest(m.response) as response\n          cross join unnest(m.request) as request\n          cross join unnest(request.headers) as headers\n          ".concat(u(e),"\n        GROUP BY\n          timestamp\n        ORDER BY\n          timestamp ASC\n      ")},topSlowRoutes:{queryType:"logs",sql:e=>"\n        -- reports-api-top-slow-routes\n        select\n          request.path as path,\n          request.method as method,\n          request.search as search,\n          response.status_code as status_code,\n          count(t.id) as count,\n          avg(response.origin_time) as avg\n        from edge_logs t\n          cross join unnest(metadata) as m\n          cross join unnest(m.response) as response\n          cross join unnest(m.request) as request\n          cross join unnest(request.headers) as headers\n        ".concat(u(e),"\n        group by\n          request.path, request.method, request.search, response.status_code\n        order by\n          avg desc\n        limit 10\n        ")},networkTraffic:{queryType:"logs",sql:e=>'\n        -- reports-api-network-traffic\n        select\n          cast(timestamp_trunc(t.timestamp, hour) as datetime) as timestamp,\n          coalesce(\n            safe_divide(\n              sum(\n                cast(coalesce(headers.content_length, "0") as int64)\n              ),\n              1000000\n            ),\n            0\n          ) as ingress_mb,\n          coalesce(\n            safe_divide(\n              sum(\n                cast(coalesce(resp_headers.content_length, "0") as int64)\n              ),\n              1000000\n            ),\n            0\n          ) as egress_mb,\n        FROM\n          edge_logs t\n          cross join unnest(metadata) as m\n          cross join unnest(m.response) as response\n          cross join unnest(m.request) as request\n          cross join unnest(request.headers) as headers\n          cross join unnest(response.headers) as resp_headers\n          '.concat(u(e),"\n        GROUP BY\n          timestamp\n        ORDER BY\n          timestamp ASC\n        ")}}},[r.N.AUTH]:{title:"",queries:{}},[r.N.STORAGE]:{title:"Storage",queries:{cacheHitRate:{queryType:"logs",sql:e=>"\n        -- reports-storage-cache-hit-rate\nSELECT\n  timestamp_trunc(timestamp, hour) as timestamp,\n  countif( h.cf_cache_status in ('HIT', 'STALE', 'REVALIDATED', 'UPDATING') ) as hit_count,\n  countif( h.cf_cache_status in ('MISS', 'NONE/UNKNOWN', 'EXPIRED', 'BYPASS', 'DYNAMIC') ) as miss_count\nfrom edge_logs f\n  cross join unnest(f.metadata) as m\n  cross join unnest(m.request) as r\n  cross join unnest(m.response) as res\n  cross join unnest(res.headers) as h\nwhere starts_with(r.path, '/storage/v1/object') and r.method = 'GET'\n  ".concat(u(e,!1),"\ngroup by timestamp\norder by timestamp desc\n")},topCacheMisses:{queryType:"logs",sql:e=>"\n        -- reports-storage-top-cache-misses\nSELECT\n  r.path as path,\n  r.search as search,\n  count(id) as count\nfrom edge_logs f\n  cross join unnest(f.metadata) as m\n  cross join unnest(m.request) as r\n  cross join unnest(m.response) as res\n  cross join unnest(res.headers) as h\nwhere starts_with(r.path, '/storage/v1/object')\n  and r.method = 'GET'\n  and h.cf_cache_status in ('MISS', 'NONE/UNKNOWN', 'EXPIRED', 'BYPASS', 'DYNAMIC')\n  ".concat(u(e,!1),"\ngroup by path, search\norder by count desc\nlimit 12\n    ")}}},[r.N.QUERY_PERFORMANCE]:{title:"Query performance",queries:{mostFrequentlyInvoked:{queryType:"db",sql:function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return"\n        -- reports-query-performance-most-frequently-invoked\nset search_path to public, extensions;\n\nselect\n    auth.rolname,\n    statements.query,\n    statements.calls,\n    -- -- Postgres 13, 14, 15\n    statements.total_exec_time + statements.total_plan_time as total_time,\n    statements.min_exec_time + statements.min_plan_time as min_time,\n    statements.max_exec_time + statements.max_plan_time as max_time,\n    statements.mean_exec_time + statements.mean_plan_time as mean_time,\n    -- -- Postgres <= 12\n    -- total_time,\n    -- min_time,\n    -- max_time,\n    -- mean_time,\n    statements.rows / statements.calls as avg_rows,\n    statements.rows as rows_read,\n    case \n      when (statements.shared_blks_hit + statements.shared_blks_read) > 0 \n      then round(\n        (statements.shared_blks_hit * 100.0) / \n        (statements.shared_blks_hit + statements.shared_blks_read), \n        2\n      )\n      else 0\n    end as cache_hit_rate".concat(n?",\n    case\n      when (lower(statements.query) like 'select%' or lower(statements.query) like 'with pgrst%')\n      then (\n        select json_build_object(\n          'has_suggestion', array_length(index_statements, 1) > 0,\n          'startup_cost_before', startup_cost_before,\n          'startup_cost_after', startup_cost_after,\n          'total_cost_before', total_cost_before,\n          'total_cost_after', total_cost_after,\n          'index_statements', index_statements\n        )\n        from index_advisor(statements.query)\n      )\n      else null\n    end as index_advisor_result":"","\n  from pg_stat_statements as statements\n    inner join pg_authid as auth on statements.userid = auth.oid\n  ").concat(t||"","\n  ").concat(s||"order by statements.calls desc","\n  limit 20")}},mostTimeConsuming:{queryType:"db",sql:function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return"\n        -- reports-query-performance-most-time-consuming\nset search_path to public, extensions;\n\nselect\n    auth.rolname,\n    statements.query,\n    statements.calls,\n    statements.total_exec_time + statements.total_plan_time as total_time,\n    statements.mean_exec_time + statements.mean_plan_time as mean_time,\n    ((statements.total_exec_time + statements.total_plan_time)/sum(statements.total_exec_time + statements.total_plan_time) OVER()) * 100 as prop_total_time".concat(n?",\n    case\n      when (lower(statements.query) like 'select%' or lower(statements.query) like 'with pgrst%')\n      then (\n        select json_build_object(\n          'has_suggestion', array_length(index_statements, 1) > 0,\n          'startup_cost_before', startup_cost_before,\n          'startup_cost_after', startup_cost_after,\n          'total_cost_before', total_cost_before,\n          'total_cost_after', total_cost_after,\n          'index_statements', index_statements\n        )\n        from index_advisor(statements.query)\n      )\n      else null\n    end as index_advisor_result":"","\n  from pg_stat_statements as statements\n    inner join pg_authid as auth on statements.userid = auth.oid\n  ").concat(t||"","\n  ").concat(s||"order by total_time desc","\n  limit 20")}},slowestExecutionTime:{queryType:"db",sql:function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return"\n        -- reports-query-performance-slowest-execution-time\nset search_path to public, extensions;\n\nselect\n    auth.rolname,\n    statements.query,\n    statements.calls,\n    -- -- Postgres 13, 14, 15\n    statements.total_exec_time + statements.total_plan_time as total_time,\n    statements.min_exec_time + statements.min_plan_time as min_time,\n    statements.max_exec_time + statements.max_plan_time as max_time,\n    statements.mean_exec_time + statements.mean_plan_time as mean_time,\n    -- -- Postgres <= 12\n    -- total_time,\n    -- min_time,\n    -- max_time,\n    -- mean_time,\n    statements.rows / statements.calls as avg_rows".concat(n?",\n    case\n      when (lower(statements.query) like 'select%' or lower(statements.query) like 'with pgrst%')\n      then (\n        select json_build_object(\n          'has_suggestion', array_length(index_statements, 1) > 0,\n          'startup_cost_before', startup_cost_before,\n          'startup_cost_after', startup_cost_after,\n          'total_cost_before', total_cost_before,\n          'total_cost_after', total_cost_after,\n          'index_statements', index_statements\n        )\n        from index_advisor(statements.query)\n      )\n      else null\n    end as index_advisor_result":"","\n  from pg_stat_statements as statements\n    inner join pg_authid as auth on statements.userid = auth.oid\n  ").concat(t||"","\n  ").concat(s||"order by max_time desc","\n  limit 20")}},queryHitRate:{queryType:"db",sql:e=>"-- reports-query-performance-cache-and-index-hit-rate\nselect\n    'index hit rate' as name,\n    (sum(idx_blks_hit)) / nullif(sum(idx_blks_hit + idx_blks_read),0) as ratio\n  from pg_statio_user_indexes\n  union all\n  select\n    'table hit rate' as name,\n    sum(heap_blks_hit) / nullif(sum(heap_blks_hit) + sum(heap_blks_read),0) as ratio\n  from pg_statio_user_tables;"},unified:{queryType:"db",sql:function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return"\n        -- reports-query-performance-unified\n        set search_path to public, extensions;\n\n        select\n            auth.rolname,\n            statements.query,\n            statements.calls,\n            -- -- Postgres 13, 14, 15\n            statements.total_exec_time + statements.total_plan_time as total_time,\n            statements.min_exec_time + statements.min_plan_time as min_time,\n            statements.max_exec_time + statements.max_plan_time as max_time,\n            statements.mean_exec_time + statements.mean_plan_time as mean_time,\n            -- -- Postgres <= 12\n            -- total_time,\n            -- min_time,\n            -- max_time,\n            -- mean_time,\n            statements.rows / statements.calls as avg_rows,\n            statements.rows as rows_read,\n            statements.shared_blks_hit as debug_hit,\n            statements.shared_blks_read as debug_read,\n            case \n              when (statements.shared_blks_hit + statements.shared_blks_read) > 0 \n              then (statements.shared_blks_hit::numeric * 100.0) / \n                   (statements.shared_blks_hit + statements.shared_blks_read)\n              else 0\n            end as cache_hit_rate,\n            ((statements.total_exec_time + statements.total_plan_time)/sum(statements.total_exec_time + statements.total_plan_time) OVER()) * 100 as prop_total_time".concat(n?",\n            case\n              when (lower(statements.query) like 'select%' or lower(statements.query) like 'with pgrst%')\n              then (\n                select json_build_object(\n                  'has_suggestion', array_length(index_statements, 1) > 0,\n                  'startup_cost_before', startup_cost_before,\n                  'startup_cost_after', startup_cost_after,\n                  'total_cost_before', total_cost_before,\n                  'total_cost_after', total_cost_after,\n                  'index_statements', index_statements\n                )\n                from index_advisor(statements.query)\n              )\n              else null\n            end as index_advisor_result":"","\n          from pg_stat_statements as statements\n            inner join pg_authid as auth on statements.userid = auth.oid\n          ").concat(t||"","\n          ").concat(s||"order by statements.total_exec_time + statements.total_plan_time desc","\n          limit 20")}},slowQueriesCount:{queryType:"db",sql:()=>"\n        -- reports-query-performance-slow-queries-count\n        set search_path to public, extensions;\n\n        -- Count of slow queries (> 1 second average)\n        SELECT count(*) as slow_queries_count\n        FROM pg_stat_statements \n        WHERE statements.mean_exec_time > 1000;"},queryMetrics:{queryType:"db",sql:function(e,t,s){return arguments.length>3&&void 0!==arguments[3]&&arguments[3],"\n        -- reports-query-performance-metrics\n        set search_path to public, extensions;\n      \n        SELECT \n          COALESCE(ROUND(AVG(statements.rows::numeric / NULLIF(statements.calls, 0)), 1), 0) as avg_rows_per_call,\n          COUNT(*) FILTER (WHERE statements.total_exec_time + statements.total_plan_time > 1000) as slow_queries,\n          COALESCE(\n            ROUND(\n              SUM(statements.shared_blks_hit) * 100.0 / \n              NULLIF(SUM(statements.shared_blks_hit + statements.shared_blks_read), 0), \n              2\n            ), 0\n          ) || '%' as cache_hit_rate\n        FROM pg_stat_statements as statements\n        WHERE statements.calls > 0\n        ".concat(t||"","\n        ").concat(s||"")}}}},[r.N.DATABASE]:{title:"database",queries:{largeObjects:{queryType:"db",sql:e=>"-- reports-database-large-objects\nSELECT\n        SCHEMA_NAME,\n        relname,\n        table_size\n      FROM\n        (SELECT\n          pg_catalog.pg_namespace.nspname AS SCHEMA_NAME,\n          relname,\n          pg_total_relation_size(pg_catalog.pg_class.oid) AS table_size\n        FROM pg_catalog.pg_class\n        JOIN pg_catalog.pg_namespace ON relnamespace = pg_catalog.pg_namespace.oid\n        ) t\n      WHERE SCHEMA_NAME NOT LIKE 'pg_%'\n      ORDER BY table_size DESC\n      LIMIT 5;"}}}},_=["total_realtime_ingress","total_rest_options_requests","total_auth_ingress","total_auth_get_requests","total_auth_post_requests","total_auth_patch_requests","total_auth_options_requests","total_storage_options_requests","total_storage_patch_requests","total_options_requests","total_rest_ingress","total_rest_get_requests","total_rest_post_requests","total_rest_patch_requests","total_rest_delete_requests","total_storage_get_requests","total_storage_post_requests","total_storage_delete_requests","total_auth_delete_requests","total_get_requests","total_patch_requests","total_post_requests","total_ingress","total_delete_requests"],d=[{key:"ap-northeast-1",label:"Tokyo"},{key:"ap-northeast-2",label:"Seoul"},{key:"ap-south-1",label:"Mumbai"},{key:"ap-southeast-1",label:"Singapore"},{key:"ap-southeast-2",label:"Sydney"},{key:"ca-central-1",label:"Canada Central"},{key:"us-east-1",label:"N. Virginia"},{key:"us-west-1",label:"N. California"},{key:"us-west-2",label:"Oregon"},{key:"eu-central-1",label:"Frankfurt"},{key:"eu-west-1",label:"Ireland"},{key:"eu-west-2",label:"London"},{key:"eu-west-3",label:"Paris"},{key:"sa-east-1",label:"S\xe3o Paulo"}]},35862:(e,t,s)=>{s.d(t,{A:()=>i});var n=s(80263),a=s(28651),r=s(80100),o=s(14981),l=s(66e3);let i=e=>{let{attribute:t,message:s="No data to show",description:i,format:c,className:u="",size:m,isFullHeight:_=!1,titleTooltip:d,hideTotalPlaceholder:p=!1}=e,{minHeight:h}=(0,l.dQ)(m);return(0,n.jsxs)("div",{className:(0,r.cn)(_&&"h-full"),"data-sentry-component":"NoDataPlaceholder","data-sentry-source-file":"NoDataPlaceholder.tsx",children:[void 0!==t&&(0,n.jsx)(o._,{title:t,format:c,highlightedValue:p?void 0:0,titleTooltip:d}),(0,n.jsxs)("div",{className:(0,r.cn)("border-control flex flex-grow w-full flex-col items-center justify-center space-y-2 border border-dashed text-center",_&&"h-full",u),style:{minHeight:h+20},children:[(0,n.jsx)(a.A,{size:20,className:"text-border-stronger","data-sentry-element":"BarChart2","data-sentry-source-file":"NoDataPlaceholder.tsx"}),(0,n.jsxs)("div",{className:"px-1",children:[(0,n.jsx)("p",{className:"text-foreground-light text-xs",children:s}),i&&(0,n.jsx)("p",{className:"text-foreground-lighter text-xs",children:i})]})]})]})}},51797:(e,t,s)=>{s.d(t,{A:()=>c});var n=s(67850),a=s(23463),r=s(63351),o=s(59356),l=s(9620),i=s(72341);let c=e=>{var t;let{sql:s,params:c=a.EV,where:u,orderBy:m}=e,{data:_}=(0,l.YA)(),d=(0,i.RE)(),{data:p}=(0,r.Vh)({projectRef:null==_?void 0:_.ref}),h=null==(t=(p||[]).find(e=>e.identifier===d.selectedDatabaseId))?void 0:t.connectionString,g=d.selectedDatabaseId,f="function"==typeof s?s([]):s,{data:y,error:b,isLoading:x,isRefetching:q,refetch:v}=(0,n.I)({queryKey:["projects",null==_?void 0:_.ref,"db",{...c,sql:f,identifier:g},u,m],queryFn:e=>{let{signal:t}=e;return(0,o.E)({projectRef:null==_?void 0:_.ref,connectionString:h||(null==_?void 0:_.connectionString),sql:f},t).then(e=>e.result)},enabled:!!f,refetchOnWindowFocus:!1,refetchOnReconnect:!1});return{error:b||("object"==typeof y?null==y?void 0:y.error:""),data:y,isLoading:x,isRefetching:q,params:c,runQuery:v,resolvedSql:f}}},66e3:(e,t,s)=>{s.d(t,{BY:()=>p,Eg:()=>c,XO:()=>m,bk:()=>_,dQ:()=>d});var n=s(80263),a=s(53434),r=s.n(a),o=s(53239),l=s(47041),i=s(30761);let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return u(e)?m(e,t):e.toLocaleString()},u=e=>String(e).includes("."),m=(e,t)=>{if(0===t)return String(Math.round(e));if(!u(e))return e.toLocaleString()+"."+"0".repeat(t);{let[s,n]=String(e).split(".");return Number(s).toLocaleString()+"."+n.slice(0,t)}},_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.C_.FULL,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return s?r().utc(e).format(t):r()(e).format(t)},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{tiny:76,small:96,normal:160,large:280},s=t[e];return{Container:(0,o.useMemo)(()=>e=>{let{className:t,children:a}=e;return(0,n.jsx)(l.u,{className:t,height:s,minHeight:s,width:"100%",children:a})},[e]),minHeight:s}},p=e=>{let{data:t,xAxisKey:s,yAxisKey:n,stackKey:a,variant:r="values"}=e,l=(0,o.useMemo)(()=>t?Object.entries(t.reduce((e,t)=>{let r=t[s],o=t[n],l=t[a];return e[r]||(e[r]={}),e[r][l]=o,e},{})).map(e=>{let[t,n]=e;return{...n,[s]:Number.isNaN(Number(t))?t:Number(t)}}):[],[JSON.stringify(t)]),i=(0,o.useMemo)(()=>Object.keys(l[0]||{}).filter(e=>e!==s&&e!==n).sort(),[JSON.stringify(l[0]||{})]),c=(0,o.useMemo)(()=>{if("percentages"===r)return l.map(e=>{let t=Object.entries(e),s=t.filter(e=>{let[t,s]=e;return i.includes(t)}).reduce((e,t)=>{let[s,n]=t;return e+n},0);return t.reduce((e,t)=>{let[n,a]=t;return i.includes(n)?{...e,[n]:0!==a?a/s:0}:{...e,[n]:a}},{})})},[JSON.stringify(l)]);return{dataKeys:i,stackedData:l,percentagesStackedData:c}}},71492:(e,t,s)=>{s.d(t,{c:()=>a});var n=s(84512);function a(){let{data:e}=(0,n.s)();return e?{plan:null==e?void 0:e.plan,usageBillingEnabled:null==e?void 0:e.usage_billing_enabled,isLoading:!1,isSuccess:!0}:{plan:null,usageBillingEnabled:null,isLoading:!0,isSuccess:!1}}},74544:(e,t,s)=>{s.d(t,{Z:()=>c});var n=s(53239);let a="supabase-chart-hover-sync-enabled",r="supabase-chart-tooltip-sync-enabled",o={hoveredIndex:null,hoveredChart:null,syncHover:!0,syncTooltip:!0},l=new Set;try{{let e=localStorage.getItem(a),t=localStorage.getItem(r);null!==e&&(o.syncHover=JSON.parse(e)),null!==t&&(o.syncTooltip=JSON.parse(t))}}catch(e){console.warn("Failed to load chart sync settings from localStorage:",e)}function i(e){let t=o;if(o={...o,...e},void 0!==e.syncHover)try{localStorage.setItem(a,JSON.stringify(o.syncHover))}catch(e){console.warn("Failed to save chart hover sync setting to localStorage:",e)}if(void 0!==e.syncTooltip)try{localStorage.setItem(r,JSON.stringify(o.syncTooltip))}catch(e){console.warn("Failed to save chart tooltip sync setting to localStorage:",e)}JSON.stringify(t)!==JSON.stringify(o)&&l.forEach(e=>e(o))}function c(e){let[t,s]=(0,n.useState)(o);(0,n.useEffect)(()=>{let e=e=>{s(e)};return l.add(e),()=>{l.delete(e)}},[]);let a=(0,n.useCallback)(t=>{o.syncHover?i({hoveredIndex:t,hoveredChart:null!==t?e:null}):s(s=>({...s,hoveredIndex:t,hoveredChart:null!==t?e:null}))},[e]),r=(0,n.useCallback)(()=>{o.syncHover?i({hoveredIndex:null,hoveredChart:null}):s(e=>({...e,hoveredIndex:null,hoveredChart:null}))},[]),c=(0,n.useCallback)(e=>{i({syncHover:e,...!1===e&&{syncTooltip:!1}})},[]),u=(0,n.useCallback)(e=>{i({syncTooltip:e,...!0===e&&{syncHover:!0}})},[]),m=t.hoveredChart===e,_=t.syncHover&&null!==t.hoveredChart&&!m;return{hoveredIndex:_||m?t.hoveredIndex:null,syncHover:t.syncHover,syncTooltip:t.syncTooltip,hoveredChart:t.hoveredChart,setHover:a,clearHover:r,setSyncHover:c,setSyncTooltip:u,isHovered:null!==t.hoveredIndex&&(m||_),isCurrentChart:m}}}}]);