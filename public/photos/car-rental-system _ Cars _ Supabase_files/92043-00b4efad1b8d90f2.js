try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a0f7a677-6d5f-4d13-93b5-46df9d62108f",e._sentryDebugIdIdentifier="sentry-dbid-a0f7a677-6d5f-4d13-93b5-46df9d62108f")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[92043],{10279:(e,t,r)=>{r.d(t,{E:()=>f});var n=r(80263),s=r(80814),a=r(53239),o=r(73969),i=r(8579),l=r(9620),c=r(6436),d=r(34983),u=r(6217),m=r(49151),p=r(80421),x=r(99779);let f=e=>{var t;let{visible:r,onCancel:f,afterSubmit:y}=e,h=(0,s.useRouter)(),{profile:j}=(0,d.xc)(),{data:g}=(0,l.YA)(),v=null!=(t=null==g?void 0:g.ref)?t:"default",b=(0,a.useMemo)(()=>{let{its:e,ite:t,isHelper:r,helperText:n}=h.query,s=new URLSearchParams;e&&"string"==typeof e&&s.set("its",e),t&&"string"==typeof t&&s.set("ite",t),r&&"string"==typeof r&&s.set("isHelper",r),n&&"string"==typeof n&&s.set("helperText",n);let a=s.toString();return a?"?".concat(a):""},[h.query]),{mutate:N,isPending:w}=(0,i.v)({onSuccess:(e,t)=>{o.oR.success("Successfully created new report");let r=t.payload.id;h.push("/project/".concat(v,"/observability/").concat(r).concat(b)),y()},onError:e=>{o.oR.error("Failed to create report: ".concat(e.message))}});async function k(e){let{name:t,description:r}=e;return v?j?void N({projectRef:v,payload:{id:(0,c.gZ)(),type:"report",name:t,description:r||"",visibility:"project",owner_id:null==j?void 0:j.id,content:{schema_version:1,period_start:{time_period:"7d",date:""},period_end:{time_period:"today",date:""},interval:"1d",layout:[]}}}):console.error("Profile is required"):console.error("Project ref is required")}return(0,n.jsx)(u.A,{visible:r,onCancel:f,hideFooter:!0,header:"Create a custom report",size:"small","data-sentry-element":"Modal","data-sentry-component":"CreateReportModal","data-sentry-source-file":"CreateReportModal.tsx",children:(0,n.jsx)(m.A,{onReset:f,validateOnBlur:!0,initialValues:{name:"",description:""},validate:e=>{let t={};return e.name||(t.name="Required"),t},onSubmit:e=>k(e),"data-sentry-element":"Form","data-sentry-source-file":"CreateReportModal.tsx",children:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u.A.Content,{className:"space-y-4",children:[(0,n.jsx)(p.A,{label:"Name",id:"name",name:"name"}),(0,n.jsx)(p.A.TextArea,{label:"Description",id:"description",placeholder:"Describe your custom report",size:"medium",textAreaClassName:"resize-none"})]}),(0,n.jsx)(u.A.Separator,{}),(0,n.jsxs)(u.A.Content,{className:"flex items-center justify-end gap-2",children:[(0,n.jsx)(x.$,{htmlType:"reset",type:"default",onClick:f,disabled:w,children:"Cancel"}),(0,n.jsx)(x.$,{htmlType:"submit",loading:w,disabled:w,children:"Create report"})]})]})})})}},24051:(e,t,r)=>{r.d(t,{$:()=>c});var n=r(51355),s=r(80210),a=r(73969),o=r(24523),i=r(1206);async function l(e,t){let{projectRef:r,ids:n}=e,{data:s,error:a}=await (0,o.yH)("/platform/projects/{ref}/content",{headers:{Version:"2"},params:{path:{ref:r},query:{ids:n.join(",")}},signal:t});return a&&(0,o.H4)(a),s.map(e=>e.id)}let c=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=(0,n.jE)();return(0,s.n)({mutationFn:e=>l(e),async onSuccess(t,r,n){let{projectRef:s}=r;await Promise.all([o.invalidateQueries({queryKey:i.M.allContentLists(s)}),o.invalidateQueries({queryKey:i.M.infiniteList(s)})]),await (null==e?void 0:e(t,r,n))},async onError(e,r,n){void 0===t?a.oR.error("Failed to delete contents: ".concat(e.message)):t(e,r,n)},...r})}},24487:(e,t,r)=>{r.d(t,{Ay:()=>m});var n=r(80263),s=r(53239),a=r(7981),o=r(80100);function i(e){let{children:t,className:r,tag:s="div",style:a}=e;return(0,n.jsx)("".concat(s),{style:a,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}i.Title=function(e){let{className:t,level:r=1,children:s,style:a}=e;return(0,n.jsx)("h".concat(r),{style:a,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:s})},i.Text=function(e){let{className:t,children:r,style:s,type:a,disabled:o,mark:i,code:l,keyboard:c,underline:d,strikethrough:u,strong:m,small:p}=e;return l?(0,n.jsx)("code",{style:s,children:r}):i?(0,n.jsx)("mark",{style:s,children:r}):c?(0,n.jsx)("kbd",{style:s,children:r}):m?(0,n.jsx)("strong",{style:s,children:r}):(0,n.jsx)("span",{style:s,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:r})},i.Link=function(e){let{children:t,target:r="_blank",href:s,className:a,onClick:o,style:i}=e;return(0,n.jsx)("a",{onClick:o,href:s,target:r,rel:"noopener noreferrer",style:i,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})};let l=(0,s.createContext)({type:"text"}),c=e=>{let{type:t}=e;return(0,n.jsx)(l.Provider,{value:{type:t},"data-sentry-element":"MenuContext.Provider","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},d=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function u(e){let{children:t,className:r,ulClassName:s,style:a,type:o="text"}=e;return(0,n.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:r,style:a,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,n.jsx)(c,{type:o,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,n.jsx)("ul",{className:s,children:t})})})}u.Item=function(e){let{children:t,icon:r,active:s,rounded:i,onClick:l,doNotCloseOverlay:c=!1,showActiveBar:u=!1,style:m}=e,p=(0,a.A)("menu"),{type:x}=d(),f=[p.item.base];f.push(p.item.variants[x].base),s?f.push(p.item.variants[x].active):f.push(p.item.variants[x].normal);let y=[p.item.content.base];s?y.push(p.item.content.active):y.push(p.item.content.normal);let h=[p.item.icon.base];return s?h.push(p.item.icon.active):h.push(p.item.icon.normal),(0,n.jsxs)("li",{role:"menuitem",className:(0,o.cn)("outline-none",f),style:m,onClick:l,"aria-current":s?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[r&&(0,n.jsx)("div",{className:"".concat(h.join(" ")," min-w-fit"),children:r}),(0,n.jsx)("span",{className:y.join(" "),children:t})]})},u.Group=function(e){let{children:t,icon:r,title:s}=e,o=(0,a.A)("menu"),{type:i}=d();return(0,n.jsxs)("div",{className:[o.group.base,o.group.variants[i]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[r&&(0,n.jsx)("span",{className:o.group.icon,children:r}),(0,n.jsx)("span",{className:o.group.content,children:s}),t]})},u.Misc=function(e){let{children:t}=e;return(0,n.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,n.jsx)(i.Text,{"data-sentry-element":"Typography.Text","data-sentry-source-file":"Menu.tsx",children:(0,n.jsx)("span",{children:t})})})};let m=u},42459:(e,t,r)=>{r.d(t,{c:()=>c});var n=r(80263),s=r(52555),a=r.n(s),o=r(80100),i=r(99779),l=r(44725);let c=e=>{let{urlBack:t,fullHeight:r=!0}=e;return(0,n.jsx)("div",{className:(0,o.cn)("w-full flex items-center justify-center",r&&"h-full"),"data-sentry-component":"UnknownInterface","data-sentry-source-file":"UnknownInterface.tsx",children:(0,n.jsx)(l.Z,{type:"note",className:"max-w-xl",title:"Looking for something?",description:"We couldn't find the page that you're looking for","data-sentry-element":"Admonition","data-sentry-source-file":"UnknownInterface.tsx",children:(0,n.jsx)(i.$,{asChild:!0,type:"default",className:"mt-2","data-sentry-element":"Button","data-sentry-source-file":"UnknownInterface.tsx",children:(0,n.jsx)(a(),{href:t,"data-sentry-element":"Link","data-sentry-source-file":"UnknownInterface.tsx",children:"Head back"})})})})}},49151:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(80263),s=r(53239),a=r(57459),o=r(7760);function i(e,t){if(!t.error)return delete e[t.key],e;if(t)return{...e,[t.key]:t.error};throw Error()}function l(e){let{validate:t,...r}=e,[l,c]=(0,s.useReducer)(i,null),d=(0,a.Wx)({validateOnBlur:!0,...r,validationSchema:r.validationSchema,initialValues:r.initialValues,onSubmit:r.onSubmit,validate:t||function(){return l}});return(0,n.jsx)("form",{id:r.id,name:r.name,onSubmit:d.handleSubmit,className:r.className,style:r.style,method:"POST","data-sentry-component":"Form","data-sentry-source-file":"Form.tsx",children:(0,n.jsx)(o.h,{values:d.values,errors:d.errors,formContextOnChange:d.handleChange,handleBlur:d.handleBlur,touched:d.touched,fieldLevelValidation:function(e,t){c({key:e,error:t})},"data-sentry-element":"FormContextProvider","data-sentry-source-file":"Form.tsx",children:r.children({errors:d.errors,touched:d.touched,isSubmitting:d.isSubmitting,isValidating:d.isValidating,submitCount:d.submitCount,initialValues:d.initialValues,values:d.values,handleReset:d.handleReset,resetForm:d.resetForm,setFieldValue:d.setFieldValue})})})}},77308:(e,t,r)=>{r.d(t,{OJ:()=>v,Pl:()=>A,Pq:()=>j,Q5:()=>R,RK:()=>k,a0:()=>w,ag:()=>N,hm:()=>h,i9:()=>C,qP:()=>g,ue:()=>b});var n=r(80263),s=r(76196),a=r(73886),o=r(31092),i=r(64327),l=r(52555),c=r.n(l),d=r(53239),u=r(66755),m=r(80100),p=r(91786),x=r(27371),f=r(21162),y=r(30404);let h=(0,d.forwardRef)((e,t)=>{let{...r}=e;return(0,n.jsx)(u.Nt,{ref:t,...r,className:(0,m.cn)("w-full px-2 group",r.className)})}),j=(0,d.forwardRef)((e,t)=>{let{...r}=e;return(0,n.jsxs)(u.R6,{ref:t,...r,className:(0,m.cn)("w-full flex gap-1 items-center group px-3 text-sm font-normal font-mono uppercase text-lighter tracking-wide",r.className),children:[(0,n.jsx)(s.A,{className:"transition-all text-foreground-muted group-data-[state=open]:rotate-90",size:16,strokeWidth:1.5}),(0,n.jsx)("span",{className:"group-hover:not-disabled:text-foreground",children:r.title})]})}),g=(0,d.forwardRef)((e,t)=>{let{...r}=e;return(0,n.jsx)(u.Ke,{ref:t,...r,className:(0,m.cn)("w-full flex flex-col gap-0",r.className)})}),v=(0,d.forwardRef)((e,t)=>(0,n.jsx)("div",{ref:t,...e,className:(0,m.cn)("h-px bg-border-muted",e.className)})),b=(0,d.forwardRef)((e,t)=>{let{className:r,isActive:s,forceHoverState:a,...o}=e;return(0,n.jsx)(c(),{ref:t,...o,"aria-current":s,className:(0,m.cn)("text-sm","h-7 pl-3 pr-2","flex items-center justify-between rounded-md group relative",s?"bg-selection":"hover:bg-surface-200",a&&"bg-surface-200",s?"text-foreground":"text-foreground-light hover:text-foreground",r)})}),N=(0,d.forwardRef)((e,t)=>{let{isActive:r=!0,forceHoverState:s,isPreview:a,isOpened:o=!0,...i}=e;return(0,n.jsxs)(c(),{ref:t,...i,"aria-current":r,className:(0,m.cn)((0,p.u2)({isSelected:r&&!a,isOpened:o&&!a,isPreview:a}),"px-4",i.className),children:[!a&&r&&(0,n.jsx)("div",{className:"absolute left-0 h-full w-0.5 bg-foreground"}),i.children]})}),w=(0,d.forwardRef)((e,t)=>(0,n.jsx)("div",{ref:t,...e,className:(0,m.cn)("flex px-2 gap-2 items-center",e.className)})),k=(0,d.forwardRef)((e,t)=>{let{children:r,isLoading:s=!1,...i}=e;return(0,n.jsxs)("label",{htmlFor:i.name,className:"relative w-full",children:[(0,n.jsx)("span",{className:"sr-only",children:i["aria-labelledby"]}),(0,n.jsx)(x.p,{ref:t,type:"text",className:(0,m.cn)("h-[32px] md:h-[28px] w-full","text-base md:text-xs","pl-7","pr-7","w-full","rounded",i.className),...i}),r,s?(0,n.jsx)(a.A,{className:"animate-spin absolute left-2 text-foreground-muted",style:{top:7},size:14,strokeWidth:1.5}):(0,n.jsx)(o.A,{className:"absolute left-2 top-2 text-foreground-muted",size:14,strokeWidth:1.5})]})}),C=(0,d.forwardRef)((e,t)=>{let{value:r,onValueChange:s,contentClassName:a,triggerClassName:o,...l}=e;return(0,n.jsxs)(f.rI,{modal:!1,children:[(0,n.jsxs)(y.m_,{delayDuration:0,children:[(0,n.jsx)(f.ty,{asChild:!0,className:(0,m.cn)("absolute right-1 top-[.4rem] md:top-[.3rem]","text-foreground transition-colors hover:text-foreground data-[state=open]:text-foreground",o),children:(0,n.jsx)(y.k$,{children:(0,n.jsx)(i.A,{size:18,strokeWidth:1})})}),(0,n.jsx)(y.ZI,{side:"bottom",children:"Sort By"})]}),(0,n.jsx)(f.SQ,{side:"bottom",align:"end",className:(0,m.cn)("w-48",a),children:(0,n.jsx)(f.Hr,{value:r,onValueChange:s,children:l.children})})]})}),A=(0,d.forwardRef)((e,t)=>(0,n.jsx)(f.Ht,{ref:t,...e})),R=(0,d.forwardRef)((e,t)=>{let{illustration:r,title:s,description:a,actions:o,...i}=e;return(0,n.jsx)("div",{ref:t,...i,className:(0,m.cn)("border border-muted bg-surface-100 dark:bg-surface-75 flex flex-col gap-y-3 items-center justify-center rounded-md px-5 py-4",i.className),children:(0,n.jsxs)("div",{className:"w-full flex flex-col gap-y-1 items-center",children:[r,s&&(0,n.jsx)("p",{className:"text-xs text-foreground-light",children:s}),a&&(0,n.jsx)("p",{className:"text-xs text-foreground-lighter text-center",children:a}),o&&(0,n.jsx)("div",{className:"mt-2",children:o}),i.children]})})})},82702:(e,t,r)=>{r.d(t,{D:()=>i});var n=r(67850),s=r(24523),a=r(1206);async function o(e,t){let{projectRef:r,type:n,name:a,limit:o=10}=e;if(void 0===r)throw Error("projectRef is required for getContent");let{data:i,error:l}=await (0,s.Jt)("/platform/projects/{ref}/content",{params:{path:{ref:r},query:{type:n,name:a,limit:o.toString()}},signal:t});return l&&(0,s.H4)(l),{cursor:i.cursor,content:i.data}}let i=function(e){let{projectRef:t,type:r,name:s,limit:i}=e,{enabled:l=!0,...c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.I)({queryKey:a.M.list(t,{type:r,name:s,limit:i}),queryFn:e=>{let{signal:n}=e;return o({projectRef:t,type:r,name:s,limit:i},n)},enabled:l&&void 0!==t,...c})}},92043:(e,t,r)=>{r.d(t,{A:()=>L});var n=r(80263),s=r(22891),a=r(42459),o=r(2657),i=r(9497),l=r(29471),c=r(72112),d=r(90376),u=r(52555),m=r.n(u),p=r(80814),x=r(53239),f=r(73969),y=r(10279),h=r(8579),j=r(6217),g=r(49151),v=r(80421),b=r(99779);let N=e=>{let{selectedReport:t,initialValues:r,onCancel:a}=e,{ref:o}=(0,s.g)(),{mutate:i,isPending:l}=(0,h.v)({onSuccess:()=>{f.oR.success("Successfully updated report"),a()},onError:e=>{f.oR.error("Failed to update report: ".concat(e.message))}});return(0,n.jsx)(j.A,{visible:void 0!==t,onCancel:a,hideFooter:!0,header:"Update custom report",size:"small","data-sentry-element":"Modal","data-sentry-component":"UpdateCustomReportModal","data-sentry-source-file":"UpdateModal.tsx",children:(0,n.jsx)(g.A,{onReset:a,validateOnBlur:!0,initialValues:r,validate:function(e){let t={};return e.name||(t.name="This field is required"),t},onSubmit:e=>{if(!o)return console.error("Project ref is required");t&&t.id&&t.project_id&&i({projectRef:o,payload:{...t,owner_id:t.owner_id,project_id:t.project_id,id:t.id,name:e.name,description:e.description||""}})},"data-sentry-element":"Form","data-sentry-source-file":"UpdateModal.tsx",children:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.A.Content,{children:(0,n.jsx)(v.A,{label:"Name",id:"name",name:"name"})}),(0,n.jsx)(j.A.Content,{children:(0,n.jsx)(v.A.TextArea,{label:"Description",id:"description",placeholder:"Describe your custom report",size:"medium",textAreaClassName:"resize-none"})}),(0,n.jsx)(j.A.Separator,{}),(0,n.jsxs)(j.A.Content,{className:"flex items-center justify-end gap-2",children:[(0,n.jsx)(b.$,{htmlType:"reset",type:"default",onClick:a,disabled:l,children:"Cancel"}),(0,n.jsx)(b.$,{htmlType:"submit",loading:l,disabled:l,children:"Save custom report"})]})]})})})};var w=r(23729),k=r(53931),C=r(24051),A=r(82702),R=r(80090),S=r(34983),M=r(24487),_=r(80100),P=r(68421),T=r(77444),D=r(74415),F=r(33922),q=r(21162);let I=e=>{let{item:t,pageKey:r,onSelectEdit:s,onSelectDelete:a}=e,{profile:o}=(0,S.xc)(),{can:i}=(0,R.Qp)(c.aG.UPDATE,"user_content",{resource:{type:"report",visibility:t.report.visibility,owner_id:t.report.owner_id},subject:{id:null==o?void 0:o.id}});return(0,n.jsxs)(m(),{className:(0,_.cn)("pr-2 h-7 pl-3 mt-1 text-foreground-light group-hover:text-foreground/80 text-sm","flex items-center justify-between rounded-md group relative",t.key===r?"bg-surface-300 text-foreground":"hover:text-foreground"),href:t.url,"data-sentry-element":"Link","data-sentry-component":"ObservabilityMenuItem","data-sentry-source-file":"ObservabilityMenuItem.tsx",children:[(0,n.jsx)("div",{children:t.name}),i&&(0,n.jsxs)(q.rI,{children:[(0,n.jsx)(q.ty,{asChild:!0,children:(0,n.jsx)(b.$,{type:"text",className:"px-1 opacity-50 hover:opacity-100",icon:(0,n.jsx)(T.A,{size:12,strokeWidth:2}),onClick:e=>{e.preventDefault(),e.stopPropagation()}})}),(0,n.jsxs)(q.SQ,{align:"start",className:"w-32 *:gap-x-2",children:[(0,n.jsxs)(q._2,{onClick:e=>{e.preventDefault(),e.stopPropagation(),t.id&&s()},children:[(0,n.jsx)(D.A,{size:12}),(0,n.jsx)("div",{children:"Rename report"})]}),(0,n.jsx)(q.mB,{}),(0,n.jsxs)(q._2,{onClick:e=>{e.preventDefault(),e.stopPropagation(),t.id&&a()},children:[(0,n.jsx)(F.A,{size:12}),(0,n.jsx)("div",{children:"Delete report"})]})]})]})]},t.key+"-menukey")};var E=r(77308);let z=()=>{let e=(0,p.useRouter)(),{profile:t}=(0,S.xc)(),{ref:r,id:a}=(0,s.g)(),i=a||e.pathname.split("/")[4],l=(0,s._P)("authreportv2"),u=(0,s._P)("edgefunctionreport"),h=(0,s._P)("realtimeReport"),j=(0,s._P)("storagereport"),g=(0,s._P)("postgrestreport"),v=(0,o.x)("project_storage:all"),{can:b}=(0,R.Qp)(c.aG.CREATE,"user_content",{resource:{type:"report",owner_id:null==t?void 0:t.id},subject:{id:null==t?void 0:t.id}}),T=(0,x.useMemo)(()=>{let{its:t,ite:r,isHelper:n,helperText:s}=e.query,a=new URLSearchParams;t&&"string"==typeof t&&a.set("its",t),r&&"string"==typeof r&&a.set("ite",r),n&&"string"==typeof n&&a.set("isHelper",n),s&&"string"==typeof s&&a.set("helperText",s);let o=a.toString();return o?"?".concat(o):""},[e.query]),{data:D,isLoading:F}=(0,A.D)({projectRef:r,type:"report"}),{mutate:q,isLoading:z}=(0,C.$)({onSuccess:()=>{V(!1),f.oR.success("Successfully deleted report"),e.push("/project/".concat(r,"/observability"))},onError:e=>{f.oR.error("Failed to delete report: ".concat(e.message))}}),[L,V]=(0,x.useState)(!1),[O,U]=(0,x.useState)(!1),[B,G]=(0,x.useState)(),[Q,$]=(0,x.useState)(),H=function(){if(!D)return[];let e=null==D?void 0:D.content.filter(e=>"report"===e.type);return(null==e?void 0:e.sort((e,t)=>e.name<t.name?-1:+(e.name>t.name))).map((e,t)=>({id:e.id,name:e.name,description:e.description||"",key:e.id||t+"-report",url:"/project/".concat(r,"/observability/").concat(e.id).concat(T),hasDropdownActions:!0,report:e}))}(),W=[{title:"Performance Reports",key:"performance-reports",items:[{name:"API Gateway",key:"api-overview",url:"/project/".concat(r,"/observability/api-overview").concat(T)},{name:"Query Performance",key:"query-performance",url:"/project/".concat(r,"/observability/query-performance").concat(T)},...g?[{name:"Data API",key:"postgrest",url:"/project/".concat(r,"/observability/postgrest").concat(T)}]:[]]},{title:"Product Reports",key:"product-reports",items:[...l?[{name:"Auth",key:"auth",url:"/project/".concat(r,"/observability/auth").concat(T)}]:[],{name:"Database",key:"database",url:"/project/".concat(r,"/observability/database").concat(T)},...u?[{name:"Edge Functions",key:"edge-functions",url:"/project/".concat(r,"/observability/edge-functions").concat(T)}]:[],...h?[{name:"Realtime",key:"realtime",url:"/project/".concat(r,"/observability/realtime").concat(T)}]:[],...j&&v?[{name:"Storage",key:"storage",url:"/project/".concat(r,"/observability/storage").concat(T)}]:[]]}];return(0,n.jsx)(M.Ay,{type:"pills",className:"mt-6","data-sentry-element":"Menu","data-sentry-component":"ObservabilityMenu","data-sentry-source-file":"ObservabilityMenu.tsx",children:F?(0,n.jsxs)("div",{className:"px-5 my-4 space-y-2",children:[(0,n.jsx)(k.Ay,{}),(0,n.jsx)(k.Ay,{className:"w-3/4"}),(0,n.jsx)(k.Ay,{className:"w-1/2"})]}):(0,n.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,n.jsxs)("div",{className:"mx-2",children:[(0,n.jsx)(M.Ay.Group,{title:(0,n.jsxs)("span",{className:"flex w-full items-center justify-between relative h-6",children:[(0,n.jsx)("span",{className:"uppercase font-mono",children:"Custom Reports"}),H.length>0&&(0,n.jsx)(w.G,{type:"default",size:"tiny",icon:(0,n.jsx)(d.A,{}),disabled:!b,className:"flex items-center justify-center h-6 w-6 absolute top-0 -right-1",onClick:()=>{U(!0)},tooltip:{content:{side:"bottom",text:b?void 0:"You need additional permissions to create custom reports"}}})]})}),0===H.length?(0,n.jsx)("div",{className:"px-2",children:(0,n.jsx)(E.Q5,{title:"No custom reports yet",description:"Create and save custom reports to track your project metrics",actions:(0,n.jsx)(w.G,{type:"default",icon:(0,n.jsx)(d.A,{}),disabled:!b,onClick:()=>{U(!0)},tooltip:{content:{side:"bottom",text:b?void 0:"You need additional permissions to create custom reports"}},children:"New custom report"})})}):(0,n.jsx)(n.Fragment,{children:H.map(e=>(0,n.jsx)(I,{item:e,pageKey:i,onSelectEdit:()=>{$(e.report)},onSelectDelete:()=>{G(e.report),V(!0)}},e.id))})]}),W.map((e,t)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"h-px w-full bg-border-overlay first:hidden"}),(0,n.jsx)("div",{children:e.items?(0,n.jsxs)("div",{className:"px-2",children:[(0,n.jsx)(M.Ay.Group,{title:(0,n.jsx)("span",{className:"uppercase font-mono",children:e.title})}),(0,n.jsx)("div",{className:"flex flex-col",children:e.items.map(e=>(0,n.jsx)("li",{className:(0,_.cn)("pr-2 mt-1 text-foreground-light group-hover:text-foreground/80 text-sm","flex items-center justify-between rounded-md group relative",e.key===i?"bg-surface-300 text-foreground":"hover:text-foreground"),children:(0,n.jsx)(m(),{href:e.url,className:"flex-grow h-7 flex justify-between items-center pl-3",children:(0,n.jsx)("span",{children:e.name})})},e.key))},e.key)]}):null},e.key+"-menu-group")]})),(0,n.jsx)(N,{onCancel:()=>$(void 0),selectedReport:Q,initialValues:{name:(null==Q?void 0:Q.name)||"",description:(null==Q?void 0:Q.description)||""}}),(0,n.jsx)(P.A,{title:"Delete custom report",confirmLabel:"Delete report",confirmLabelLoading:"Deleting report",size:"medium",loading:z,visible:L,onCancel:()=>V(!1),onConfirm:()=>void 0===r?console.error("Project ref is required"):(null==B?void 0:B.id)===void 0?console.error("Report ID is required"):void q({projectRef:r,ids:[B.id]}),children:(0,n.jsx)("div",{className:"text-sm text-foreground-light grid gap-4",children:(0,n.jsx)("div",{className:"grid gap-1",children:(0,n.jsxs)("p",{children:["Are you sure you want to delete '",null==B?void 0:B.name,"'?"]})})})}),(0,n.jsx)(y.E,{visible:O,onCancel:()=>U(!1),afterSubmit:()=>U(!1)})]})})},L=(0,i.r)(e=>{let{title:t,children:r}=e,{ref:i}=(0,s.g)(),{reportsAll:c}=(0,o.x)(["reports:all"]);return c?(0,n.jsx)(l.k,{title:t,product:"Observability",productMenu:(0,n.jsx)(z,{}),isBlocking:!1,children:r}):(0,n.jsx)(a.c,{urlBack:"/project/".concat(i)})})}}]);