try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="0ce412a8-2c81-4765-bfc0-a36029e1c3ad",e._sentryDebugIdIdentifier="sentry-dbid-0ce412a8-2c81-4765-bfc0-a36029e1c3ad")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[70087],{2838:(e,t,n)=>{n.d(t,{g:()=>i});var r=n(22891),a=n(84512);let i=()=>{var e;let{data:t}=(0,a.s)(),n=(0,r._P)("etlPrivateAlpha"),i="string"==typeof n?n.split(",").map(e=>e.trim()):[];return(0,r._P)("etlPrivateAlphaOverride")||i.includes(null!=(e=null==t?void 0:t.slug)?e:"")}},4922:(e,t,n)=>{n.d(t,{a:()=>l,t:()=>s});var r=n(67850),a=n(24523),i=n(26004);async function s(e,t){let{projectRef:n,pipelineId:r}=e;if(!n)throw Error("projectRef is required");if(!r)throw Error("pipelineId is required");let{data:i,error:s}=await (0,a.Jt)("/platform/replication/{ref}/pipelines/{pipeline_id}/version",{params:{path:{ref:n,pipeline_id:r}},signal:t});return s&&(0,a.H4)(s),i}let l=function(e){let{projectRef:t,pipelineId:n}=e,{enabled:a=!0,staleTime:l=1/0,refetchOnMount:o=!1,refetchOnWindowFocus:d=!1,...c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.I)({queryKey:i.l.pipelinesVersion(t,n),queryFn:e=>{let{signal:r}=e;return s({projectRef:t,pipelineId:n},r)},enabled:a&&void 0!==t&&void 0!==n,staleTime:l,refetchOnMount:o,refetchOnWindowFocus:d,...c})}},5282:(e,t,n)=>{n.d(t,{B:()=>r,G:()=>a});let r=5e3;var a=function(e){return e.FAILED="failed",e.STARTING="starting",e.STARTED="started",e.STOPPED="stopped",e.STOPPING="stopping",e.UNKNOWN="unknown",e}({})},10283:(e,t,n)=>{n.d(t,{u:()=>l});var r=n(67850),a=n(24523),i=n(26004);async function s(e,t){let{projectRef:n,pipelineId:r}=e;if(!n)throw Error("projectRef is required");if(!r)throw Error("pipelineId is required");let{data:i,error:s}=await (0,a.Jt)("/platform/replication/{ref}/pipelines/{pipeline_id}",{params:{path:{ref:n,pipeline_id:r}},signal:t});return s&&(0,a.H4)(s),i}let l=function(e){let{projectRef:t,pipelineId:n}=e,{enabled:a=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.I)({queryKey:i.l.pipelineById(t,n),queryFn:e=>{let{signal:r}=e;return s({projectRef:t,pipelineId:n},r)},enabled:a&&void 0!==t&&void 0!==n,...l})}},12006:(e,t,n)=>{n.d(t,{Mf:()=>i,d0:()=>o,zy:()=>l});var r=n(80263),a=n(53239),i=function(e){return e.None="None",e.StartRequested="StartRequested",e.StopRequested="StopRequested",e.RestartRequested="RestartRequested",e}({});let s=(0,a.createContext)(void 0),l=e=>{let{children:t}=e,[n,i]=(0,a.useState)({}),[l,o]=(0,a.useState)({}),d=(0,a.useRef)({}),c=(e,t,n)=>{i(n=>({...n,[e]:t})),o(r=>{if("None"===t){let{[e]:t,...n}=r;return n}return void 0!==n?{...r,[e]:n}:r});let r=d.current[e];if(void 0!==r&&(clearTimeout(r),delete d.current[e]),"None"!==t){let t=window.setTimeout(()=>{i(t=>t[e]&&"None"!==t[e]?{...t,[e]:"None"}:t),o(t=>{let{[e]:n,...r}=t;return r}),delete d.current[e]},1e4);d.current[e]=t}},p=(0,a.useCallback)((e,t)=>{"None"!==(n[e]||"None")&&t!==l[e]&&c(e,"None")},[n,l]);return(0,a.useEffect)(()=>()=>{Object.values(d.current).forEach(e=>clearTimeout(e)),d.current={}},[]),(0,r.jsx)(s.Provider,{value:{requestStatus:n,pipelineStatusSnapshot:l,setRequestStatus:c,getRequestStatus:e=>n[e]||"None",updatePipelineStatus:p},"data-sentry-element":"PipelineRequestStatusContext.Provider","data-sentry-component":"PipelineRequestStatusProvider","data-sentry-source-file":"replication-pipeline-request-status.tsx",children:t})},o=()=>{let e=(0,a.useContext)(s);if(void 0===e)throw Error("usePipelineRequestStatus must be used within a PipelineRequestStatusProvider");return e}},15135:(e,t,n)=>{n.d(t,{n:()=>d});var r=n(51355),a=n(80210),i=n(73969),s=n(24523),l=n(26004);async function o(e,t){let{projectRef:n,pipelineId:r}=e;if(!n)throw Error("projectRef is required");let{data:a,error:i}=await (0,s.bE)("/platform/replication/{ref}/pipelines/{pipeline_id}/start",{params:{path:{ref:n,pipeline_id:r}},signal:t});return i&&(0,s.H4)(i),a}let d=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,r.jE)();return(0,a.n)({mutationFn:e=>o(e),async onSuccess(t,n,r){let{projectRef:a,pipelineId:i}=n;await s.invalidateQueries({queryKey:l.l.pipelinesStatus(a,i)}),s.setQueriesData({queryKey:l.l.pipelinesStatus(a,i),exact:!0},e=>e?{...e,status:{name:"starting"}}:e),await (null==e?void 0:e(t,n,r))},async onError(e,n,r){void 0===t?i.oR.error("Failed to start pipeline: ".concat(e.message)):t(e,n,r)},...n})}},18907:(e,t,n)=>{n.d(t,{K:()=>l});var r=n(67850),a=n(24523),i=n(26004);async function s(e,t){let{projectRef:n,pipelineId:r}=e;if(!n)throw Error("projectRef is required");if(!r)throw Error("pipelineId is required");let{data:i,error:s}=await (0,a.Jt)("/platform/replication/{ref}/pipelines/{pipeline_id}/replication-status",{params:{path:{ref:n,pipeline_id:r}},signal:t});return s&&(0,a.H4)(s),i}let l=function(e){let{projectRef:t,pipelineId:n}=e,{enabled:a=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.I)({queryKey:i.l.pipelinesReplicationStatus(t,n),queryFn:e=>{let{signal:r}=e;return s({projectRef:t,pipelineId:n},r)},enabled:a&&void 0!==t&&void 0!==n,...l})}},21416:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(80263),a=n(52555),i=n.n(a),s=n(24487),l=n(21650),o=n(99779);let d=e=>{let{name:t="",isActive:n,isExternal:a,icon:d,rightIcon:c,url:p="",target:u="_self",onClick:f,textClassName:m="",hoverText:x="",label:g}=e,y=(0,r.jsx)(s.Ay.Item,{icon:d,rounded:!0,active:n,onClick:f,children:(0,r.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,r.jsxs)("div",{title:x||("string"==typeof t?t:""),className:"flex space-between items-center gap-2 truncate w-full "+m,children:[(0,r.jsx)("span",{className:"truncate flex-1",children:t}),void 0!==g&&(0,r.jsx)(l.E,{variant:"warning",size:"tiny",children:g})]}),c&&(0,r.jsx)("div",{children:c})]})});return p?a?(0,r.jsx)(o.$,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:d,children:(0,r.jsx)(i(),{href:p,target:"_blank",rel:"noreferrer",children:t})}):(0,r.jsx)(i(),{href:p,className:"block",target:u,children:y}):y}},22730:(e,t,n)=>{n.d(t,{z:()=>c});var r=n(78510),a=n(67850),i=n(24523),s=n(9620),l=n(85039),o=n(87727);async function d(e,t,n){let{projectRef:a,connectionString:s}=e;if(!a)throw Error("projectRef is required");let l=new Headers(n);s&&l.set("x-connection-encrypted",s);let{data:o,error:d}=await (0,i.Jt)("/platform/pg-meta/{ref}/extensions",{params:{header:{"x-connection-encrypted":s,"x-pg-application-name":r.r},path:{ref:a}},headers:l,signal:t});return d&&(0,i.H4)(d),o}let c=function(e){let{projectRef:t,connectionString:n}=e,{enabled:r=!0,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{data:c}=(0,s.YA)(),p=(null==c?void 0:c.status)===l.BU.ACTIVE_HEALTHY;return(0,a.I)({queryKey:o.I.list(t),queryFn:e=>{let{signal:r}=e;return d({projectRef:t,connectionString:n},r)},enabled:r&&void 0!==t&&p,...i})}},24487:(e,t,n)=>{n.d(t,{Ay:()=>u});var r=n(80263),a=n(53239),i=n(7981),s=n(80100);function l(e){let{children:t,className:n,tag:a="div",style:i}=e;return(0,r.jsx)("".concat(a),{style:i,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}l.Title=function(e){let{className:t,level:n=1,children:a,style:i}=e;return(0,r.jsx)("h".concat(n),{style:i,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:a})},l.Text=function(e){let{className:t,children:n,style:a,type:i,disabled:s,mark:l,code:o,keyboard:d,underline:c,strikethrough:p,strong:u,small:f}=e;return o?(0,r.jsx)("code",{style:a,children:n}):l?(0,r.jsx)("mark",{style:a,children:n}):d?(0,r.jsx)("kbd",{style:a,children:n}):u?(0,r.jsx)("strong",{style:a,children:n}):(0,r.jsx)("span",{style:a,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:n})},l.Link=function(e){let{children:t,target:n="_blank",href:a,className:i,onClick:s,style:l}=e;return(0,r.jsx)("a",{onClick:s,href:a,target:n,rel:"noopener noreferrer",style:l,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})};let o=(0,a.createContext)({type:"text"}),d=e=>{let{type:t}=e;return(0,r.jsx)(o.Provider,{value:{type:t},"data-sentry-element":"MenuContext.Provider","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},c=()=>{let e=(0,a.useContext)(o);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function p(e){let{children:t,className:n,ulClassName:a,style:i,type:s="text"}=e;return(0,r.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:n,style:i,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)(d,{type:s,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)("ul",{className:a,children:t})})})}p.Item=function(e){let{children:t,icon:n,active:a,rounded:l,onClick:o,doNotCloseOverlay:d=!1,showActiveBar:p=!1,style:u}=e,f=(0,i.A)("menu"),{type:m}=c(),x=[f.item.base];x.push(f.item.variants[m].base),a?x.push(f.item.variants[m].active):x.push(f.item.variants[m].normal);let g=[f.item.content.base];a?g.push(f.item.content.active):g.push(f.item.content.normal);let y=[f.item.icon.base];return a?y.push(f.item.icon.active):y.push(f.item.icon.normal),(0,r.jsxs)("li",{role:"menuitem",className:(0,s.cn)("outline-none",x),style:u,onClick:o,"aria-current":a?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[n&&(0,r.jsx)("div",{className:"".concat(y.join(" ")," min-w-fit"),children:n}),(0,r.jsx)("span",{className:g.join(" "),children:t})]})},p.Group=function(e){let{children:t,icon:n,title:a}=e,s=(0,i.A)("menu"),{type:l}=c();return(0,r.jsxs)("div",{className:[s.group.base,s.group.variants[l]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[n&&(0,r.jsx)("span",{className:s.group.icon,children:n}),(0,r.jsx)("span",{className:s.group.content,children:a}),t]})},p.Misc=function(e){let{children:t}=e;return(0,r.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)(l.Text,{"data-sentry-element":"Typography.Text","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)("span",{children:t})})})};let u=p},26004:(e,t,n)=>{n.d(t,{l:()=>r});let r={sources:e=>["projects",e,"sources"],destinations:e=>["projects",e,"destinations"],destinationById:(e,t)=>["projects",e,"destinations",t],publications:(e,t)=>["projects",e,"sources",t,"publications"],tables:(e,t)=>["projects",e,"sources",t,"tables"],pipelines:e=>["projects",e,"pipelines"],pipelineById:(e,t)=>["projects",e,"pipelines",t],pipelinesStatus:(e,t)=>["projects",e,"pipelines",t,"status"],pipelinesReplicationStatus:(e,t)=>["projects",e,"pipelines",t,"replication-status"],pipelinesVersion:(e,t)=>["projects",e,"pipelines",t,"version"]}},33106:(e,t,n)=>{n.d(t,{C:()=>l});var r=n(67850),a=n(24523),i=n(26004);async function s(e,t){let{projectRef:n,pipelineId:r}=e;if(!n)throw Error("projectRef is required");if(!r)throw Error("pipelineId is required");let{data:i,error:s}=await (0,a.Jt)("/platform/replication/{ref}/pipelines/{pipeline_id}/status",{params:{path:{ref:n,pipeline_id:r}},signal:t});return s&&(0,a.H4)(s),i}let l=function(e){let{projectRef:t,pipelineId:n}=e,{enabled:a=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.I)({queryKey:i.l.pipelinesStatus(t,n),queryFn:e=>{let{signal:r}=e;return s({projectRef:t,pipelineId:n},r)},enabled:a&&void 0!==t&&void 0!==n,...l})}},34991:(e,t,n)=>{n.d(t,{p:()=>i});var r=n(38483),a=n(15135);let i=()=>{let{mutateAsync:e}=(0,r.J)(),{mutateAsync:t}=(0,a.n)();return{restartPipeline:async n=>{let{projectRef:r,pipelineId:a}=n;try{await e({projectRef:r,pipelineId:a})}catch(e){throw Error("Failed to stop pipeline: ".concat(e.message))}try{await t({projectRef:r,pipelineId:a})}catch(e){throw Error("Failed to start pipeline: ".concat(e.message))}}}}},37873:(e,t,n)=>{n.d(t,{BS:()=>l,Dm:()=>c,HJ:()=>v,Rf:()=>y,Uw:()=>d,Vw:()=>b,Xr:()=>j,aw:()=>x,bV:()=>s,cJ:()=>f,dX:()=>p,eh:()=>o,fh:()=>w,gu:()=>u,sZ:()=>m,tn:()=>h,xp:()=>g});var r=n(80263),a=n(53239),i=n(80100);let s="mx-auto w-full max-w-[1200px]",l="px-4 @lg:px-6 @xl:px-10",o=(0,a.forwardRef)((e,t)=>{let{className:n,bottomPadding:a,size:s="default",...o}=e;return(0,r.jsx)("div",{ref:t,...o,className:(0,i.cn)("mx-auto w-full @container",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[s],l,a&&"pb-16",n)})}),d=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("header",{...a,ref:t,className:(0,i.cn)("w-full","flex-col gap-3 py-6",n)})}),c=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("h1",{ref:t,...a,className:(0,i.cn)(n)})}),p=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("p",{ref:t,...a,className:(0,i.cn)("text-sm text-foreground-light",n)})}),u=(0,a.forwardRef)((e,t)=>{let{className:n,isFullWidth:a,topPadding:s,...l}=e;return(0,r.jsx)("div",{ref:t,...l,className:(0,i.cn)("flex flex-col first:pt-12 py-6",a?"w-full":"gap-3 @md:grid-cols-12 @lg:grid",n)})}),f=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,...a,className:(0,i.cn)("w-full h-px bg-border",n)})}),m=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("h3",{ref:t,...a,className:(0,i.cn)("text-foreground text-xl",n)})}),x=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("p",{ref:t,...a,className:(0,i.cn)("text-sm text-foreground-light",n)})}),g=(0,a.forwardRef)((e,t)=>{let{className:n,children:a,title:s,...l}=e;return(0,r.jsxs)("div",{ref:t,...l,className:(0,i.cn)("col-span-4 xl:col-span-5 prose text-sm",n),children:[s&&(0,r.jsx)("h2",{children:s}),a]})}),y=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,...a,className:(0,i.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",n)})}),h=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,...a,className:(0,i.cn)("flex flex-col gap-3 items-center",n)})}),v=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,...a,className:(0,i.cn)("flex w-full items-center",n)})}),w=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,...a,className:(0,i.cn)("flex flex-row gap-3",n)})}),j=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,...a,className:(0,i.cn)("flex flex-col gap-3","min-w-[420px]",n)})}),b=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,...a,className:(0,i.cn)(s,l,"my-8 flex flex-col gap-8",n)})});d.displayName="ScaffoldHeader",c.displayName="ScaffoldTitle",p.displayName="ScaffoldDescription",o.displayName="ScaffoldContainer",f.displayName="ScaffoldDivider",u.displayName="ScaffoldSection",j.displayName="ScaffoldColumn",g.displayName="ScaffoldSectionDetail",y.displayName="ScaffoldSectionContent",h.displayName="ScaffoldFilterAndContent",v.displayName="ScaffoldActionsContainer",w.displayName="ScaffoldActionsGroup",b.displayName="ScaffoldContainerLegacy",m.displayName="ScaffoldSectionTitle",x.displayName="ScaffoldSectionDescription"},38483:(e,t,n)=>{n.d(t,{J:()=>d});var r=n(51355),a=n(80210),i=n(73969),s=n(24523),l=n(26004);async function o(e,t){let{projectRef:n,pipelineId:r}=e;if(!n)throw Error("projectRef is required");let{data:a,error:i}=await (0,s.bE)("/platform/replication/{ref}/pipelines/{pipeline_id}/stop",{params:{path:{ref:n,pipeline_id:r}},signal:t});return i&&(0,s.H4)(i),a}let d=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,r.jE)();return(0,a.n)({mutationFn:e=>o(e),async onSuccess(t,n,r){let{projectRef:a,pipelineId:i}=n;await s.invalidateQueries({queryKey:l.l.pipelinesStatus(a,i)}),await (null==e?void 0:e(t,n,r))},async onError(e,n,r){void 0===t?i.oR.error("Failed to stop pipeline: ".concat(e.message)):t(e,n,r)},...n})}},48940:(e,t,n)=>{n.d(t,{C4:()=>l,H$:()=>o,Ob:()=>i,mf:()=>c,n:()=>a,xc:()=>s});var r=n(12006);let a={RETRIEVE_PIPELINE:"Failed to retrieve pipeline information",RETRIEVE_PIPELINE_STATUS:"Failed to retrieve pipeline status",RETRIEVE_REPLICATION_STATUS:"Failed to retrieve table replication status",RETRIEVE_DESTINATIONS:"Failed to retrieve destinations",ENABLE_DESTINATION:"Failed to enable destination",DISABLE_DESTINATION:"Failed to disable destination",DELETE_DESTINATION:"Failed to delete destination",NO_PIPELINE_FOUND:"No pipeline found",COPY_TABLE_STATUS:"Failed to copy table status"},i=e=>{if(e&&"object"==typeof e&&"name"in e)return e.name},s=["stopped"],l=["started","failed"],o=["failed","started","stopped"],d={enabling:{title:"Starting pipeline",message:"Starting the pipeline. Replication will resume once running.",badge:"Starting"},disabling:{title:"Stopping pipeline",message:"Stopping the pipeline. Replication will be paused once stopped.",badge:"Stopping"},restarting:{title:"Restarting pipeline",message:"Applying settings and restarting the pipeline.",badge:"Restarting"},failed:{title:"Pipeline failed",message:"Replication has encountered an error.",badge:"Failed"},stopped:{title:"Pipeline stopped",message:"Replication is paused. Start the pipeline to resume data synchronization.",badge:"Stopped"},starting:{title:"Pipeline starting",message:"Initializing replication. Table status will be available once running.",badge:"Starting"},stopping:{title:"Pipeline stopping",message:"Stopping replication. Data transfer will be paused once stopped",badge:"Stopping"},running:{title:"Pipeline running",message:"Replication is active and processing changes",badge:"Running"},unknown:{title:"Pipeline status unknown",message:"Unable to determine pipeline status.",badge:"Unknown"},notRunning:{title:"Pipeline not running",message:"Replication is not active. Start the pipeline to begin data synchronization.",badge:"Stopped"}},c=(e,t)=>{if(e===r.Mf.RestartRequested)return d.restarting;if(e===r.Mf.StartRequested)return d.enabling;if(e===r.Mf.StopRequested)return d.disabling;switch(t){case"starting":return d.starting;case"failed":return d.failed;case"stopped":return d.stopped;case"started":return d.running;case"stopping":return d.stopping;case"unknown":return d.unknown;default:return d.notRunning}}},68132:(e,t,n)=>{n.d(t,{v:()=>b});var r=n(80263),a=n(73969),i=n(22891),s=n(33106),l=n(4922),o=n(34991),d=n(51355),c=n(80210),p=n(24523),u=n(26004);async function f(e,t){let{projectRef:n,pipelineId:r,versionId:a}=e;if(!n)throw Error("projectRef is required");if(!r)throw Error("pipelineId is required");if(!a)throw Error("versionId is required");let{data:i,error:s}=await (0,p.bE)("/platform/replication/{ref}/pipelines/{pipeline_id}/version",{params:{path:{ref:n,pipeline_id:r}},body:{version_id:a},signal:t});return s&&(0,p.H4)(s),i}let m=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,d.jE)();return(0,c.n)({mutationFn:e=>f(e),async onSuccess(t,n,a){let{projectRef:i,pipelineId:s}=n;await r.invalidateQueries({queryKey:u.l.pipelinesVersion(i,s)}),await (null==e?void 0:e(t,n,a))},async onError(e,n,i){let{projectRef:s,pipelineId:l}=n;(null==e?void 0:e.code)===404?await r.invalidateQueries({queryKey:u.l.pipelinesVersion(s,l)}):void 0===t?a.oR.error("Failed to update pipeline version: ".concat(e.message)):t(e,n,i)},...n})};var x=n(76174),g=n(12006),y=n(95137),h=n(66755),v=n(68421),w=n(48940),j=n(5282);let b=e=>{var t,n;let{visible:d,pipeline:c,confirmLabel:p,confirmLabelLoading:u="Updating",onClose:f}=e,{ref:b}=(0,i.g)(),{setRequestStatus:N}=(0,g.d0)(),{data:S}=(0,s.C)({projectRef:b,pipelineId:null==c?void 0:c.id},{refetchInterval:j.B}),R=null==S?void 0:S.status,E=(0,w.Ob)(R),I=E===j.G.STOPPED,{data:T}=(0,l.a)({projectRef:b,pipelineId:null==c?void 0:c.id}),_=null==T||null==(t=T.version)?void 0:t.name,P=null==T||null==(n=T.new_version)?void 0:n.name,{mutateAsync:A}=m(),{restartPipeline:q}=(0,o.p)(),C=async()=>{var e;if(!b||!(null==c?void 0:c.id))return;let t=null==T||null==(e=T.new_version)?void 0:e.id;if(t){try{await A({projectRef:b,pipelineId:c.id,versionId:t})}catch(e){null==e||e.code;return}if(I)a.oR.success("Pipeline successfully updated");else{N(c.id,g.Mf.RestartRequested,E);try{await q({projectRef:b,pipelineId:c.id}),a.oR.success("Pipeline successfully updated and is currently restarting")}catch(e){N(c.id,g.Mf.None),a.oR.error("Failed to restart pipeline")}}f()}};return(0,r.jsxs)(v.A,{size:"small",visible:d,title:"Update pipeline image",className:"!p-0",confirmLabel:null!=p?p:I?"Update image":"Update and restart",confirmLabelLoading:u,onCancel:f,onConfirm:C,"data-sentry-element":"ConfirmationModal","data-sentry-component":"UpdateVersionModal","data-sentry-source-file":"UpdateVersionModal.tsx",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-y-3 py-4 px-5",children:[(0,r.jsx)("p",{className:"text-sm text-foreground",children:"A new pipeline image is available with improvements and bug fixes. Proceed to update?"}),!I&&(0,r.jsx)("p",{className:"text-sm text-foreground-light",children:"The pipeline will automatically restart when updating. Replication will continue from where it left off."})]}),(0,r.jsx)(y.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"UpdateVersionModal.tsx"}),(0,r.jsxs)(h.Nt,{className:"px-5 py-3 group","data-sentry-element":"Collapsible_Shadcn_","data-sentry-source-file":"UpdateVersionModal.tsx",children:[(0,r.jsxs)(h.R6,{className:"w-full flex items-center justify-between text-sm text-foreground-light","data-sentry-element":"CollapsibleTrigger_Shadcn_","data-sentry-source-file":"UpdateVersionModal.tsx",children:[(0,r.jsx)("p",{children:"View version update details"}),(0,r.jsx)(x.A,{size:14,className:"group-data-[state=open]:-rotate-180 transition","data-sentry-element":"ChevronDown","data-sentry-source-file":"UpdateVersionModal.tsx"})]}),(0,r.jsx)(h.Ke,{"data-sentry-element":"CollapsibleContent_Shadcn_","data-sentry-source-file":"UpdateVersionModal.tsx",children:(0,r.jsxs)("div",{className:"flex flex-col gap-y-2 mt-2 pb-2",children:[(0,r.jsxs)("div",{className:"text-sm text-foreground prose max-w-full",children:[(0,r.jsx)("p",{className:"text-foreground-light mb-1",children:"Current version:"})," ",(0,r.jsx)("code",{className:"text-xs",children:null!=_?_:"Unknown"})]}),(0,r.jsxs)("div",{className:"text-sm text-foreground prose max-w-full",children:[(0,r.jsx)("p",{className:"text-foreground-light mb-1",children:"New version:"})," ",(0,r.jsx)("code",{className:"text-xs",children:null!=P?P:"Unknown"})]})]})})]})]})}},68296:(e,t,n)=>{n.d(t,{A:()=>x});var r=n(80263),a=n(80814),i=n(91958),s=n(93873),l=n(22730),o=n(78937),d=n(2657),c=n(9620),p=n(9497),u=n(29471),f=n(54278);let m=()=>{let{data:e}=(0,c.YA)(),t=(0,a.useRouter)().pathname.split("/")[4],{data:n}=(0,l.z)({projectRef:null==e?void 0:e.ref,connectionString:null==e?void 0:e.connectionString}),{data:p}=(0,o.Q)({projectRef:null==e?void 0:e.ref}),u=void 0!==(null!=n?n:[]).find(e=>"pg_net"===e.name),m=(null==p?void 0:p.selected_addons.find(e=>"pitr"===e.type))!==void 0,x=(0,i.p4)(),{databaseReplication:g,databaseRoles:y,integrationsWrappers:h}=(0,d.x)(["database:replication","database:roles","integrations:wrappers"]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.l,{page:t,menu:(0,f.k)(e,{pgNetExtensionExists:u,pitrEnabled:m,columnLevelPrivileges:x,showPgReplicate:g,showRoles:y,showWrappers:h}),"data-sentry-element":"ProductMenu","data-sentry-source-file":"DatabaseLayout.tsx"})})},x=(0,p.r)(e=>{let{children:t}=e;return(0,r.jsx)(u.k,{product:"Database",productMenu:(0,r.jsx)(m,{}),isBlocking:!1,"data-sentry-element":"ProjectLayout","data-sentry-component":"DatabaseLayout","data-sentry-source-file":"DatabaseLayout.tsx",children:t})})},72276:(e,t,n)=>{n.d(t,{z:()=>g});var r=n(80263),a=n(73886),i=n(60656),s=n(22891),l=n(74277),o=n(10723),d=n(12006),c=n(30404),p=n(60793),u=n(80100),f=n(16488),m=n(48940),x=n(5282);let g=e=>{var t;let{pipelineStatus:n,error:g,isLoading:y,isError:h,isSuccess:v,requestStatus:w,pipelineId:j}=e,{ref:b}=(0,s.g)(),N=(()=>{let e=n&&"object"==typeof n&&"name"in n?n.name:void 0,t=(0,m.mf)(w,e);if(w===d.Mf.RestartRequested)return{label:"Restarting",dot:(0,r.jsx)(a.A,{className:"animate-spin w-3 h-3 text-warning"}),color:"text-warning",tooltip:t.message};if(w===d.Mf.StartRequested)return{label:"Starting",dot:(0,r.jsx)(a.A,{className:"animate-spin w-3 h-3 text-warning"}),color:"text-warning",tooltip:t.message};if(w===d.Mf.StopRequested)return{label:"Stopping",dot:(0,r.jsx)(a.A,{className:"animate-spin w-3 h-3 text-warning"}),color:"text-warning",tooltip:t.message};if(n&&"object"==typeof n&&"name"in n)switch(n.name){case x.G.FAILED:return{label:"Failed",dot:(0,r.jsx)(i.A,{className:"w-3 h-3 text-destructive-600"}),color:"text-destructive-600",tooltip:t.message};case x.G.STARTING:return{label:"Starting",dot:(0,r.jsx)(a.A,{className:"animate-spin w-3 h-3 text-warning"}),color:"text-warning",tooltip:t.message};case x.G.STARTED:return{label:"Running",dot:(0,r.jsx)(l.S,{animate:!0,variant:"primary"}),color:"text-brand-600",tooltip:t.message};case x.G.STOPPED:return{label:"Stopped",dot:(0,r.jsx)("div",{className:"w-2 h-2 bg-foreground-lighter rounded-full"}),color:"text-foreground-light",tooltip:t.message};case x.G.STOPPING:return{label:"Stopping",dot:(0,r.jsx)(a.A,{className:"animate-spin w-3 h-3 text-warning"}),color:"text-warning",tooltip:t.message};case x.G.UNKNOWN:return{label:"Unknown",dot:(0,r.jsx)("div",{className:"w-2 h-2 bg-warning-600 rounded-full"}),color:"text-warning",tooltip:t.message};default:return{label:"Unknown",dot:(0,r.jsx)("div",{className:"w-2 h-2 bg-destructive-600 rounded-full"}),color:"text-destructive-600",tooltip:t.message}}return{label:"Unknown",dot:(0,r.jsx)("div",{className:"w-2 h-2 bg-destructive-600 rounded-full"}),color:"text-destructive-600",tooltip:"Pipeline status is unclear - check logs for details"}})(),S=j?"/project/".concat(b,"/logs/etl-replication-logs?f=").concat(encodeURIComponent(JSON.stringify({pipeline_id:j}))):"/project/".concat(b,"/logs/etl-replication-logs");return(0,r.jsxs)(r.Fragment,{children:[y&&(0,r.jsx)(f.Ay,{}),h&&(0,r.jsxs)(c.m_,{children:[(0,r.jsx)(c.k$,{children:(0,r.jsx)(p.id,{})}),(0,r.jsxs)(c.ZI,{side:"bottom",className:"w-64 text-center",children:["Unable to retrieve status: ",null==g?void 0:g.message]})]}),v&&(0,r.jsxs)(c.m_,{children:[(0,r.jsx)(c.k$,{asChild:!0,children:(0,r.jsxs)("div",{className:(0,u.cn)("flex items-center gap-2 text-sm w-min",N.color),children:[N.dot,(0,r.jsx)("span",{children:N.label})]})}),(0,r.jsxs)(c.ZI,{side:"bottom",children:[N.tooltip,["unknown","failed"].includes(null!=(t=null==n?void 0:n.name)?t:"")&&(0,r.jsxs)(r.Fragment,{children:[" ","Check the ",(0,r.jsx)(o.g,{href:S,children:"logs"})," for more information."]})]})]})]})}},74277:(e,t,n)=>{n.d(t,{S:()=>i});var r=n(80263),a=n(80100);let i=e=>{let{animate:t=!0,variant:n="primary"}=e;return(0,r.jsxs)("div",{className:"relative align-middle w-2.5 h-2.5","data-sentry-component":"DotPing","data-sentry-source-file":"DotPing.tsx",children:[(0,r.jsx)("span",{className:(0,a.cn)("absolute inset-0 rounded-full",t&&"animate-ping","primary"===n&&"bg-brand/20","default"===n&&"bg-selection/20","warning"===n&&"bg-warning/20"),style:{animationDelay:"1s",animationDuration:"1.5s"}}),(0,r.jsx)("span",{className:(0,a.cn)("absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 inline-block w-2 h-2 rounded-full","primary"===n&&"bg-brand","default"===n&&"bg-selection","warning"===n&&"bg-warning")})]})}},91205:(e,t,n)=>{n.d(t,{M:()=>s});var r=n(80263),a=n(80100),i=n(41273);let s=e=>{let{title:t,description:n,docsUrl:s,actions:l,className:o}=e;return(0,r.jsxs)("div",{className:(0,a.cn)("w-full mb-6 flex flex-col sm:flex-row md:items-center justify-between gap-4 ".concat(o)),"data-sentry-component":"FormHeader","data-sentry-source-file":"FormHeader.tsx",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("h3",{className:"text-foreground text-xl prose",children:t}),n&&(0,r.jsx)("p",{className:"prose text-sm max-w-2xl",children:n})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row md:items-center gap-x-2",children:[void 0!==s&&(0,r.jsx)(i.A,{href:s}),l]})]})}},93873:(e,t,n)=>{n.d(t,{l:()=>l});var r=n(80263),a=n(24487),i=n(21650),s=n(21416);let l=e=>{let{page:t,menu:n}=e;return(0,r.jsx)("div",{className:"flex flex-col space-y-8","data-sentry-component":"ProductMenu","data-sentry-source-file":"index.tsx",children:(0,r.jsx)(a.Ay,{type:"pills","data-sentry-element":"Menu","data-sentry-source-file":"index.tsx",children:n.map((e,l)=>(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"my-6 space-y-8",children:(0,r.jsxs)("div",{className:"mx-3",children:[(0,r.jsx)(a.Ay.Group,{title:e.title?(0,r.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,r.jsx)("span",{children:e.title}),e.isPreview&&(0,r.jsx)(i.E,{variant:"warning",children:"Not production ready"})]}):null}),(0,r.jsx)("div",{children:e.items.map(e=>{let n=e.pages?e.pages.includes(null!=t?t:""):t===e.key;return(0,r.jsx)(s.A,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:n,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),l!==n.length-1&&(0,r.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}}}]);