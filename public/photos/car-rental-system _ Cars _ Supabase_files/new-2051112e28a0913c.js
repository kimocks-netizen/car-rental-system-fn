try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b503b093-eee0-4cc1-9dc2-cee2660a8f5a",e._sentryDebugIdIdentifier="sentry-dbid-b503b093-eee0-4cc1-9dc2-cee2660a8f5a")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[77946],{107:(e,t,a)=>{var n=a(50117),s=a(94277),l=Object.prototype.hasOwnProperty;e.exports=s(function(e,t,a){l.call(e,a)?e[a].push(t):n(e,a,[t])})},36409:(e,t,a)=>{"use strict";a.d(t,{Q:()=>d});var n=a(91075),s=a(24523),l=a(34983),r=a(4359);async function i(e,t,a){let{limit:n=100,page:l=0,sort:r="name_asc",search:i=""}=e,d=0===i.length?void 0:i,{data:o,error:c}=await (0,s.Jt)("/platform/projects",{params:{query:{limit:n,offset:l*n,sort:r,search:d}},signal:t,headers:{...a,Version:"2"}});return c&&(0,s.H4)(c),o}let d=function(e){let{limit:t=100,sort:a="name_asc",search:s}=e,{enabled:d=!0,...o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{profile:c}=(0,l.xc)();return(0,n.q)({queryKey:r.g.infiniteList({limit:t,sort:a,search:s}),queryFn:e=>{let{signal:n,pageParam:l}=e;return i({limit:t,page:l,sort:a,search:s},n)},enabled:d&&void 0!==c,staleTime:18e5,getNextPageParam(e,a){let n=a.length;if(!(n*t>=e.pagination.count))return n},...o})}},36976:(e,t,a)=>{"use strict";a.d(t,{SB:()=>y,Y1:()=>u});var n=a(51355),s=a(80210),l=a(73969),r=a(24523),i=a(82773),d=a(19965),o=a(22238);async function c(e){let{name:t,kind:a,size:n,tier:s,payment_method:l,address:i,billing_name:d,tax_id:o}=e,{data:c,error:u}=await (0,r.bE)("/platform/organizations",{body:{name:t,kind:a,size:n,tier:s,payment_method:l,billing_name:null!=d?d:void 0,tax_id:null!=o?o:void 0,address:null!=i?i:void 0}});return u&&(0,r.H4)(u),c}let u=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,n.jE)();return(0,s.n)({mutationFn:e=>c(e),async onSuccess(t,a,n){!t||"pending_payment_intent_secret"in t||(r.setQueriesData({queryKey:d.O.list(),exact:!0},e=>e?[...e,(0,o.i0)(t)]:e),await r.invalidateQueries({queryKey:i.Q.list()})),await (null==e?void 0:e(t,a,n))},async onError(e,a,n){void 0===t?l.oR.error("Failed to create organization: ".concat(e.message)):t(e,a,n)},...a})};async function p(e){let{name:t,kind:a,size:n,buyerId:s}=e,{data:l,error:i}=await (0,r.bE)("/platform/organizations/cloud-marketplace",{body:{name:t,kind:a,size:n,buyer_id:s}});return i&&(0,r.H4)(i),l}let y=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,n.jE)();return(0,s.n)({mutationFn:e=>p(e),async onSuccess(t,a,n){t&&(r.setQueriesData({queryKey:d.O.list(),exact:!0},e=>e?[...e,(0,o.i0)(t)]:e),await r.invalidateQueries({queryKey:i.Q.list()})),await (null==e?void 0:e(t,a,n))},async onError(e,a,n){void 0===t?l.oR.error("Failed to create organization: ".concat(e.message)):t(e,a,n)},...a})}},54440:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/new",function(){return a(58361)}])},58361:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ed});var n=a(80263),s=a(83458),l=a(53239),r=a(32981),i=a(99265),d=a(91419),o=a(107),c=a.n(o),u=a(62284),p=a(796),y=a(80814),m=a(23850),x=a(87494),h=a(73969),f=a(10663),j=a(22891),g=a(41687),C=a(24092),b=a(88895),S=a(41273),v=a(85039),M=a(6217),w=a(78511),A=a(99779);let T=e=>{let{visible:t,onHide:a}=e;return(0,n.jsxs)(M.A,{hideFooter:!0,visible:t,size:"xlarge",header:(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{children:"Spend Cap"}),(0,n.jsx)(S.A,{href:"".concat(v.aq,"/guides/platform/cost-control#spend-cap")})]}),showCloseButton:!1,onCancel:()=>a(),"data-sentry-element":"Modal","data-sentry-component":"SpendCapModal","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,n.jsx)(M.A.Content,{"data-sentry-element":"Modal.Content","data-sentry-source-file":"SpendCapModal.tsx",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("p",{className:"text-sm",children:"Enabling the Spend Cap limits your usage to your plan's quota, which controls costs but can restrict your service. Disabling the spend cap removes these limits, but any extra usage beyond the plan's limit will be charged per usage."}),(0,n.jsx)("p",{className:"text-sm",children:"Launching additional projects or enabling project add-ons will incur additional monthly fees independent of your Spend Cap."}),(0,n.jsxs)(w.XI,{"data-sentry-element":"Table","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,n.jsx)(w.A0,{className:"[&_th]:h-7","data-sentry-element":"TableHeader","data-sentry-source-file":"SpendCapModal.tsx",children:(0,n.jsxs)(w.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,n.jsx)(w.nd,{className:"w-[50%]","data-sentry-element":"TableHead","data-sentry-source-file":"SpendCapModal.tsx",children:"Item"}),(0,n.jsx)(w.nd,{className:"w-[25%]","data-sentry-element":"TableHead","data-sentry-source-file":"SpendCapModal.tsx",children:"Limit"}),(0,n.jsx)(w.nd,{className:"w-[25%]","data-sentry-element":"TableHead","data-sentry-source-file":"SpendCapModal.tsx",children:"Rate"})]})}),(0,n.jsxs)(w.BF,{className:"[&_td]:py-2","data-sentry-element":"TableBody","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,n.jsxs)(w.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,n.jsx)(w.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Disk Size"}),(0,n.jsx)(w.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"8 GB per project"}),(0,n.jsx)(w.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$0.125 per GB"})]}),(0,n.jsxs)(w.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,n.jsx)(w.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Egress"}),(0,n.jsx)(w.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"250 GB"}),(0,n.jsx)(w.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$0.09 per GB"})]}),(0,n.jsxs)(w.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,n.jsx)(w.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Auth MAUs"}),(0,n.jsx)(w.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"100,000"}),(0,n.jsx)(w.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$0.00325 per user"})]}),(0,n.jsxs)(w.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,n.jsx)(w.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Auth Third-Party MAUs"}),(0,n.jsx)(w.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"100,000"}),(0,n.jsx)(w.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$0.00325 per user"})]}),(0,n.jsxs)(w.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,n.jsx)(w.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Auth Single Sign-On MAUs"}),(0,n.jsx)(w.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"50"}),(0,n.jsx)(w.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$0.015 per user"})]}),(0,n.jsxs)(w.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,n.jsx)(w.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Storage Size"}),(0,n.jsx)(w.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"100 GB"}),(0,n.jsx)(w.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$0.021 per GB"})]}),(0,n.jsxs)(w.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,n.jsx)(w.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Storage Image Transformations"}),(0,n.jsx)(w.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"100 origin images"}),(0,n.jsx)(w.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$5 per 1000 images"})]}),(0,n.jsxs)(w.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,n.jsx)(w.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Realtime Concurrent Peak Connections"}),(0,n.jsx)(w.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"500"}),(0,n.jsx)(w.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$10 per 1000"})]}),(0,n.jsxs)(w.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,n.jsx)(w.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Realtime Messages"}),(0,n.jsx)(w.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"5 Million"}),(0,n.jsx)(w.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$2.50 per Million"})]}),(0,n.jsxs)(w.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,n.jsx)(w.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Function Invocations"}),(0,n.jsx)(w.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"2 Million"}),(0,n.jsx)(w.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$2 per Million"})]})]})]})]})}),(0,n.jsx)(M.A.Separator,{"data-sentry-element":"Modal.Separator","data-sentry-source-file":"SpendCapModal.tsx"}),(0,n.jsx)(M.A.Content,{"data-sentry-element":"Modal.Content","data-sentry-source-file":"SpendCapModal.tsx",children:(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(A.$,{block:!0,type:"primary",onClick:()=>a(),"data-sentry-element":"Button","data-sentry-source-file":"SpendCapModal.tsx",children:"Understood"})})})]})};var _=a(10723),E=a(64778),N=a(36976),z=a(22238),O=a(36409),R=a(51355),k=a(80210),F=a(24523),P=a(19965),U=a(82773);async function D(e){let{payment_intent_id:t,name:a,kind:n,size:s}=e,{data:l,error:r}=await (0,F.bE)("/platform/organizations/confirm-subscription",{body:{payment_intent_id:t,name:a,kind:n,size:s}});return r&&(0,F.H4)(r),l}let H=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,R.jE)();return(0,k.n)({mutationFn:e=>D(e),async onSuccess(t,a,s){if(t&&"message"in t&&!("slug"in t))return void h.oR.success(t.message,{dismissible:!0,duration:1e4});n.setQueriesData({queryKey:P.O.list(),exact:!0},e=>e?[...e,(0,z.i0)(t)]:e),await n.invalidateQueries({queryKey:U.Q.list()}),await (null==e?void 0:e(t,a,s))},async onError(e,a,n){void 0===t?h.oR.error(e.message,{dismissible:!0,duration:1e4}):t(e,a,n)},...a})};var I=a(2657),L=a(28202),q=a(34983),B=a(65887),V=a(27371),Y=a(66329),$=a(72608),Q=a(44053),G=a(44725);let K=()=>(0,n.jsx)(E.A.Content,{"data-sentry-element":"Panel.Content","data-sentry-component":"UpgradeExistingOrganizationCallout","data-sentry-source-file":"UpgradeExistingOrganizationCallout.tsx",children:(0,n.jsx)(G.Z,{type:"default",title:"Looking to upgrade an existing project?",description:(0,n.jsx)("div",{children:(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["Supabase"," ",(0,n.jsx)(_.g,{href:"https://supabase.com/docs/guides/platform/billing-on-supabase",children:"bills per organization"}),". If you want to upgrade your existing projects,"," ",(0,n.jsx)(_.g,{href:"/org/_/billing?panel=subscriptionPlan",children:"upgrade your existing organization"})," ","instead."]})}),"data-sentry-element":"Admonition","data-sentry-source-file":"UpgradeExistingOrganizationCallout.tsx"})}),W={PERSONAL:"Personal",EDUCATIONAL:"Educational",STARTUP:"Startup",AGENCY:"Agency",COMPANY:"Company",UNDISCLOSED:"N/A"},J={1:"1 - 10",10:"10 - 49",50:"50 - 99",100:"100 - 299",300:"More than 300"},X=f.Ik({plan:f.Yj().transform(e=>e.toUpperCase()).pipe(f.k5(["FREE","PRO","TEAM"])),name:f.Yj().min(1,"Organization name is required"),kind:f.Yj().transform(e=>e.toUpperCase()).pipe(f.k5(["PERSONAL","EDUCATIONAL","STARTUP","AGENCY","COMPANY","UNDISCLOSED"])),size:f.k5(["1","10","50","100","300"]),spend_cap:f.zM()}),Z=(0,d.c)(v.WS),ee="new-org-form",et=e=>{var t,a;let{onPaymentMethodReset:s,setupIntent:d,onPlanSelected:o}=e,f=(0,y.useRouter)(),S=(0,q.xc)(),{resolvedTheme:M}=(0,p.D)(),w=(0,I.x)("billing:all"),{data:R,isSuccess:k}=(0,z.Ad)(),{data:F}=(0,O.Q)({}),P=(0,l.useMemo)(()=>{var e;return null!=(e=null==F?void 0:F.pages.flatMap(e=>e.projects))?e:[]},[null==F?void 0:F.pages]),[U]=(0,L.U)(j.rS.LAST_VISITED_ORGANIZATION,""),D=(R||[]).filter(e=>"free"===e.plan.id),G=(0,l.useMemo)(()=>c()(P,"organization_slug"),[P]),et=(0,l.useMemo)(()=>({clientSecret:d?d.client_secret:"",appearance:(0,g.D)(M),paymentMethodCreation:"manual"}),[d,M]),[ea]=(0,m.ab)({returnTo:m.tU.withDefault(""),auth_id:m.tU.withDefault(""),token:m.tU.withDefault("")}),[en]=(0,m.ab)({name:m.tU.withDefault(""),kind:m.tU.withDefault("PERSONAL"),plan:m.tU.withDefault("FREE"),size:m.tU.withDefault("1"),spend_cap:m.cr.withDefault(!0)}),es=(0,x.mN)({resolver:(0,r.u)(X),defaultValues:{plan:en.plan.toUpperCase(),name:en.name,kind:en.kind,size:en.size,spend_cap:en.spend_cap}});(0,l.useEffect)(()=>{es.reset({plan:en.plan.toUpperCase(),name:en.name,kind:en.kind,size:en.size,spend_cap:en.spend_cap})},[en,es]),(0,l.useEffect)(()=>{if(!es.getValues("name")&&k&&(null==R?void 0:R.length)===0&&S.isSuccess){var e;let t=(null==(e=S.profile)?void 0:e.username)?S.profile.username+"'s Org":"My Org";es.setValue("name",t)}},[k,es,null==R?void 0:R.length,null==(t=S.profile)?void 0:t.username,S.isSuccess]);let[el,er]=(0,l.useState)(!1),[ei,ed]=(0,l.useState)(),[eo,ec]=(0,l.useState)(!1),[eu,ep]=(0,l.useState)(!1),[ey,em]=(0,l.useState)(null),ex=(0,l.useMemo)(()=>D.some(e=>{var t;return(null==(t=G[e.slug])?void 0:t.length)>0}),[D,G]),{mutate:eh}=(0,N.Y1)({onSuccess:async e=>{"pending_payment_intent_secret"in e&&e.pending_payment_intent_secret?em(e.pending_payment_intent_secret):eg(e)},onError:e=>{h.oR.error(e.message,{duration:1e4}),eM(),er(!1)}}),{mutate:ef}=H({onSuccess:e=>{e&&"slug"in e&&eg({slug:e.slug})}}),ej=async e=>{var t;em(""),(null==(t=e.paymentIntent)?void 0:t.status)==="succeeded"?await ef({payment_intent_id:e.paymentIntent.id,name:es.getValues("name"),kind:es.getValues("kind"),size:es.getValues("size")}):(h.oR.error("Could not confirm payment. Please try again or use a different card.",{duration:1e4}),eM(),er(!1))},eg=e=>{var t;let a=(null==(t=S.profile)?void 0:t.username)?S.profile.username+"'s Project":"My Project";if(ea.returnTo){let e=new URL(ea.returnTo,window.location.origin);ea.auth_id&&e.searchParams.set("auth_id",ea.auth_id),ea.token&&e.searchParams.set("token",ea.token),f.push(e.toString(),void 0,{shallow:!1})}else f.push("/new/".concat(e.slug,"?projectName=").concat(a))},eC=(0,l.useMemo)(()=>({clientSecret:ey,appearance:(0,g.D)(M)}),[ey,M]);async function eb(e,t,a){var n;let s="PRO"!==e.plan||e.spend_cap?e.plan:"PAYG";eh({name:e.name,kind:e.kind,tier:"tier_"+s.toLowerCase(),..."COMPANY"==e.kind?{size:e.size}:{},payment_method:t,billing_name:"FREE"===s||null==a?void 0:a.billing_name,address:"FREE"===s?null:null==a?void 0:a.address,tax_id:"FREE"===s?void 0:null!=(n=null==a?void 0:a.tax_id)?n:void 0})}let eS=(0,l.useRef)(null),ev=async e=>{if(er(!0),"FREE"===e.plan)await eb(e);else if(ei)eb(e,ei.id);else{var t;let a=await (null==(t=eS.current)?void 0:t.createPaymentMethod());if(a){ed(a.paymentMethod);let t={address:a.address,billing_name:a.customerName,tax_id:a.taxId};eb(e,a.paymentMethod.id,t)}else er(!1)}},eM=()=>(ed(void 0),s());return(0,n.jsx)(B.lV,{...es,"data-sentry-element":"Form_Shadcn_","data-sentry-component":"NewOrgForm","data-sentry-source-file":"NewOrgForm.tsx",children:(0,n.jsxs)("form",{onSubmit:es.handleSubmit(ev),id:ee,children:[(0,n.jsx)(E.A,{title:(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:"Create a new organization"}),(0,n.jsx)("p",{className:"text-sm text-foreground-lighter text-balance",children:"Organizations are a way to group your projects. Each organization can be configured with different team members and billing settings."})]},"panel-title"),footer:(0,n.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,n.jsx)(A.$,{type:"default",disabled:el||eo,onClick:()=>{U?f.push("/org/".concat(U)):f.push("/organizations")},children:"Cancel"}),(0,n.jsx)(A.$,{form:ee,htmlType:"submit",type:"primary",loading:el,disabled:el,children:"Create organization"})]},"panel-footer"),noHideOverflow:!0,titleClasses:"rounded-t-md",footerClasses:"rounded-b-md","data-sentry-element":"Panel","data-sentry-source-file":"NewOrgForm.tsx",children:(0,n.jsxs)("div",{className:"divide-y divide-border-muted",children:[(0,n.jsx)(E.A.Content,{"data-sentry-element":"Panel.Content","data-sentry-source-file":"NewOrgForm.tsx",children:(0,n.jsx)(B.zB,{control:es.control,name:"name",render:e=>{let{field:t}=e;return(0,n.jsx)(Q.M,{label:"Name",layout:"horizontal",description:"What's the name of your company or team? You can change this later.",children:(0,n.jsx)(B.MJ,{children:(0,n.jsx)(V.p,{autoFocus:!0,type:"text",placeholder:"Organization name","data-1p-ignore":!0,"data-lpignore":"true","data-form-type":"other","data-bwignore":!0,...t})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx"})}),(0,n.jsx)(E.A.Content,{"data-sentry-element":"Panel.Content","data-sentry-source-file":"NewOrgForm.tsx",children:(0,n.jsx)(B.zB,{control:es.control,name:"kind",render:e=>{let{field:t}=e;return(0,n.jsx)(Q.M,{label:"Type",layout:"horizontal",description:"What best describes your organization?",children:(0,n.jsx)(B.MJ,{children:(0,n.jsxs)(Y.l6,{value:t.value,onValueChange:t.onChange,children:[(0,n.jsx)(Y.bq,{className:"w-full",children:(0,n.jsx)(Y.yv,{})}),(0,n.jsx)(Y.gC,{children:Object.entries(W).map(e=>{let[t,a]=e;return(0,n.jsx)(Y.eb,{value:t,children:a},t)})})]})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx"})}),"COMPANY"==es.watch("kind")&&(0,n.jsx)(E.A.Content,{children:(0,n.jsx)(B.zB,{control:es.control,name:"size",render:e=>{let{field:t}=e;return(0,n.jsx)(Q.M,{label:"Company size",layout:"horizontal",description:"How many people are in your company?",children:(0,n.jsx)(B.MJ,{children:(0,n.jsxs)(Y.l6,{value:t.value,onValueChange:t.onChange,children:[(0,n.jsx)(Y.bq,{className:"w-full",children:(0,n.jsx)(Y.yv,{})}),(0,n.jsx)(Y.gC,{children:Object.entries(J).map(e=>{let[t,a]=e;return(0,n.jsx)(Y.eb,{value:t,children:a},t)})})]})})})}})}),w&&(0,n.jsx)(E.A.Content,{children:(0,n.jsx)(B.zB,{control:es.control,name:"plan",render:e=>{let{field:t}=e;return(0,n.jsx)(Q.M,{label:"Plan",layout:"horizontal",description:(0,n.jsxs)(n.Fragment,{children:["Which plan fits your organization's needs best?"," ",(0,n.jsx)(_.g,{href:"https://supabase.com/pricing",children:"Learn more"}),"."]}),children:(0,n.jsx)(B.MJ,{children:(0,n.jsxs)(Y.l6,{value:t.value,onValueChange:e=>{t.onChange(e),o(e)},children:[(0,n.jsx)(Y.bq,{className:"w-full",children:(0,n.jsx)(Y.yv,{})}),(0,n.jsx)(Y.gC,{children:Object.entries(v.ho).map(e=>{let[t,a]=e;return(0,n.jsx)(Y.eb,{value:t,translate:"no",children:a},t)})})]})})})}})}),"PRO"===es.watch("plan")&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.A.Content,{className:"border-b border-panel-border-interior-light dark:border-panel-border-interior-dark",children:(0,n.jsx)(B.zB,{control:es.control,name:"spend_cap",render:e=>{let{field:t}=e;return(0,n.jsx)(Q.M,{label:(0,n.jsxs)("div",{className:"flex space-x-2 text-sm items-center",children:[(0,n.jsx)("span",{children:"Spend Cap"}),(0,n.jsx)(u.A,{size:16,strokeWidth:1.5,className:"transition opacity-50 cursor-pointer hover:opacity-100",onClick:()=>ep(!0)})]}),layout:"horizontal",description:t.value?"Usage is limited to the plan's quota.":"You pay for overages beyond the plan's quota.",children:(0,n.jsx)(B.MJ,{children:(0,n.jsx)($.d,{checked:t.value,onCheckedChange:t.onChange})})})}})}),(0,n.jsx)(T,{visible:eu,onHide:()=>ep(!1)})]}),d&&"FREE"!==es.watch("plan")&&(0,n.jsx)(E.A.Content,{className:"pt-5",children:(0,n.jsx)(i.Elements,{stripe:Z,options:et,children:(0,n.jsx)(b.S,{ref:eS,email:null==(a=S.profile)?void 0:a.primary_email,readOnly:el||eo})})}),ex&&"FREE"!==es.getValues("plan")&&(0,n.jsx)(K,{})]})}),Z&&ey&&ei&&(0,n.jsx)(i.Elements,{stripe:Z,options:eC,children:(0,n.jsx)(C.i,{paymentIntentSecret:ey,onPaymentIntentConfirm:e=>ej(e),onLoadingChange:e=>ec(e),onError:e=>{h.oR.error(e.message,{duration:1e4}),er(!1),eM()}})})]})})};var ea=a(66444),en=a(10508),es=a(78540);async function el(e){let{hcaptchaToken:t}=e,{data:a,error:n}=await (0,F.bE)("/platform/stripe/setup-intent",{body:{hcaptchaToken:t}});return n&&(0,F.H4)(n),a}let er=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,k.n)({mutationFn:e=>el(e),async onSuccess(t,a,n){await (null==e?void 0:e(t,a,n))},async onError(e,a,n){void 0===t?h.oR.error("Failed to setup intent: ".concat(e.message)):t(e,a,n)},...a})},ei=()=>{let[e,t]=(0,l.useState)(),[a,r]=(0,l.useState)(null),[i,d]=(0,l.useState)(null),[o,c]=(0,l.useState)(null),{mutate:u}=er({onSuccess:e=>t(e)}),p=(0,l.useCallback)(e=>{d(e)},[]),y=async e=>{if(!e)return console.error("Hcaptcha token is required");t(void 0),u({hcaptchaToken:e})},m=async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(null!=o&&"FREE"!==o&&(null==e||t)&&i){let e=a;try{if(!e){var n;let t=await i.execute({async:!0});e=null!=(n=null==t?void 0:t.response)?n:null}}catch(e){return}await y(null!=e?e:void 0),x()}};(0,l.useEffect)(()=>{m()},[i,o]);let x=()=>{r(null),null==i||i.resetCaptcha()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.A,{ref:p,sitekey:"4ca1fdb9-c9c9-4495-ba50-c85fc0e7ec1f",size:"invisible",onVerify:e=>{r(e)},onClose:()=>{t(void 0)},onExpire:()=>{r(null)},"data-sentry-element":"HCaptcha","data-sentry-source-file":"index.tsx"}),(0,n.jsx)(et,{setupIntent:e,onPaymentMethodReset:()=>(t(void 0),m(!0)),onPlanSelected:e=>c(e),"data-sentry-element":"NewOrgForm","data-sentry-source-file":"index.tsx"})]})};ei.getLayout=e=>(0,n.jsx)(ea.A,{children:(0,n.jsx)(en.A,{headerTitle:"New organization",children:(0,n.jsx)(es.A,{children:e})})});let ed=ei},66444:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var n=a(80263);let s=e=>{let{children:t}=e;return(0,n.jsx)("div",{className:"h-full min-h-[0px] basis-0 flex-1","data-sentry-component":"AppLayout","data-sentry-source-file":"AppLayout.tsx",children:t})}},78540:(e,t,a)=>{"use strict";a.d(t,{A:()=>r,U:()=>i});var n=a(80263),s=a(9497);let l=e=>{let{children:t}=e;return(0,n.jsx)("div",{className:"flex w-full flex-col","data-sentry-component":"WizardLayout","data-sentry-source-file":"WizardLayout.tsx",children:(0,n.jsx)("div",{className:"overflow-auto",children:(0,n.jsx)("section",{className:"has-slide-in slide-in relative mx-auto my-10 max-w-2xl",children:t})})})},r=(0,s.r)(l),i=l}},e=>{e.O(0,[60858,15599,16110,27764,36538,44033,83458,27803,76984,72391,35035,40545,596,10508,41610,90636,46593,38792],()=>e(e.s=54440)),_N_E=e.O()}]);