try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="17ee1426-8f22-4747-9a7f-864a0040d6ad",e._sentryDebugIdIdentifier="sentry-dbid-17ee1426-8f22-4747-9a7f-864a0040d6ad")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[43327],{5879:(e,t,n)=>{"use strict";n.d(t,{j:()=>l});var s=n(80263),r=n(53239),a=n(80100);let l=(0,r.forwardRef)((e,t)=>{let{preTab:n,postTab:r,children:l,className:o,...i}=e;return(0,s.jsxs)("div",{ref:t,...i,className:(0,a.cn)("flex -space-x-px",o),children:[n&&(0,s.jsx)("div",{className:"border border-strong bg-surface-300 rounded-l-md px-3 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-foreground-lighter text-xs font-mono",children:n})}),(0,s.jsx)("div",{className:(0,a.cn)("flex-1",{"[&_input]:rounded-l-none [&_select]:rounded-l-none [&_textarea]:rounded-l-none":!!n,"[&_input]:rounded-r-none [&_select]:rounded-r-none [&_textarea]:rounded-r-none":!!r}),children:l}),r&&(0,s.jsx)("div",{className:"border border-strong bg-surface-300 rounded-r-md px-3 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-foreground-lighter text-xs font-mono",children:r})})]})})},37631:(e,t,n)=>{"use strict";n.d(t,{$E:()=>u,kV:()=>d,op:()=>c});var s=n(67850),r=n(51355),a=n(24523),l=n(85039),o=n(53239),i=n(31907);async function d(e,t){let{projectRef:n}=e;if(!n)throw Error("projectRef is required");let{data:s,error:r}=await (0,a.Jt)("/platform/auth/{ref}/config",{params:{path:{ref:n}},signal:t});return r&&(0,a.H4)(r),s}let c=function(e){let{projectRef:t}=e,{enabled:n=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.I)({queryKey:i.Z.authConfig(t),queryFn:e=>{let{signal:n}=e;return d({projectRef:t},n)},enabled:n&&l.pe&&void 0!==t,...r})},u=e=>{let{projectRef:t}=e,n=(0,r.jE)();return(0,o.useCallback)(()=>{t&&n.prefetchQuery({queryKey:i.Z.authConfig(t),queryFn:e=>{let{signal:n}=e;return d({projectRef:t},n)}})},[n,t])}},39624:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var s=n(80263),r=n(12123);let a=e=>{let{resourceText:t,isFullPage:n=!1}=e,a=()=>(0,s.jsx)("div",{className:"block w-full rounded border border-opacity-20 py-4 px-6 border-overlay bg-surface-200","data-sentry-component":"NoPermissionMessage","data-sentry-source-file":"NoPermission.tsx",children:(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)(r.A,{size:20,"data-sentry-element":"AlertCircle","data-sentry-source-file":"NoPermission.tsx"})}),(0,s.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("p",{className:"text-sm",children:["You need additional permissions to ",t]}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Contact your organization owner or administrator for assistance."})})]})})]})});return n?(0,s.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,s.jsx)("div",{className:"w-[550px]",children:(0,s.jsx)(a,{})})}):(0,s.jsx)(a,{})}},42459:(e,t,n)=>{"use strict";n.d(t,{c:()=>d});var s=n(80263),r=n(52555),a=n.n(r),l=n(80100),o=n(99779),i=n(44725);let d=e=>{let{urlBack:t,fullHeight:n=!0}=e;return(0,s.jsx)("div",{className:(0,l.cn)("w-full flex items-center justify-center",n&&"h-full"),"data-sentry-component":"UnknownInterface","data-sentry-source-file":"UnknownInterface.tsx",children:(0,s.jsx)(i.Z,{type:"note",className:"max-w-xl",title:"Looking for something?",description:"We couldn't find the page that you're looking for","data-sentry-element":"Admonition","data-sentry-source-file":"UnknownInterface.tsx",children:(0,s.jsx)(o.$,{asChild:!0,type:"default",className:"mt-2","data-sentry-element":"Button","data-sentry-source-file":"UnknownInterface.tsx",children:(0,s.jsx)(a(),{href:t,"data-sentry-element":"Link","data-sentry-source-file":"UnknownInterface.tsx",children:"Head back"})})})})}},43023:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>C});var s=n(80263),r=n(72112),a=n(22891),l=n(32981),o=n(53239),i=n(87494),d=n(73969),c=n(10663),u=n(37873),m=n(44168),f=n(79318),h=n(39624),x=n(8344),y=n(37631),p=n(97492),g=n(80090),_=n(84512),j=n(85039),A=n(65887),v=n(78039),b=n(5879),S=n(27371),N=n(99779),E=n(16488),I=n(44053);let F=c.Ik({API_MAX_REQUEST_DURATION:c.au.number().min(5,"Must be 5 or larger").max(30,"Must be a value no greater than 30"),DB_MAX_POOL_SIZE:f.H}),w=()=>{let{ref:e}=(0,a.g)(),{data:t}=(0,_.s)(),{can:n}=(0,g.Qp)(r.aG.READ,"custom_config_gotrue"),{can:f}=(0,g.Qp)(r.aG.UPDATE,"custom_config_gotrue"),[w,P]=(0,o.useState)(!1),[T,D]=(0,o.useState)(!1),{data:O,error:M,isError:k,isLoading:R}=(0,y.op)({projectRef:e}),{mutate:C}=(0,p.U)(),U=(null==t?void 0:t.plan.id)!=="free"&&(null==t?void 0:t.plan.id)!=="pro",L=j.pe&&!U,X=(0,i.mN)({resolver:(0,l.u)(c.Ik({API_MAX_REQUEST_DURATION:F.shape.API_MAX_REQUEST_DURATION})),defaultValues:{API_MAX_REQUEST_DURATION:10}}),B=(0,i.mN)({resolver:(0,l.u)(c.Ik({DB_MAX_POOL_SIZE:F.shape.DB_MAX_POOL_SIZE})),defaultValues:{DB_MAX_POOL_SIZE:""}});return((0,o.useEffect)(()=>{if(O){if(!w){var e;X.reset({API_MAX_REQUEST_DURATION:null!=(e=null==O?void 0:O.API_MAX_REQUEST_DURATION)?e:10})}T||B.reset({DB_MAX_POOL_SIZE:(null==O?void 0:O.DB_MAX_POOL_SIZE)!==null?String(null==O?void 0:O.DB_MAX_POOL_SIZE):""})}},[O,w,T]),k)?(0,s.jsx)(u.gu,{isFullWidth:!0,children:(0,s.jsx)(m.A,{error:M,subject:"Failed to retrieve auth configuration"})}):n?R?(0,s.jsx)(u.gu,{isFullWidth:!0,children:(0,s.jsx)(E.yV,{})}):(0,s.jsxs)(s.Fragment,{children:[L&&(0,s.jsx)("div",{className:"my-4",children:(0,s.jsx)(x.A,{primaryText:"Upgrade to Team or Enterprise",secondaryText:"Advanced Auth server settings are only available on the Team Plan and up.",buttonText:"Upgrade to Team"})}),(0,s.jsxs)(u.gu,{isFullWidth:!0,"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"AdvancedAuthSettingsForm.tsx",children:[(0,s.jsx)(u.sZ,{className:"mb-4","data-sentry-element":"ScaffoldSectionTitle","data-sentry-source-file":"AdvancedAuthSettingsForm.tsx",children:"Request Duration"}),(0,s.jsx)(A.lV,{...X,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"AdvancedAuthSettingsForm.tsx",children:(0,s.jsx)("form",{onSubmit:X.handleSubmit(t=>{if(!e)return console.error("Project ref is required");U&&(P(!0),C({projectRef:e,config:t},{onError:e=>{d.oR.error("Failed to update request duration settings: ".concat(null==e?void 0:e.message)),P(!1)},onSuccess:()=>{d.oR.success("Successfully updated request duration settings"),P(!1)}}))}),className:"space-y-4",children:(0,s.jsxs)(v.Zp,{"data-sentry-element":"Card","data-sentry-source-file":"AdvancedAuthSettingsForm.tsx",children:[(0,s.jsx)(v.Wu,{className:"pt-6","data-sentry-element":"CardContent","data-sentry-source-file":"AdvancedAuthSettingsForm.tsx",children:(0,s.jsx)(A.zB,{control:X.control,name:"API_MAX_REQUEST_DURATION",render:e=>{let{field:t}=e;return(0,s.jsx)(I.M,{layout:"flex-row-reverse",label:"Maximum time allowed for an Auth request to last",description:"Number of seconds to wait for an Auth request to complete before canceling it. In certain high-load situations setting a larger or smaller value can be used to control load-shedding. Recommended: 10 seconds.",children:(0,s.jsx)(A.MJ,{children:(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(b.j,{postTab:"seconds",children:(0,s.jsx)(S.p,{type:"number",min:5,max:30,...t,disabled:!f||L})})})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"AdvancedAuthSettingsForm.tsx"})}),(0,s.jsxs)(v.wL,{className:"justify-end space-x-2","data-sentry-element":"CardFooter","data-sentry-source-file":"AdvancedAuthSettingsForm.tsx",children:[X.formState.isDirty&&(0,s.jsx)(N.$,{type:"default",onClick:()=>X.reset(),children:"Cancel"}),(0,s.jsx)(N.$,{type:"primary",htmlType:"submit",disabled:!f||w||!X.formState.isDirty||L,loading:w,"data-sentry-element":"Button","data-sentry-source-file":"AdvancedAuthSettingsForm.tsx",children:"Save changes"})]})]})})})]}),(0,s.jsxs)(u.gu,{isFullWidth:!0,"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"AdvancedAuthSettingsForm.tsx",children:[(0,s.jsx)(u.sZ,{className:"mb-4","data-sentry-element":"ScaffoldSectionTitle","data-sentry-source-file":"AdvancedAuthSettingsForm.tsx",children:"Auth Database Connections"}),(0,s.jsx)(A.lV,{...B,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"AdvancedAuthSettingsForm.tsx",children:(0,s.jsx)("form",{onSubmit:B.handleSubmit(t=>{if(!e)return console.error("Project ref is required");D(!0),C({projectRef:e,config:{DB_MAX_POOL_SIZE:t.DB_MAX_POOL_SIZE}},{onError:e=>{d.oR.error("Failed to update database connection settings: ".concat(null==e?void 0:e.message)),D(!1)},onSuccess:()=>{d.oR.success("Successfully updated database connection settings"),D(!1)}})}),className:"space-y-4",children:(0,s.jsxs)(v.Zp,{"data-sentry-element":"Card","data-sentry-source-file":"AdvancedAuthSettingsForm.tsx",children:[(0,s.jsx)(v.Wu,{className:"pt-6","data-sentry-element":"CardContent","data-sentry-source-file":"AdvancedAuthSettingsForm.tsx",children:(0,s.jsx)(A.zB,{control:B.control,name:"DB_MAX_POOL_SIZE",render:e=>{let{field:t}=e;return(0,s.jsx)(I.M,{layout:"flex-row-reverse",label:"Max Direct Auth Connections",description:"Auth will take up no more than this number of connections from the total number of available connections to serve requests. These connections are not reserved, so when unused they are released. Defaults to 10 connections.",children:(0,s.jsx)(A.MJ,{children:(0,s.jsx)(S.p,{type:"number",placeholder:"10",...t,disabled:!f||L})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"AdvancedAuthSettingsForm.tsx"})}),(0,s.jsxs)(v.wL,{className:"justify-end space-x-2","data-sentry-element":"CardFooter","data-sentry-source-file":"AdvancedAuthSettingsForm.tsx",children:[B.formState.isDirty&&(0,s.jsx)(N.$,{type:"default",onClick:()=>B.reset(),children:"Cancel"}),(0,s.jsx)(N.$,{type:"primary",htmlType:"submit",disabled:!f||T||!B.formState.isDirty,loading:T,"data-sentry-element":"Button","data-sentry-source-file":"AdvancedAuthSettingsForm.tsx",children:"Save changes"})]})]})})})]})]}):(0,s.jsx)(u.gu,{isFullWidth:!0,children:(0,s.jsx)(h.A,{resourceText:"view auth configuration settings"})})};var P=n(87442),T=n(10508),D=n(8750),O=n(53931),M=n(42459),k=n(2657);let R=()=>{let{ref:e}=(0,a.g)(),t=(0,k.x)("authentication:advanced"),{can:n,isSuccess:l}=(0,g.Qp)(r.aG.READ,"custom_config_gotrue");return t?l&&!n?(0,s.jsx)(h.A,{isFullPage:!0,resourceText:"access your project's authentication settings"}):(0,s.jsx)(u.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-component":"AdvancedPage","data-sentry-source-file":"advanced.tsx",children:l?(0,s.jsx)(w,{}):(0,s.jsx)(u.gu,{isFullWidth:!0,children:(0,s.jsx)(O.yV,{})})}):(0,s.jsx)(M.c,{urlBack:"/project/".concat(e,"/auth/users")})};R.getLayout=e=>(0,s.jsx)(T.A,{children:(0,s.jsx)(P.A,{children:(0,s.jsx)(D.M,{title:"Advanced",subtitle:"Configure advanced authentication server settings",children:e})})});let C=R},65641:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/auth/advanced",function(){return n(43023)}])},79318:(e,t,n)=>{"use strict";n.d(t,{H:()=>s,y:()=>r});let s=n(10663).Yj().transform(e=>""===e?null:e).nullable().refine(e=>null===e||!isNaN(Number(e)),{message:"Invalid number"}).transform(e=>null===e?null:Number(e)),r=e=>""===e||null===e?null:parseInt(e)},87442:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var s=n(80263),r=n(80814),a=n(22891),l=n(91958),o=n(93873),i=n(37631),d=n(2657),c=n(9497),u=n(29471),m=n(1458);let f=()=>{let e=(0,r.useRouter)(),{ref:t="default"}=(0,a.g)(),n=(0,a._P)("authOverviewPage"),c=(0,a._P)("EnableOAuth21"),u=(0,l.hN)(),{authenticationSignInProviders:f,authenticationRateLimits:h,authenticationEmails:x,authenticationMultiFactor:y,authenticationAttackProtection:p,authenticationAdvanced:g}=(0,d.x)(["authentication:sign_in_providers","authentication:rate_limits","authentication:emails","authentication:multi_factor","authentication:attack_protection","authentication:advanced"]);(0,i.$E)({projectRef:t});let _=e.pathname.split("/")[4];return(0,s.jsx)(o.l,{page:_,menu:(0,m.B)(t,{authenticationSignInProviders:f,authenticationRateLimits:h,authenticationEmails:x,authenticationMultiFactor:y,authenticationAttackProtection:p,authenticationAdvanced:g,authenticationShowOverview:n,authenticationShowSecurityNotifications:u,authenticationOauth21:c}),"data-sentry-element":"ProductMenu","data-sentry-component":"AuthProductMenu","data-sentry-source-file":"AuthLayout.tsx"})},h=(0,c.r)(e=>{let{children:t}=e;return(0,s.jsx)(u.k,{title:"Authentication",product:"Authentication",productMenu:(0,s.jsx)(f,{}),isBlocking:!1,"data-sentry-element":"ProjectLayout","data-sentry-component":"AuthLayout","data-sentry-source-file":"AuthLayout.tsx",children:t})})}},e=>{e.O(0,[60858,15599,16110,27764,36538,44033,76984,72391,35035,40545,596,10508,48340,75187,29471,8750,50143,90636,46593,38792],()=>e(e.s=65641)),_N_E=e.O()}]);