try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="fec4210a-c49f-47e1-8896-78aea5e6a4db",e._sentryDebugIdIdentifier="sentry-dbid-fec4210a-c49f-47e1-8896-78aea5e6a4db")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[77272],{6104:(e,t,r)=>{"use strict";r.d(t,{yr:()=>l});var a=r(56028),s=r(12532);let n=(0,a.BX)({loading:!1,setLoading:e=>{n.loading=e}}),l=e=>(0,s.s)(n,e)},12098:(e,t,r)=>{"use strict";r.d(t,{d:()=>n});var a=r(80263),s=r(38985);let n=(0,a.jsx)("div",{className:"flex items-center justify-center rounded bg-black p-1",children:(0,a.jsx)("svg",{className:"m-auto fill-current text-white",width:"12px",height:"12px",viewBox:"0 0 1155 1000",children:(0,a.jsx)("path",{d:"M577.344 0L1154.69 1000H0L577.344 0Z"})})});s.A},23979:(e,t,r)=>{"use strict";r.d(t,{b:()=>i});var a=r(67850),s=r(24523),n=r(63408);async function l(e,t){let{organization_integration_id:r}=e;if(!r)throw Error("organization_integration_id is required");let{data:a,error:n}=await (0,s.Jt)("/platform/integrations/vercel/projects/{organization_integration_id}",{params:{path:{organization_integration_id:r},query:{limit:1e3}},signal:t});return n&&(0,s.H4)(n),a.projects}let i=function(e){let{organization_integration_id:t}=e,{enabled:r=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.I)({queryKey:n.Z.vercelProjectList(t),queryFn:e=>{let{signal:r}=e;return l({organization_integration_id:t},r)},enabled:r&&void 0!==t,...s})}},30075:(e,t,r)=>{var a=r(50117);e.exports=r(94277)(function(e,t,r){a(e,r,t)})},37873:(e,t,r)=>{"use strict";r.d(t,{BS:()=>i,Dm:()=>d,HJ:()=>y,Rf:()=>j,Uw:()=>c,Vw:()=>v,Xr:()=>N,aw:()=>m,bV:()=>l,cJ:()=>p,dX:()=>f,eh:()=>o,fh:()=>S,gu:()=>u,sZ:()=>x,tn:()=>h,xp:()=>g});var a=r(80263),s=r(53239),n=r(80100);let l="mx-auto w-full max-w-[1200px]",i="px-4 @lg:px-6 @xl:px-10",o=(0,s.forwardRef)((e,t)=>{let{className:r,bottomPadding:s,size:l="default",...o}=e;return(0,a.jsx)("div",{ref:t,...o,className:(0,n.cn)("mx-auto w-full @container",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[l],i,s&&"pb-16",r)})}),c=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("header",{...s,ref:t,className:(0,n.cn)("w-full","flex-col gap-3 py-6",r)})}),d=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h1",{ref:t,...s,className:(0,n.cn)(r)})}),f=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,...s,className:(0,n.cn)("text-sm text-foreground-light",r)})}),u=(0,s.forwardRef)((e,t)=>{let{className:r,isFullWidth:s,topPadding:l,...i}=e;return(0,a.jsx)("div",{ref:t,...i,className:(0,n.cn)("flex flex-col first:pt-12 py-6",s?"w-full":"gap-3 @md:grid-cols-12 @lg:grid",r)})}),p=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,...s,className:(0,n.cn)("w-full h-px bg-border",r)})}),x=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,...s,className:(0,n.cn)("text-foreground text-xl",r)})}),m=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,...s,className:(0,n.cn)("text-sm text-foreground-light",r)})}),g=(0,s.forwardRef)((e,t)=>{let{className:r,children:s,title:l,...i}=e;return(0,a.jsxs)("div",{ref:t,...i,className:(0,n.cn)("col-span-4 xl:col-span-5 prose text-sm",r),children:[l&&(0,a.jsx)("h2",{children:l}),s]})}),j=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,...s,className:(0,n.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",r)})}),h=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,...s,className:(0,n.cn)("flex flex-col gap-3 items-center",r)})}),y=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,...s,className:(0,n.cn)("flex w-full items-center",r)})}),S=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,...s,className:(0,n.cn)("flex flex-row gap-3",r)})}),N=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,...s,className:(0,n.cn)("flex flex-col gap-3","min-w-[420px]",r)})}),v=(0,s.forwardRef)((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,...s,className:(0,n.cn)(l,i,"my-8 flex flex-col gap-8",r)})});c.displayName="ScaffoldHeader",d.displayName="ScaffoldTitle",f.displayName="ScaffoldDescription",o.displayName="ScaffoldContainer",p.displayName="ScaffoldDivider",u.displayName="ScaffoldSection",N.displayName="ScaffoldColumn",g.displayName="ScaffoldSectionDetail",j.displayName="ScaffoldSectionContent",h.displayName="ScaffoldFilterAndContent",y.displayName="ScaffoldActionsContainer",S.displayName="ScaffoldActionsGroup",v.displayName="ScaffoldContainerLegacy",x.displayName="ScaffoldSectionTitle",m.displayName="ScaffoldSectionDescription"},38985:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(86848).A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},47652:(e,t,r)=>{"use strict";r.d(t,{T:()=>d});var a=r(51355),s=r(80210),n=r(73969),l=r(24523),i=r(6104),o=r(63408);async function c(e){let{organizationIntegrationId:t,connection:r}=e,{data:a,error:s}=await (0,l.bE)("/platform/integrations/vercel/connections",{body:{organization_integration_id:t,connection:{foreign_project_id:r.foreign_project_id,supabase_project_ref:r.supabase_project_ref,metadata:r.metadata}}});return s&&(0,l.H4)(s),a}let d=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,a.jE)(),d=(0,i.yr)();return(0,s.n)({mutationFn:e=>c(e),async onSuccess(t,r,a){await Promise.all([l.invalidateQueries({queryKey:o.Z.integrationsList()}),l.invalidateQueries({queryKey:o.Z.integrationsListWithOrg(r.orgSlug)}),l.invalidateQueries({queryKey:o.Z.vercelProjectList(r.organizationIntegrationId)}),l.invalidateQueries({queryKey:o.Z.vercelConnectionsList(r.organizationIntegrationId)})]),await (null==e?void 0:e(t,r,a))},async onError(e,r,a){d.setLoading(!1),void 0===t?n.oR.error("Failed to create connection: ".concat(e.message)):t(e,r,a)},...r})}},65073:(e,t,r)=>{"use strict";r.d(t,{A:()=>E});var a=r(80263),s=r(23892),n=r(76174),l=r(90376),i=r(80814),o=r(53239),c=r(73969),d=r(30691),f=r(42659),u=r(21890),p=r(37115),x=r(2657),m=r(84512),g=r(85039),j=r(77192),h=r(36289),y=r(52555),S=r.n(y),N=r(80100),v=r(21650),w=r(99779),_=r(29244),b=r(61548);let E=e=>{var t,r,y;let{slug:E,organizationIntegrationId:A,foreignProjects:R,onCreateConnections:P,installedConnections:k=h.Oj,isLoading:L,integrationIcon:O,getForeignProjectIcon:T,choosePrompt:C="Choose a project",onSkip:U,loadingForeignProjects:I,showNoEntitiesState:B=!0,defaultSupabaseProjectRef:G,defaultForeignProjectId:D,mode:z}=e,K=(0,i.useRouter)(),q=(0,x.x)("projects:create"),[W,H]=(0,o.useState)(!1),[F,Y]=(0,o.useState)(!1),[Z,$]=(0,o.useState)(D),[V,X]=(0,o.useState)(G),{data:J}=(0,m.s)(),{data:M,isLoading:Q}=(0,u.C0)({slug:E}),ee=null!=(t=null==M?void 0:M.pages[0].pagination.count)?t:0;(0,o.useEffect)(()=>{void 0!==G&&void 0===V&&X(G)},[G,V]),(0,o.useEffect)(()=>{void 0!==D&&void 0===Z&&$(D)},[D,Z]);let et=new Set(k.map(e=>e.foreign_project_id)),{data:er}=(0,p.wT)({ref:V}),ea=Z?R.find(e=>{var t;return(null==(t=e.id)?void 0:t.toLowerCase())===(null==Z?void 0:Z.toLowerCase())}):void 0,es=e=>{let{children:t,className:r,...s}=e;return(0,a.jsx)("div",{className:(0,N.cn)("flex-1 min-w-0 flex flex-col grow gap-6 px-5 mx-auto w-full justify-center items-center",r),...s,"data-sentry-component":"Panel","data-sentry-source-file":"ProjectLinker.tsx",children:t})},en=0===ee,el=0===R.length,ei=en?"Supabase":z,eo=en?z:"Supabase";return(0,a.jsxs)("div",{className:"flex flex-col bg border shadow rounded-lg overflow-hidden","data-sentry-component":"ProjectLinker","data-sentry-source-file":"ProjectLinker.tsx",children:[(0,a.jsxs)("div",{className:"relative p-12 border-b border-muted",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-grid-black/5 [mask-image:linear-gradient(0deg,#fff,rgba(255,255,255,0.6))] dark:bg-grid-white/5 dark:[mask-image:linear-gradient(0deg,rgba(255,255,255,0.1),rgba(255,255,255,0.5))]",style:{backgroundPosition:"10px 10px"}}),I?(0,a.jsxs)("div",{className:"w-1/2 mx-auto space-y-2 py-4",children:[(0,a.jsx)("p",{className:"text-sm text-foreground text-center",children:"Loading projects"}),(0,a.jsx)(f.A,{active:!0})]}):B&&(en||el)?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("h5",{className:"text-foreground",children:["No ",ei," Projects found"]}),(0,a.jsxs)("p",{className:"text-foreground-light text-sm",children:["You will need to create a ",ei," Project to link to a ",eo," ","Project.",(0,a.jsx)("br",{}),"You can skip this and create a Project Connection later."]})]}):(0,a.jsxs)("div",{className:"flex justify-center gap-0 w-full relative",children:[(0,a.jsxs)(es,{children:[(0,a.jsx)("div",{className:"bg-white shadow border rounded p-1 w-12 h-12 flex justify-center items-center",children:(0,a.jsx)("img",{src:"".concat(g.o2,"/img/supabase-logo.svg"),alt:"Supabase",className:"w-6"})}),(0,a.jsx)(d.S,{sameWidthAsTrigger:!0,open:W,setOpen:H,slug:E,selectedRef:V,onSelect:e=>{X(e.ref),H(!1)},renderRow:e=>(0,a.jsxs)("div",{className:(0,N.cn)("w-full flex items-center justify-between"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsx)("div",{className:"bg-white shadow border rounded p-1 w-6 h-6 flex justify-center items-center",children:(0,a.jsx)("img",{src:"".concat(g.o2,"/img/supabase-logo.svg"),alt:"Supabase",className:"w-4"})}),(0,a.jsx)("p",{children:e.name}),"INACTIVE"===e.status&&(0,a.jsx)(v.E,{children:"Paused"}),"GOING_DOWN"===e.status&&(0,a.jsx)(v.E,{children:"Pausing"})]}),e.ref===V&&(0,a.jsx)(s.A,{size:16})]}),renderTrigger:()=>(0,a.jsx)(w.$,{type:"default",block:!0,disabled:void 0!==G||Q,loading:Q,className:"justify-between h-[34px]",iconRight:void 0===G?(0,a.jsx)("span",{className:"grow flex justify-end",children:(0,a.jsx)(n.A,{})}):null,children:(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsx)("div",{className:"bg-white shadow border rounded p-1 w-6 h-6 flex justify-center items-center",children:(0,a.jsx)("img",{src:"".concat(g.o2,"/img/supabase-logo.svg"),alt:"Supabase",className:"w-4"})}),er?er.name:"Choose Supabase Project"]})}),renderActions:()=>q&&(0,a.jsx)(_.L$,{children:(0,a.jsx)(_.h_,{className:"cursor-pointer w-full",onSelect:()=>{H(!1),K.push("/new/".concat(null==J?void 0:J.slug))},onClick:()=>H(!1),children:(0,a.jsxs)(S(),{href:"/new/".concat(null==J?void 0:J.slug),onClick:()=>{H(!1)},className:"w-full flex items-center gap-2",children:[(0,a.jsx)(l.A,{size:14,strokeWidth:1.5}),(0,a.jsx)("p",{children:"Create a new project"})]})})})})]}),(0,a.jsx)("div",{className:"border border-foreground-lighter h-px w-8 border-dashed self-end mb-4"}),(0,a.jsxs)(es,{children:[(0,a.jsx)("div",{className:"bg-black shadow rounded p-1 w-12 h-12 flex justify-center items-center",children:O}),(0,a.jsxs)(b.AM,{open:F,onOpenChange:Y,children:[(0,a.jsx)(b.Wv,{asChild:!0,children:(0,a.jsx)(w.$,{type:"default",block:!0,disabled:I,loading:I,className:"justify-start h-[34px]",icon:(0,a.jsx)("div",{children:ea&&null!=(r=null==T?void 0:T(ea))?r:O}),iconRight:(0,a.jsx)("span",{className:"grow flex justify-end",children:(0,a.jsx)(n.A,{})}),children:null!=(y=ea&&ea.name)?y:C})}),(0,a.jsx)(b.hl,{className:"p-0",side:"bottom",align:"center",sameWidthAsTrigger:!0,children:(0,a.jsxs)(_.uB,{children:[(0,a.jsx)(_.G7,{placeholder:"Search for a project"}),(0,a.jsxs)(_.oI,{className:"!max-h-[170px]",children:[(0,a.jsx)(_.xL,{children:"No results found."}),(0,a.jsxs)(_.L$,{children:[R.map((e,t)=>{var r;return(0,a.jsxs)(_.h_,{value:"".concat(e.name.replaceAll('"',""),"-").concat(t),className:"flex gap-2 items-center",onSelect:()=>{e.id&&$(e.id),Y(!1)},children:[(0,a.jsx)("div",{children:null!=(r=null==T?void 0:T(e))?r:O}),(0,a.jsx)("span",{className:"truncate",title:e.name,children:e.name})]},e.id)}),0===R.length&&(0,a.jsx)(_.xL,{children:"No results found."})]}),"GitHub"===z&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.fx,{}),(0,a.jsx)(_.L$,{children:(0,a.jsxs)(_.h_,{className:"flex gap-2 items-center cursor-pointer",onSelect:()=>(0,j.Fd)("install"),children:[(0,a.jsx)(l.A,{size:16}),"Add GitHub Repositories"]})})]})]})]})})]})]})]})]}),(0,a.jsxs)("div",{className:"flex w-full justify-end gap-2 p-4 bg-surface-75",children:[void 0!==U&&(0,a.jsx)(w.$,{size:"medium",type:"default",onClick:()=>{U()},children:"Skip"}),(0,a.jsx)(w.$,{size:"medium",className:"self-end",onClick:function(){return(null==ea?void 0:ea.id)?(null==er?void 0:er.ref)?et.has(null!=Z?Z:"")?c.oR.error("Unable to connect to ".concat(ea.name,": Selected repository already has an installed connection to a project")):void P({organizationIntegrationId:A,connection:{foreign_project_id:null==ea?void 0:ea.id,supabase_project_ref:null==er?void 0:er.ref,integration_id:"0",metadata:{...ea}},orgSlug:null==J?void 0:J.slug,new:{installation_id:ea.installation_id,project_ref:er.ref,repository_id:Number(ea.id)}}):console.error("No Supabase project ref set"):console.error("No Foreign project ID set")},loading:L,disabled:I||Q||L||!er||!ea,"data-sentry-element":"Button","data-sentry-source-file":"ProjectLinker.tsx",children:"Connect project"})]})]})}},86561:(e,t,r)=>{"use strict";r.d(t,{O:()=>a});let a=Object.values({POSTGRES_URL:{key:"POSTGRES_URL",type:"encrypted"},POSTGRES_PRISMA_URL:{key:"POSTGRES_PRISMA_URL",type:"encrypted"},POSTGRES_URL_NON_POOLING:{key:"POSTGRES_URL_NON_POOLING",type:"encrypted"},POSTGRES_USER:{key:"POSTGRES_USER",type:"encrypted"},POSTGRES_HOST:{key:"POSTGRES_HOST",type:"encrypted"},POSTGRES_PASSWORD:{key:"POSTGRES_PASSWORD",type:"encrypted"},POSTGRES_DATABASE:{key:"POSTGRES_DATABASE",type:"encrypted"},SUPABASE_ANON_KEY:{key:"SUPABASE_ANON_KEY",type:"encrypted"},SUPABASE_URL:{key:"SUPABASE_URL",type:"encrypted"},SUPABASE_SERVICE_ROLE_KEY:{key:"SUPABASE_SERVICE_ROLE_KEY",type:"encrypted"},SUPABASE_JWT_SECRET:{key:"SUPABASE_JWT_SECRET",type:"encrypted"},NEXT_PUBLIC_SUPABASE_ANON_KEY:{key:"NEXT_PUBLIC_SUPABASE_ANON_KEY",type:"encrypted"},NEXT_PUBLIC_SUPABASE_URL:{key:"NEXT_PUBLIC_SUPABASE_URL",type:"encrypted"}}).map(e=>e.key)},98690:(e,t,r)=>{"use strict";r.d(t,{$:()=>i});var a=r(67850),s=r(24523),n=r(63408);async function l(e,t){let{orgSlug:r}=e;if(!r)throw Error("orgSlug is required");let{data:a,error:n}=await (0,s.Jt)("/platform/integrations/{slug}",{params:{path:{slug:r}}});return n&&(0,s.H4)(n),a}let i=function(e){let{orgSlug:t}=e,{enabled:r=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.I)({queryKey:n.Z.integrationsListWithOrg(t),queryFn:e=>{let{signal:r}=e;return l({orgSlug:t},r)},enabled:r&&void 0!==t,staleTime:18e5,...s})}}}]);