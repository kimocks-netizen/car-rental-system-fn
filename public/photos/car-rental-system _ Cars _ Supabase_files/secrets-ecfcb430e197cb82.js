try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="6c9e5fe2-fcb6-4450-9086-5f984a8fba15",e._sentryDebugIdIdentifier="sentry-dbid-6c9e5fe2-fcb6-4450-9086-5f984a8fba15")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[83145],{16097:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(86848).A)("CircleMinus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]])},19686:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>c});var n={};s.r(n),s.d(n,{BRAND:()=>i.qt,DIRTY:()=>a.jm,EMPTY_PATH:()=>a.I3,INVALID:()=>a.uY,NEVER:()=>i.tm,OK:()=>a.OK,ParseStatus:()=>a.MY,Schema:()=>i.Sj,ZodAny:()=>i.Ml,ZodArray:()=>i.n,ZodBigInt:()=>i.Lr,ZodBoolean:()=>i.WF,ZodBranded:()=>i.eN,ZodCatch:()=>i.hw,ZodDate:()=>i.aP,ZodDefault:()=>i.Xi,ZodDiscriminatedUnion:()=>i.jv,ZodEffects:()=>i.k1,ZodEnum:()=>i.Vb,ZodError:()=>o.G,ZodFirstPartyTypeKind:()=>i.kY,ZodFunction:()=>i.CZ,ZodIntersection:()=>i.Jv,ZodIssueCode:()=>o.eq,ZodLazy:()=>i.Ih,ZodLiteral:()=>i.DN,ZodMap:()=>i.Ut,ZodNaN:()=>i.Tq,ZodNativeEnum:()=>i.WM,ZodNever:()=>i.iS,ZodNull:()=>i.PQ,ZodNullable:()=>i.l1,ZodNumber:()=>i.rS,ZodObject:()=>i.bv,ZodOptional:()=>i.Ii,ZodParsedType:()=>l.Zp,ZodPipeline:()=>i._c,ZodPromise:()=>i.$i,ZodReadonly:()=>i.EV,ZodRecord:()=>i.b8,ZodSchema:()=>i.lK,ZodSet:()=>i.Kz,ZodString:()=>i.ND,ZodSymbol:()=>i.K5,ZodTransformer:()=>i.BG,ZodTuple:()=>i.y0,ZodType:()=>i.aR,ZodUndefined:()=>i._Z,ZodUnion:()=>i.fZ,ZodUnknown:()=>i._,ZodVoid:()=>i.a0,addIssueToContext:()=>a.zn,any:()=>i.bz,array:()=>i.YO,bigint:()=>i.o,boolean:()=>i.zM,coerce:()=>i.au,custom:()=>i.Ie,date:()=>i.p6,datetimeRegex:()=>i.fm,defaultErrorMap:()=>r.su,discriminatedUnion:()=>i.gM,effect:()=>i.QZ,enum:()=>i.k5,function:()=>i.fH,getErrorMap:()=>r.$W,getParsedType:()=>l.CR,instanceof:()=>i.Nl,intersection:()=>i.E$,isAborted:()=>a.G4,isAsync:()=>a.xP,isDirty:()=>a.DM,isValid:()=>a.fn,late:()=>i.fn,lazy:()=>i.RZ,literal:()=>i.eu,makeIssue:()=>a.y7,map:()=>i.Tj,nan:()=>i.oi,nativeEnum:()=>i.fc,never:()=>i.Zm,null:()=>i.ch,nullable:()=>i.me,number:()=>i.ai,object:()=>i.Ik,objectUtil:()=>l.o6,oboolean:()=>i.yN,onumber:()=>i.p7,optional:()=>i.lq,ostring:()=>i.Di,pipeline:()=>i.Tk,preprocess:()=>i.vk,promise:()=>i.iv,quotelessJson:()=>o.WI,record:()=>i.g1,set:()=>i.hZ,setErrorMap:()=>r.pJ,strictObject:()=>i.re,string:()=>i.Yj,symbol:()=>i.HR,transformer:()=>i.Gu,tuple:()=>i.PV,undefined:()=>i.Vx,union:()=>i.KC,unknown:()=>i.L5,util:()=>l.ZS,void:()=>i.rI});var r=s(54686),a=s(93298),l=s(14595),i=s(10663),o=s(63324);let c=n},21416:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var n=s(80263),r=s(52555),a=s.n(r),l=s(24487),i=s(21650),o=s(99779);let c=e=>{let{name:t="",isActive:s,isExternal:r,icon:c,rightIcon:d,url:u="",target:m="_self",onClick:x,textClassName:y="",hoverText:h="",label:f}=e,p=(0,n.jsx)(l.Ay.Item,{icon:c,rounded:!0,active:s,onClick:x,children:(0,n.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,n.jsxs)("div",{title:h||("string"==typeof t?t:""),className:"flex space-between items-center gap-2 truncate w-full "+y,children:[(0,n.jsx)("span",{className:"truncate flex-1",children:t}),void 0!==f&&(0,n.jsx)(i.E,{variant:"warning",size:"tiny",children:f})]}),d&&(0,n.jsx)("div",{children:d})]})});return u?r?(0,n.jsx)(o.$,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:c,children:(0,n.jsx)(a(),{href:u,target:"_blank",rel:"noreferrer",children:t})}):(0,n.jsx)(a(),{href:u,className:"block",target:m,children:p}):p}},24487:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>m});var n=s(80263),r=s(53239),a=s(7981),l=s(80100);function i(e){let{children:t,className:s,tag:r="div",style:a}=e;return(0,n.jsx)("".concat(r),{style:a,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}i.Title=function(e){let{className:t,level:s=1,children:r,style:a}=e;return(0,n.jsx)("h".concat(s),{style:a,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:r})},i.Text=function(e){let{className:t,children:s,style:r,type:a,disabled:l,mark:i,code:o,keyboard:c,underline:d,strikethrough:u,strong:m,small:x}=e;return o?(0,n.jsx)("code",{style:r,children:s}):i?(0,n.jsx)("mark",{style:r,children:s}):c?(0,n.jsx)("kbd",{style:r,children:s}):m?(0,n.jsx)("strong",{style:r,children:s}):(0,n.jsx)("span",{style:r,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:s})},i.Link=function(e){let{children:t,target:s="_blank",href:r,className:a,onClick:l,style:i}=e;return(0,n.jsx)("a",{onClick:l,href:r,target:s,rel:"noopener noreferrer",style:i,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})};let o=(0,r.createContext)({type:"text"}),c=e=>{let{type:t}=e;return(0,n.jsx)(o.Provider,{value:{type:t},"data-sentry-element":"MenuContext.Provider","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},d=()=>{let e=(0,r.useContext)(o);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function u(e){let{children:t,className:s,ulClassName:r,style:a,type:l="text"}=e;return(0,n.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:s,style:a,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,n.jsx)(c,{type:l,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,n.jsx)("ul",{className:r,children:t})})})}u.Item=function(e){let{children:t,icon:s,active:r,rounded:i,onClick:o,doNotCloseOverlay:c=!1,showActiveBar:u=!1,style:m}=e,x=(0,a.A)("menu"),{type:y}=d(),h=[x.item.base];h.push(x.item.variants[y].base),r?h.push(x.item.variants[y].active):h.push(x.item.variants[y].normal);let f=[x.item.content.base];r?f.push(x.item.content.active):f.push(x.item.content.normal);let p=[x.item.icon.base];return r?p.push(x.item.icon.active):p.push(x.item.icon.normal),(0,n.jsxs)("li",{role:"menuitem",className:(0,l.cn)("outline-none",h),style:m,onClick:o,"aria-current":r?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[s&&(0,n.jsx)("div",{className:"".concat(p.join(" ")," min-w-fit"),children:s}),(0,n.jsx)("span",{className:f.join(" "),children:t})]})},u.Group=function(e){let{children:t,icon:s,title:r}=e,l=(0,a.A)("menu"),{type:i}=d();return(0,n.jsxs)("div",{className:[l.group.base,l.group.variants[i]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[s&&(0,n.jsx)("span",{className:l.group.icon,children:s}),(0,n.jsx)("span",{className:l.group.content,children:r}),t]})},u.Misc=function(e){let{children:t}=e;return(0,n.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,n.jsx)(i.Text,{"data-sentry-element":"Typography.Text","data-sentry-source-file":"Menu.tsx",children:(0,n.jsx)("span",{children:t})})})};let m=u},39624:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var n=s(80263),r=s(12123);let a=e=>{let{resourceText:t,isFullPage:s=!1}=e,a=()=>(0,n.jsx)("div",{className:"block w-full rounded border border-opacity-20 py-4 px-6 border-overlay bg-surface-200","data-sentry-component":"NoPermissionMessage","data-sentry-source-file":"NoPermission.tsx",children:(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(r.A,{size:20,"data-sentry-element":"AlertCircle","data-sentry-source-file":"NoPermission.tsx"})}),(0,n.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("p",{className:"text-sm",children:["You need additional permissions to ",t]}),(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Contact your organization owner or administrator for assistance."})})]})})]})});return s?(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,n.jsx)("div",{className:"w-[550px]",children:(0,n.jsx)(a,{})})}):(0,n.jsx)(a,{})}},46087:(e,t,s)=>{"use strict";s.d(t,{$:()=>i,s:()=>l});var n=s(53239),r=s(23850),a=s(73969);function l(e){let{enabled:t,urlKey:s,select:a,onError:l}=e,[i,o]=(0,r.ZA)(s,r.tU.withOptions({history:"push",clearOnDefault:!0})),c=(0,n.useMemo)(()=>i?a(i):void 0,[i,a]);return(0,n.useEffect)(()=>{t&&i&&!c&&(l(Error("not found"),i),o(null))},[t,l,i,o,c]),{value:c,setValue:o}}let i=(e,t,s)=>{t!==e.current?a.oR.error(s):e.current=null}},73036:(e,t,s)=>{"use strict";s.d(t,{$:()=>a});var n=s(53239),r=s(74065);let a=e=>{let{checkIsDirty:t,onClose:s}=e,[a,l]=(0,n.useState)(!1),i=(0,r.A)(t),o=(0,r.A)(s),c=(0,n.useCallback)(()=>{i.current()?l(!0):o.current()},[]),d=(0,n.useCallback)(()=>{l(!1),o.current()},[]),u=(0,n.useCallback)(()=>{l(!1)},[]),m=(0,n.useMemo)(()=>({visible:a,onClose:d,onCancel:u}),[a,d,u]);return(0,n.useMemo)(()=>({confirmOnClose:c,modalProps:m}),[c,m])}},74415:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(86848).A)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},81294:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ev});var n=s(80263),r=s(72112),a=s(31092),l=s(53239),i=s(73969),o=s(22891),c=s(44168),d=s(39624),u=s(53931),m=s(51355),x=s(80210),y=s(24523);let h={list:e=>["projects",e,"edge_functions_secrets"]};async function f(e){let{projectRef:t,secrets:s}=e;if(!t)throw Error("Project ref is required");let{data:n,error:r}=await (0,y.yH)("/v1/projects/{ref}/secrets",{params:{path:{ref:t}},body:s});return r&&(0,y.H4)(r),n}let p=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,m.jE)();return(0,x.n)({mutationFn:e=>f(e),async onSuccess(t,s,r){let{projectRef:a}=s;await n.invalidateQueries({queryKey:h.list(a)}),await (null==e?void 0:e(t,s,r))},async onError(e,s,n){void 0===t?i.oR.error("Failed to delete secrets: ".concat(e.message)):t(e,s,n)},...s})};var j=s(67850);async function g(e,t){let{projectRef:s}=e;if(!s)throw Error("Project ref is required");let{data:n,error:r}=await (0,y.Jt)("/v1/projects/{ref}/secrets",{params:{path:{ref:s}},signal:t});return r&&(0,y.H4)(r),n}let v=function(e){let{projectRef:t}=e,{enabled:s=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,j.I)({queryKey:h.list(t),queryFn:e=>{let{signal:s}=e;return g({projectRef:t},s)},enabled:s&&void 0!==t,...n})};var S=s(80090),b=s(46087),N=s(78511),E=s(21650),w=s(78039),A=s(64758),C=s(68421),F=s(32981),M=s(87494),T=s(19686);async function Z(e){let{projectRef:t,secrets:s}=e;if(!t)throw Error("Project ref is required");let{data:n,error:r}=await (0,y.bE)("/v1/projects/{ref}/secrets",{params:{path:{ref:t}},body:s});return r&&(0,y.H4)(r),n}let k=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,m.jE)();return(0,x.n)({mutationFn:e=>Z(e),async onSuccess(t,s,r){let{projectRef:a}=s;await n.invalidateQueries({queryKey:h.list(a)}),await (null==e?void 0:e(t,s,r))},async onError(e,s,n){void 0===t?i.oR.error("Failed to create secrets: ".concat(e.message)):t(e,s,n)},...s})};var _=s(23169),P=s(93901),D=s(16097),I=s(65887),R=s(99779);let z=e=>{let{visible:t,onCancel:s,onConfirm:r,isCreating:a,secretName:l}=e;return(0,n.jsx)(C.A,{visible:t,size:"medium",title:"Confirm replacing existing secret",confirmLabel:"Replace secret",confirmLabelLoading:"Replacing secret",variant:"warning",loading:a,onCancel:s,onConfirm:r,"data-sentry-element":"ConfirmationModal","data-sentry-component":"DuplicateSecretWarningModal","data-sentry-source-file":"DuplicateSecretWarningModal.tsx",children:(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:['A secret with the name "',l,'" already exists. Continuing will replace the existing secret with the new value. This action cannot be undone. Are you sure you want to proceed?']})})},B=T.Ay.object({secrets:T.Ay.array(T.Ay.object({name:T.Ay.string().min(1,"Please provide a name for your secret").refine(e=>!e.match(/^(SUPABASE_).*/),{message:"Name must not start with the SUPABASE_ prefix"}),value:T.Ay.string().min(1,"Please provide a value for your secret")}))}),L={secrets:[{name:"",value:""}]},V=()=>{let{ref:e}=(0,o.g)(),[t,s]=(0,l.useState)(!1),[r,a]=(0,l.useState)(""),[c,d]=(0,l.useState)(null),u=(0,M.mN)({resolver:(0,F.u)(B),defaultValues:L}),{fields:m,append:x,remove:y}=(0,M.jz)({control:u.control,name:"secrets"}),{data:h}=v({projectRef:e}),{mutate:f,isPending:p}=k({onSuccess:(e,t)=>{i.oR.success('Successfully created new secret "'.concat(t.secrets[0].name,'"')),setTimeout(()=>u.reset(),0)}}),j=async t=>{let s=(null==h?void 0:h.map(e=>e.name))||[],n=t.secrets.find(e=>s.includes(e.name));if(n){a(n.name),d(t);return}f({projectRef:e,secrets:t.secrets})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(I.lV,{...u,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"AddNewSecretForm.tsx",children:(0,n.jsx)("form",{className:"w-full",onSubmit:u.handleSubmit(j),children:(0,n.jsxs)(w.Zp,{"data-sentry-element":"Card","data-sentry-source-file":"AddNewSecretForm.tsx",children:[(0,n.jsx)(w.aR,{"data-sentry-element":"CardHeader","data-sentry-source-file":"AddNewSecretForm.tsx",children:(0,n.jsx)(w.ZB,{"data-sentry-element":"CardTitle","data-sentry-source-file":"AddNewSecretForm.tsx",children:"Add or replace secrets"})}),(0,n.jsxs)(w.Wu,{"data-sentry-element":"CardContent","data-sentry-source-file":"AddNewSecretForm.tsx",children:[m.map((e,r)=>(0,n.jsxs)("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-4 mb-4",children:[(0,n.jsx)(I.zB,{control:u.control,name:"secrets.".concat(r,".name"),render:e=>{let{field:t}=e;return(0,n.jsxs)(I.eI,{className:"w-full",children:[(0,n.jsx)(I.lR,{children:"Name"}),(0,n.jsx)(I.MJ,{children:(0,n.jsx)(A.p,{...t,placeholder:"e.g. CLIENT_KEY",onPaste:e=>(function(e){var t;e.preventDefault();let s=null==(t=e.clipboardData)?void 0:t.getData("text");if(!s)return;if(!s.includes("=")){let t=e.target.name;if(null==t?void 0:t.includes("secrets")){let[e,n,r]=t.match(/secrets\.(\d+)\.(\w+)/)||[];if(n&&r){let e=parseInt(n);u.setValue("secrets.".concat(e,".").concat(r),s);return}}}let n=[];try{let e=JSON.parse(s);Object.entries(e).forEach(e=>{let[t,s]=e;n.push({name:t,value:String(s)})})}catch(e){s.split(/\n/).forEach(e=>{let[t,...s]=e.split("=");if(t&&s.length){let e=s.join("=").trim();n.push({name:t.trim(),value:e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e})}})}if(n.length){let e=u.getValues("secrets").filter(e=>e.name||e.value);u.setValue("secrets",[...e,...n])}})(e.nativeEvent)})}),(0,n.jsx)(I.C5,{})]})}}),(0,n.jsx)(I.zB,{control:u.control,name:"secrets.".concat(r,".value"),render:e=>{let{field:r}=e;return(0,n.jsxs)(I.eI,{className:"w-full relative",children:[(0,n.jsx)(I.lR,{children:"Value"}),(0,n.jsx)(I.MJ,{children:(0,n.jsx)(A.p,{...r,type:t?"text":"password","data-1p-ignore":!0,"data-lpignore":"true","data-form-type":"other","data-bwignore":!0,actions:(0,n.jsx)("div",{className:"mr-1",children:(0,n.jsx)(R.$,{type:"text",className:"px-1",icon:t?(0,n.jsx)(_.A,{}):(0,n.jsx)(P.A,{}),onClick:()=>s(!t)})})})}),(0,n.jsx)(I.C5,{})]})}}),(0,n.jsx)(R.$,{type:"default",className:"h-[34px] mt-6",icon:(0,n.jsx)(D.A,{}),onClick:()=>m.length>1?y(r):u.reset(L)})]},e.id)),(0,n.jsx)(R.$,{type:"default",onClick:()=>{u.getValues("secrets").every(e=>!e.name&&!e.value)&&m.forEach((e,t)=>y(t)),x({name:"",value:""})},"data-sentry-element":"Button","data-sentry-source-file":"AddNewSecretForm.tsx",children:"Add another"})]}),(0,n.jsxs)(w.wL,{className:"justify-between space-x-2","data-sentry-element":"CardFooter","data-sentry-source-file":"AddNewSecretForm.tsx",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-lighter",children:"Insert or update multiple secrets at once by pasting key-value pairs"}),(0,n.jsx)(R.$,{type:"primary",htmlType:"submit",disabled:p,loading:p,"data-sentry-element":"Button","data-sentry-source-file":"AddNewSecretForm.tsx",children:p?"Saving...":m.length>1?"Bulk save":"Save"})]})]})})}),(0,n.jsx)(z,{visible:!!r,onCancel:()=>{a(""),d(null)},onConfirm:()=>{c&&(f({projectRef:e,secrets:c.secrets}),a(""),d(null))},isCreating:p,secretName:r,"data-sentry-element":"DuplicateSecretWarningModal","data-sentry-source-file":"AddNewSecretForm.tsx"})]})};var H=s(77444),Y=s(74415),W=s(33922),$=s(23729),O=s(21162),q=s(88044);let K=e=>{let{secret:t,onSelectEdit:s,onSelectDelete:a}=e,{can:l}=(0,S.Qp)(r.aG.SECRETS_WRITE,"*"),i=!!t.name.match(/^(SUPABASE_).*/);return(0,n.jsxs)(N.Hj,{"data-sentry-element":"TableRow","data-sentry-component":"EdgeFunctionSecret","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:[(0,n.jsx)(N.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:(0,n.jsx)("p",{className:"truncate py-2",children:t.name})}),(0,n.jsx)(N.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:(0,n.jsx)("p",{className:"font-mono text-sm max-w-96 truncate text-foreground-light",title:t.value,children:t.value})}),(0,n.jsx)(N.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:t.updated_at?(0,n.jsx)(q.T,{displayAs:"utc",utcTimestamp:t.updated_at,labelFormat:"DD MMM YYYY HH:mm:ss (ZZ)",className:"!text-sm text-foreground-light whitespace-nowrap"}):"-"}),(0,n.jsx)(N.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:(0,n.jsx)("div",{className:"flex items-center justify-end",children:(0,n.jsxs)(O.rI,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:[(0,n.jsx)(O.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:(0,n.jsx)(R.$,{"aria-label":"More options",type:"default",className:"px-1",icon:(0,n.jsx)(H.A,{}),"data-sentry-element":"Button","data-sentry-source-file":"EdgeFunctionSecret.tsx"})}),(0,n.jsxs)(O.SQ,{side:"bottom",align:"end",className:"w-52","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:[(0,n.jsx)(O._2,{asChild:!0,"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:(0,n.jsx)($.G,{type:"text",icon:(0,n.jsx)(Y.A,{size:14}),className:"w-full justify-start group text-inherit",disabled:!l||i,onClick:()=>s(),tooltip:{content:{side:"bottom",text:i?"This is a reserved secret and cannot be changed":l?void 0:"You need additional permissions to edit edge function secrets"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:"Edit secret"})}),(0,n.jsx)(O.mB,{"data-sentry-element":"DropdownMenuSeparator","data-sentry-source-file":"EdgeFunctionSecret.tsx"}),(0,n.jsx)(O._2,{asChild:!0,"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:(0,n.jsx)($.G,{type:"text",icon:(0,n.jsx)(W.A,{size:14,className:"group-[&:not(:disabled)]:text-destructive"}),className:"w-full justify-start group text-inherit",disabled:!l||i,onClick:()=>a(),tooltip:{content:{side:"bottom",text:i?"This is a reserved secret and cannot be deleted":l?void 0:"You need additional permissions to delete edge function secrets"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"EdgeFunctionSecret.tsx",children:"Delete secret"})})]})]})})})]})};var U=s(73036),G=s(68152),J=s(47814),Q=s(65346),X=s(75878),ee=s(80100),et=s(27371),es=s(80421),en=s(44053);let er="edit-secret-sidepanel",ea=T.Ay.object({name:T.Ay.string().min(1,"Please provide a name for your secret"),value:T.Ay.string().min(1,"Please provide a value for your secret")});function el(e){let{secret:t,visible:s,onClose:r}=e,a=(0,J.A)(null==t?void 0:t.name),c=(0,M.mN)({resolver:(0,F.u)(ea)});(0,l.useEffect)(()=>{if(s){var e;c.reset({name:null!=(e=a.current)?e:"",value:""})}},[c,a,s]);let d=c.formState.isValid,{ref:u}=(0,o.g)(),{mutate:m,isPending:x}=k({onSuccess:(e,t)=>{i.oR.success('Successfully updated secret "'.concat(t.secrets[0].name,'"')),r()}}),y=async e=>{let{name:t,value:s}=e;m({projectRef:u,secrets:[{name:t,value:s}]})},{confirmOnClose:h,modalProps:f}=(0,U.$)({checkIsDirty:()=>c.formState.isDirty,onClose:r});return(0,n.jsxs)(Q.cj,{open:s,onOpenChange:h,"data-sentry-element":"Sheet","data-sentry-component":"EditSecretSheet","data-sentry-source-file":"EditSecretSheet.tsx",children:[(0,n.jsxs)(Q.h,{showClose:!1,size:"default",className:"!min-w-screen lg:!min-w-[600px] flex flex-col","data-sentry-element":"SheetContent","data-sentry-source-file":"EditSecretSheet.tsx",children:[(0,n.jsx)(ei,{"data-sentry-element":"Header","data-sentry-source-file":"EditSecretSheet.tsx"}),(0,n.jsx)(X.w,{"data-sentry-element":"Separator","data-sentry-source-file":"EditSecretSheet.tsx"}),(0,n.jsx)(eo,{form:c,onSubmit:y,"data-sentry-element":"FormBody","data-sentry-source-file":"EditSecretSheet.tsx"}),(0,n.jsxs)(Q.XW,{"data-sentry-element":"SheetFooter","data-sentry-source-file":"EditSecretSheet.tsx",children:[(0,n.jsx)(R.$,{disabled:x,type:"default",onClick:h,"data-sentry-element":"Button","data-sentry-source-file":"EditSecretSheet.tsx",children:"Cancel"}),(0,n.jsx)(R.$,{form:er,htmlType:"submit",disabled:!d,loading:x,"data-sentry-element":"Button","data-sentry-source-file":"EditSecretSheet.tsx",children:"Save"})]})]}),(0,n.jsx)(eu,{...f,"data-sentry-element":"CloseConfirmationModal","data-sentry-source-file":"EditSecretSheet.tsx"})]})}let ei=()=>(0,n.jsxs)(Q.Fm,{className:"py-3 flex flex-row gap-3 items-center border-b-0","data-sentry-element":"SheetHeader","data-sentry-component":"Header","data-sentry-source-file":"EditSecretSheet.tsx",children:[(0,n.jsxs)(Q.kN,{className:(0,ee.cn)("text-muted hover:text ring-offset-background hover:opacity-100","focus:outline-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none data-[state=open]:bg-secondary","transition"),"data-sentry-element":"SheetClose","data-sentry-source-file":"EditSecretSheet.tsx",children:[(0,n.jsx)(G.A,{className:"h-3 w-3","data-sentry-element":"X","data-sentry-source-file":"EditSecretSheet.tsx"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]}),(0,n.jsx)(Q.qp,{"data-sentry-element":"SheetTitle","data-sentry-source-file":"EditSecretSheet.tsx",children:"Edit secret"})]}),eo=e=>{let{form:t,onSubmit:s}=e;return(0,n.jsx)(I.lV,{...t,"data-sentry-element":"Form_Shadcn_","data-sentry-component":"FormBody","data-sentry-source-file":"EditSecretSheet.tsx",children:(0,n.jsxs)("form",{id:er,className:"flex-grow overflow-auto",onSubmit:t.handleSubmit(s),children:[(0,n.jsx)(Q.Xc,{"data-sentry-element":"SheetSection","data-sentry-source-file":"EditSecretSheet.tsx",children:(0,n.jsx)(ec,{form:t,"data-sentry-element":"NameField","data-sentry-source-file":"EditSecretSheet.tsx"})}),(0,n.jsx)(X.w,{"data-sentry-element":"Separator","data-sentry-source-file":"EditSecretSheet.tsx"}),(0,n.jsx)(Q.Xc,{className:"space-y-4","data-sentry-element":"SheetSection","data-sentry-source-file":"EditSecretSheet.tsx",children:(0,n.jsx)(ed,{form:t,"data-sentry-element":"SecretField","data-sentry-source-file":"EditSecretSheet.tsx"})}),(0,n.jsx)(X.w,{"data-sentry-element":"Separator","data-sentry-source-file":"EditSecretSheet.tsx"})]})})},ec=e=>{let{form:t}=e;return(0,n.jsx)(I.zB,{control:t.control,name:"name",render:e=>{let{field:t}=e;return(0,n.jsx)(en.M,{label:"Name",layout:"horizontal",children:(0,n.jsx)(I.MJ,{children:(0,n.jsx)(et.p,{...t,readOnly:!0,className:"!text-foreground-light cursor-not-allowed"})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-component":"NameField","data-sentry-source-file":"EditSecretSheet.tsx"})},ed=e=>{let{form:t}=e,[s,r]=(0,l.useState)(!1);return(0,n.jsx)(I.zB,{control:t.control,name:"value",render:e=>{let{field:t}=e;return(0,n.jsx)(en.M,{label:"Value",layout:"horizontal",description:"Secrets canâ€™t be retrieved once saved. Enter a new value to overwrite the existing value.",children:(0,n.jsx)(I.MJ,{children:(0,n.jsx)(es.A,{...t,type:s?"text":"password",placeholder:"my-secret-value","data-1p-ignore":!0,"data-lpignore":"true","data-form-type":"other","data-bwignore":!0,actions:(0,n.jsx)("div",{className:"mr-1",children:(0,n.jsx)(R.$,{type:"text",className:"px-1",icon:s?(0,n.jsx)(_.A,{}):(0,n.jsx)(P.A,{}),onClick:()=>r(!s)})})})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-component":"SecretField","data-sentry-source-file":"EditSecretSheet.tsx"})},eu=e=>{let{visible:t,onClose:s,onCancel:r}=e;return(0,n.jsx)(C.A,{visible:t,title:"Discard changes",confirmLabel:"Discard",onCancel:r,onConfirm:s,"data-sentry-element":"ConfirmationModal","data-sentry-component":"CloseConfirmationModal","data-sentry-source-file":"EditSecretSheet.tsx",children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"There are unsaved changes. Are you sure you want to close the panel? Your changes will be lost."})})},em=()=>{var e;let{ref:t}=(0,o.g)(),[s,m]=(0,l.useState)(""),x=(0,l.useRef)(null),{can:y,isLoading:h}=(0,S.Qp)(r.aG.FUNCTIONS_SECRET_READ,"*"),{can:f}=(0,S.Qp)(r.aG.SECRETS_WRITE,"*"),{data:j,error:g,isLoading:F,isSuccess:M,isError:T}=v({projectRef:t},{enabled:y}),{setValue:Z,value:k}=(0,b.s)({urlKey:"edit",select:e=>e?null==j?void 0:j.find(t=>t.name===e):void 0,enabled:!!j,onError:()=>i.oR.error("Secret not found")}),{setValue:_,value:P}=(0,b.s)({urlKey:"delete",select:e=>e?null==j?void 0:j.find(t=>t.name===e):void 0,enabled:!!j,onError:(e,t)=>(0,b.$)(x,t,"Secret not found")}),{mutate:D,isPending:I}=p({onSuccess:(e,t)=>{i.oR.success("Successfully deleted ".concat(t.secrets[0])),_(null)},onError:()=>{x.current=null}}),R=s.length>0?null!=(e=null==j?void 0:j.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())))?e:[]:null!=j?j:[],z=[(0,n.jsx)(N.nd,{children:"Name"},"secret-name"),(0,n.jsxs)(N.nd,{className:"flex items-center gap-x-2",children:["Digest"," ",(0,n.jsx)(E.E,{color:"scale",className:"font-mono",children:"SHA256"})]},"secret-value"),(0,n.jsx)(N.nd,{children:"Updated at"},"secret-updated-at"),(0,n.jsx)(N.nd,{},"actions")],B=h||y&&F;return(0,n.jsxs)(n.Fragment,{children:[B?(0,n.jsx)(u.yV,{}):y?(0,n.jsxs)(n.Fragment,{children:[T&&(0,n.jsx)(c.A,{error:g,subject:"Failed to retrieve project secrets"}),M&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"mb-6",children:f?(0,n.jsx)(V,{}):(0,n.jsx)(d.A,{resourceText:"manage this project's edge function secrets"})}),f&&!y?(0,n.jsx)(d.A,{resourceText:"view this project's edge function secrets"}):y?(0,n.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,n.jsx)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-2",children:(0,n.jsx)(A.p,{size:"small",className:"w-full md:w-80",placeholder:"Search for a secret",value:s,onChange:e=>m(e.target.value),icon:(0,n.jsx)(a.A,{size:14})})}),(0,n.jsx)(w.Zp,{children:(0,n.jsxs)(N.XI,{children:[(0,n.jsx)(N.A0,{children:(0,n.jsx)(N.Hj,{children:z})}),(0,n.jsx)(N.BF,{children:R.length>0?R.map(e=>(0,n.jsx)(K,{secret:e,onSelectEdit:()=>Z(e.name),onSelectDelete:()=>_(e.name)},e.name)):0===R.length&&s.length>0?(0,n.jsx)(N.Hj,{children:(0,n.jsxs)(N.nA,{colSpan:z.length,children:[(0,n.jsx)("p",{className:"text-sm text-foreground",children:"No results found"}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:['Your search for "',s,'" did not return any results']})]})}):(0,n.jsx)(N.Hj,{children:(0,n.jsxs)(N.nA,{colSpan:z.length,children:[(0,n.jsx)("p",{className:"text-sm text-foreground",children:"No secrets created"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"There are no secrets associated with your project yet"})]})})})]})})]}):null]})]}):(0,n.jsx)(d.A,{resourceText:"view this project's edge function secrets"}),(0,n.jsx)(el,{secret:k,visible:!!k,onClose:()=>Z(null),"data-sentry-element":"EditSecretSheet","data-sentry-source-file":"EdgeFunctionSecrets.tsx"}),(0,n.jsx)(C.A,{variant:"destructive",loading:I,visible:!!P,confirmLabel:"Delete secret",confirmLabelLoading:"Deleting secret",title:'Confirm to delete secret "'.concat(null==P?void 0:P.name,'"'),onCancel:()=>_(null),onConfirm:()=>{P&&(x.current=P.name,D({projectRef:t,secrets:[P.name]}))},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"EdgeFunctionSecrets.tsx",children:(0,n.jsx)("p",{className:"text-sm",children:"Before removing this secret, ensure none of your Edge Functions are actively using it. This action cannot be undone."})})]})};var ex=s(1421),ey=s(10508),eh=s(56560),ef=s(8750),ep=s(37873),ej=s(85039);let eg=()=>(0,n.jsx)(ep.eh,{size:"large","data-sentry-element":"ScaffoldContainer","data-sentry-component":"SecretsPage","data-sentry-source-file":"secrets.tsx",children:(0,n.jsx)(ep.gu,{isFullWidth:!0,"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"secrets.tsx",children:ej.pe?(0,n.jsx)(em,{}):(0,n.jsx)(ex.Ad,{})})});eg.getLayout=e=>(0,n.jsx)(ey.A,{children:(0,n.jsx)(eh.A,{children:(0,n.jsx)(ef.M,{size:"large",title:"Edge Function Secrets",subtitle:"Manage the secrets for your project's Edge Functions",children:e})})});let ev=eg},91517:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/functions/secrets",function(){return s(81294)}])},93873:(e,t,s)=>{"use strict";s.d(t,{l:()=>i});var n=s(80263),r=s(24487),a=s(21650),l=s(21416);let i=e=>{let{page:t,menu:s}=e;return(0,n.jsx)("div",{className:"flex flex-col space-y-8","data-sentry-component":"ProductMenu","data-sentry-source-file":"index.tsx",children:(0,n.jsx)(r.Ay,{type:"pills","data-sentry-element":"Menu","data-sentry-source-file":"index.tsx",children:s.map((e,i)=>(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"my-6 space-y-8",children:(0,n.jsxs)("div",{className:"mx-3",children:[(0,n.jsx)(r.Ay.Group,{title:e.title?(0,n.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,n.jsx)("span",{children:e.title}),e.isPreview&&(0,n.jsx)(a.E,{variant:"warning",children:"Not production ready"})]}):null}),(0,n.jsx)("div",{children:e.items.map(e=>{let s=e.pages?e.pages.includes(null!=t?t:""):t===e.key;return(0,n.jsx)(l.A,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:s,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),i!==s.length-1&&(0,n.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}}},e=>{e.O(0,[60858,15599,16110,27764,36538,44033,76984,72391,35035,40545,596,10508,48340,75187,29471,8750,35271,1421,90636,46593,38792],()=>e(e.s=91517)),_N_E=e.O()}]);