try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="790e2432-edcc-43e6-8c52-dd07a93f084f",e._sentryDebugIdIdentifier="sentry-dbid-790e2432-edcc-43e6-8c52-dd07a93f084f")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[42917],{1374:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(86848).A)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]])},13655:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(86848).A)("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]])},14354:(e,t,a)=>{"use strict";a.d(t,{KP:()=>c,Nu:()=>d,d8:()=>l,l3:()=>o});var s=a(80263),n=a(79279);a(53239);var r=a(80100);let i=(0,n.F)(["pt-12 last:pb-12 gap-6"],{variants:{orientation:{horizontal:"grid @3xl:grid-cols-[1fr_2fr] @3xl:gap-12",vertical:"flex flex-col"}},defaultVariants:{orientation:"vertical"}}),l=e=>{let{className:t,orientation:a="vertical",children:n,...l}=e;return(0,s.jsx)("div",{"data-slot":"page-section","data-orientation":a,className:(0,r.cn)(i({orientation:a}),t),...l,"data-sentry-component":"PageSectionRoot","data-sentry-source-file":"index.tsx",children:n})};l.displayName="PageSectionRoot";let o=e=>{let{className:t,children:a,...n}=e;return(0,s.jsx)("div",{"data-slot":"page-section-summary",className:(0,r.cn)("flex flex-col gap-1",t),...n,"data-sentry-component":"PageSectionSummary","data-sentry-source-file":"index.tsx",children:a})};o.displayName="PageSectionSummary";let d=e=>{let{className:t,children:a,...n}=e;return(0,s.jsx)("h2",{"data-slot":"page-section-title",className:(0,r.cn)("heading-section",t),...n,"data-sentry-component":"PageSectionTitle","data-sentry-source-file":"index.tsx",children:a})};d.displayName="PageSectionTitle";let c=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"page-section-content",className:(0,r.cn)(t),...a,"data-sentry-component":"PageSectionContent","data-sentry-source-file":"index.tsx"})};c.displayName="PageSectionContent"},18574:(e,t,a)=>{"use strict";a.d(t,{pj:()=>l});var s=a(67850),n=a(59356),r=a(32510);async function i(e,t){let{projectRef:a,connectionString:s}=e;try{let{result:e}=await (0,n.E)({projectRef:a,connectionString:s,sql:"\n    select\n      *\n    from supabase_migrations.schema_migrations sm\n    order by sm.version desc\n  ".trim(),queryKey:["migrations"]},t);return e}catch(e){if(e.message.includes('relation "supabase_migrations.schema_migrations" does not exist'))return[];throw e}}let l=function(e){let{projectRef:t,connectionString:a}=e,{enabled:n=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.I)({queryKey:r.c.migrations(t),queryFn:e=>{let{signal:s}=e;return i({projectRef:t,connectionString:a},s)},enabled:n&&void 0!==t,...l})}},22730:(e,t,a)=>{"use strict";a.d(t,{z:()=>c});var s=a(78510),n=a(67850),r=a(24523),i=a(9620),l=a(85039),o=a(87727);async function d(e,t,a){let{projectRef:n,connectionString:i}=e;if(!n)throw Error("projectRef is required");let l=new Headers(a);i&&l.set("x-connection-encrypted",i);let{data:o,error:d}=await (0,r.Jt)("/platform/pg-meta/{ref}/extensions",{params:{header:{"x-connection-encrypted":i,"x-pg-application-name":s.r},path:{ref:n}},headers:l,signal:t});return d&&(0,r.H4)(d),o}let c=function(e){let{projectRef:t,connectionString:a}=e,{enabled:s=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{data:c}=(0,i.YA)(),m=(null==c?void 0:c.status)===l.BU.ACTIVE_HEALTHY;return(0,n.I)({queryKey:o.I.list(t),queryFn:e=>{let{signal:s}=e;return d({projectRef:t,connectionString:a},s)},enabled:s&&void 0!==t&&m,...r})}},29948:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(86848).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},31626:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(86848).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},37224:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var s=a(80263),n=a(23892),r=a(9753),i=a(53239),l=a(80100),o=a(38904);let d=(0,i.forwardRef)((e,t)=>{let{commands:a,className:n}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("space-y-4",n),children:a.map((e,t)=>(0,s.jsx)(m,{item:e},"command-".concat(t)))})});d.displayName="CommandRender";let c=d,m=e=>{let{item:t}=e,[a,l]=(0,i.useState)(!1);return(0,s.jsxs)("div",{className:"space-y-1","data-sentry-component":"Command","data-sentry-source-file":"CommandRender.tsx",children:[(0,s.jsx)("span",{className:"font-mono text-sm text-foreground-lighter",children:"> ".concat(t.comment)}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)("div",{className:"flex gap-2 font-mono text-sm font-normal text-foreground",children:[(0,s.jsx)("span",{className:"text-foreground-lighter",children:"$"}),(0,s.jsxs)("span",{children:[(0,s.jsxs)("span",{children:[t.jsx?t.jsx():null," "]}),(0,s.jsx)("button",{type:"button",className:"text-foreground-lighter hover:text-foreground",onClick:()=>{var e;e=t.command,l(!0),(0,o.l)(e),setTimeout(()=>l(!1),3e3)},children:a?(0,s.jsx)(n.A,{size:14,strokeWidth:3,className:"text-brand"}):(0,s.jsx)(r.A,{size:14})})]})]})})]})}},53407:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(86848).A)("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]])},54831:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(86848).A)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},66959:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(86848).A)("DatabaseZap",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]])},68296:(e,t,a)=>{"use strict";a.d(t,{A:()=>h});var s=a(80263),n=a(80814),r=a(91958),i=a(93873),l=a(22730),o=a(78937),d=a(2657),c=a(9620),m=a(9497),y=a(29471),u=a(54278);let x=()=>{let{data:e}=(0,c.YA)(),t=(0,n.useRouter)().pathname.split("/")[4],{data:a}=(0,l.z)({projectRef:null==e?void 0:e.ref,connectionString:null==e?void 0:e.connectionString}),{data:m}=(0,o.Q)({projectRef:null==e?void 0:e.ref}),y=void 0!==(null!=a?a:[]).find(e=>"pg_net"===e.name),x=(null==m?void 0:m.selected_addons.find(e=>"pitr"===e.type))!==void 0,h=(0,r.p4)(),{databaseReplication:p,databaseRoles:g,integrationsWrappers:f}=(0,d.x)(["database:replication","database:roles","integrations:wrappers"]);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i.l,{page:t,menu:(0,u.k)(e,{pgNetExtensionExists:y,pitrEnabled:x,columnLevelPrivileges:h,showPgReplicate:p,showRoles:g,showWrappers:f}),"data-sentry-element":"ProductMenu","data-sentry-source-file":"DatabaseLayout.tsx"})})},h=(0,m.r)(e=>{let{children:t}=e;return(0,s.jsx)(y.k,{product:"Database",productMenu:(0,s.jsx)(x,{}),isBlocking:!1,"data-sentry-element":"ProjectLayout","data-sentry-component":"DatabaseLayout","data-sentry-source-file":"DatabaseLayout.tsx",children:t})})},69988:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(86848).A)("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]])},74195:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(86848).A)("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]])},74310:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(86848).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},77444:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(86848).A)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},92183:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>T});var s=a(80263),n=a(53434),r=a.n(n),i=a(53239),l=a(72112),o=a(27695),d=a(15040),c=a(53931),m=a(18574),y=a(9620),u=a(31092),x=a(99779),h=a(80421),p=a(78039),g=a(78511),f=a(79861),j=a(44725),v=a(69988),b=a(98103),k=a(61113),A=a(22891),w=a(37224),N=a(14561),M=a(80100);let S=()=>{let{ref:e}=(0,A.g)(),[t,a]=(0,i.useState)(!1),n=[{comment:"Link your project",command:"supabase link --project-ref ".concat(e),jsx:()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-brand-600",children:"supabase"})," link --project-ref ",e]})},{comment:'Create a new migration called "new-migration"',command:"supabase migration new new-migration",jsx:()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-brand-600",children:"supabase"})," migration new new-migration"]})},{comment:"Run all migrations against this project",command:"supabase db push",jsx:()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-brand-600",children:"supabase"})," db push"]})}];return(0,s.jsx)("div",{className:"w-full p-4 md:p-12 bg-no-repeat border rounded bg-studio border-default","data-sentry-component":"MigrationsEmptyState","data-sentry-source-file":"MigrationsEmptyState.tsx",children:(0,s.jsxs)("div",{className:"space-y-4 md:space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-2 w-4/5",children:[(0,s.jsx)("h4",{className:"text-lg",children:"Database migrations"}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:'Database changes are managed through "migrations" and they are a common way of tracking changes to your database over time. You can run migrations against your project\'s database via the Supabase CLI.'})]}),(0,s.jsxs)(N.Ay,{open:t,onOpenChange:a,"data-sentry-element":"Collapsible","data-sentry-source-file":"MigrationsEmptyState.tsx",children:[(0,s.jsx)(N.Ay.Trigger,{asChild:!0,"data-sentry-element":"Collapsible.Trigger","data-sentry-source-file":"MigrationsEmptyState.tsx",children:(0,s.jsx)("button",{type:"button",className:(0,M.cn)("flex w-full items-center justify-between rounded py-3 px-6 text-foreground border bg-surface-100",t&&"rounded-b-none"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3 w-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-8 h-8 p-2 border rounded bg-alternative",children:(0,s.jsx)(v.A,{strokeWidth:2,"data-sentry-element":"Terminal","data-sentry-source-file":"MigrationsEmptyState.tsx"})}),(0,s.jsx)("h4",{children:"Terminal instructions"})]}),t?(0,s.jsx)(b.A,{className:"text-border-stronger transition data-open-parent:rotate-0 data-closed-parent:rotate-180",strokeWidth:2,width:14}):(0,s.jsx)(k.A,{className:"text-border-stronger transition data-open-parent:rotate-0 data-closed-parent:rotate-180",strokeWidth:2,width:14})]})})}),(0,s.jsx)(N.Ay.Content,{"data-sentry-element":"Collapsible.Content","data-sentry-source-file":"MigrationsEmptyState.tsx",children:(0,s.jsx)("div",{className:"border border-t-0 bg-surface-100 rounded-b py-3 px-6",children:(0,s.jsx)(w.A,{commands:n,"data-sentry-element":"CommandRender","data-sentry-source-file":"MigrationsEmptyState.tsx"})})})]})]})})},C=()=>{var e,t,a,n;let[v,b]=(0,i.useState)(""),[k,A]=(0,i.useState)(),{data:w}=(0,y.YA)(),{data:N,isLoading:M,isSuccess:C,isError:P,error:_}=(0,m.pj)({projectRef:null==w?void 0:w.ref,connectionString:null==w?void 0:w.connectionString}),q=0===v.length?null!=N?N:[]:null!=(t=null==N?void 0:N.filter(e=>{var t;return e.version.includes(v)||(null==(t=e.name)?void 0:t.includes(v))}))?t:[];return(0,s.jsxs)(s.Fragment,{children:[M&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.Ay,{}),(0,s.jsx)(c.Ay,{className:"w-3/4"}),(0,s.jsx)(c.Ay,{className:"w-1/2"})]}),(0,s.jsxs)("div",{children:[P&&(0,s.jsx)(j.Z,{type:"warning",title:"Failed to retrieve migration history for database",description:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"mb-1",children:"Try refreshing your browser, but if the issue persists for more than a few minutes, please reach out to us via support."}),(0,s.jsxs)("p",{className:"mb-4",children:["Error: ",null!=(a=null==_?void 0:_.message)?a:"Unknown"]})]}),children:(0,s.jsx)(x.$,{asChild:!0,type:"default",children:(0,s.jsx)(o.Y,{queryParams:{projectRef:null==w?void 0:w.ref,category:l.S.DASHBOARD_BUG,subject:"Unable to view database migrations"},children:"Contact support"})},"contact-support")}),C&&(0,s.jsxs)("div",{children:[N.length<=0&&(0,s.jsx)(S,{}),N.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-80 mb-4",children:(0,s.jsx)(h.A,{size:"small",placeholder:"Search for a migration",value:v,onChange:e=>b(e.target.value),icon:(0,s.jsx)(u.A,{size:"14"})})}),(0,s.jsx)(p.Zp,{children:(0,s.jsxs)(g.XI,{children:[(0,s.jsx)(g.A0,{children:(0,s.jsxs)(g.Hj,{children:[(0,s.jsx)(g.nd,{style:{width:"180px"},children:"Version"},"version"),(0,s.jsx)(g.nd,{children:"Name"},"version"),(0,s.jsx)(g.nd,{children:"Inserted at (UTC)"},"version"),(0,s.jsx)(g.nd,{},"buttons")]})}),(0,s.jsx)(g.BF,{children:q.length>0?q.map(e=>{var t,a;let n=r()(e.version,"YYYYMMDDHHmmss").format("DD MMM YYYY, HH:mm:ss");return(0,s.jsxs)(g.Hj,{children:[(0,s.jsx)(g.nA,{children:e.version}),(0,s.jsx)(g.nA,{className:0===(null!=(t=null==e?void 0:e.name)?t:"").length?"!text-foreground-lighter":"",children:null!=(a=null==e?void 0:e.name)?a:"Name not available"}),(0,s.jsx)(g.nA,{children:n}),(0,s.jsx)(g.nA,{align:"right",children:(0,s.jsx)(x.$,{type:"default",onClick:()=>A(e),children:"View migration SQL"})})]},e.version)}):(0,s.jsx)(g.Hj,{children:(0,s.jsxs)(g.nA,{colSpan:3,children:[(0,s.jsx)("p",{className:"text-sm text-foreground",children:"No results found"}),(0,s.jsxs)("p",{className:"text-sm text-foreground-light",children:['Your search for "',v,'" did not return any results']})]})})})]})})]})]})]}),(0,s.jsx)(f.Ay,{size:"large",visible:void 0!==k,header:"Migration: ".concat(null==k?void 0:k.version),onCancel:()=>A(void 0),customFooter:(0,s.jsx)("div",{className:"flex items-center justify-end p-4 border-t border-overlay-border",children:(0,s.jsx)(x.$,{type:"default",onClick:()=>A(void 0),children:"Close"})}),"data-sentry-element":"SidePanel","data-sentry-source-file":"Migrations.tsx",children:(0,s.jsx)("div",{className:"h-full",children:(0,s.jsx)("div",{className:"relative h-full",children:(0,s.jsx)(d.A,{isReadOnly:!0,id:null!=(n=null==k?void 0:k.version)?n:"",language:"pgsql",defaultValue:null==k||null==(e=k.statements)?void 0:e.join("\n"),"data-sentry-element":"CodeEditor","data-sentry-source-file":"Migrations.tsx"})})})})]})};var P=a(68296),_=a(10508),q=a(41273),H=a(85039),D=a(45218),z=a(30688),E=a(14354);let R=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z.zY,{size:"large","data-sentry-element":"PageHeader","data-sentry-source-file":"migrations.tsx",children:(0,s.jsxs)(z.Ys,{"data-sentry-element":"PageHeaderMeta","data-sentry-source-file":"migrations.tsx",children:[(0,s.jsxs)(z.tq,{"data-sentry-element":"PageHeaderSummary","data-sentry-source-file":"migrations.tsx",children:[(0,s.jsx)(z.RR,{"data-sentry-element":"PageHeaderTitle","data-sentry-source-file":"migrations.tsx",children:"Database Migrations"}),(0,s.jsx)(z.NV,{"data-sentry-element":"PageHeaderDescription","data-sentry-source-file":"migrations.tsx",children:"History of migrations that have been run on your database"})]}),(0,s.jsx)(z.vT,{"data-sentry-element":"PageHeaderAside","data-sentry-source-file":"migrations.tsx",children:(0,s.jsx)(q.A,{className:"no-underline",href:"".concat(H.aq,"/guides/deployment/database-migrations"),"data-sentry-element":"DocsButton","data-sentry-source-file":"migrations.tsx"})})]})}),(0,s.jsx)(D.L,{size:"large","data-sentry-element":"PageContainer","data-sentry-source-file":"migrations.tsx",children:(0,s.jsx)(E.d8,{"data-sentry-element":"PageSection","data-sentry-source-file":"migrations.tsx",children:(0,s.jsx)(E.KP,{"data-sentry-element":"PageSectionContent","data-sentry-source-file":"migrations.tsx",children:(0,s.jsx)(C,{"data-sentry-element":"Migrations","data-sentry-source-file":"migrations.tsx"})})})})]});R.getLayout=e=>(0,s.jsx)(_.A,{children:(0,s.jsx)(P.A,{title:"Migrations",children:e})});let T=R},95905:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/database/migrations",function(){return a(92183)}])},98103:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(86848).A)("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]])},99940:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(86848).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])}},e=>{e.O(0,[60858,15599,16110,27764,36538,44033,76984,72391,35035,40545,596,10508,48340,75187,29471,91312,90636,46593,38792],()=>e(e.s=95905)),_N_E=e.O()}]);