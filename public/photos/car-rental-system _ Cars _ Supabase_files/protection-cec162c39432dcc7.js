try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="7401938c-2213-4401-a7a8-4365f912fa38",e._sentryDebugIdIdentifier="sentry-dbid-7401938c-2213-4401-a7a8-4365f912fa38")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[33236],{5879:(e,t,r)=>{"use strict";r.d(t,{j:()=>o});var n=r(80263),s=r(53239),a=r(80100);let o=(0,s.forwardRef)((e,t)=>{let{preTab:r,postTab:s,children:o,className:i,...c}=e;return(0,n.jsxs)("div",{ref:t,...c,className:(0,a.cn)("flex -space-x-px",i),children:[r&&(0,n.jsx)("div",{className:"border border-strong bg-surface-300 rounded-l-md px-3 flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-foreground-lighter text-xs font-mono",children:r})}),(0,n.jsx)("div",{className:(0,a.cn)("flex-1",{"[&_input]:rounded-l-none [&_select]:rounded-l-none [&_textarea]:rounded-l-none":!!r,"[&_input]:rounded-r-none [&_select]:rounded-r-none [&_textarea]:rounded-r-none":!!s}),children:o}),s&&(0,n.jsx)("div",{className:"border border-strong bg-surface-300 rounded-r-md px-3 flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-foreground-lighter text-xs font-mono",children:s})})]})})},13685:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/auth/protection",function(){return r(98197)}])},37631:(e,t,r)=>{"use strict";r.d(t,{$E:()=>u,kV:()=>l,op:()=>d});var n=r(67850),s=r(51355),a=r(24523),o=r(85039),i=r(53239),c=r(31907);async function l(e,t){let{projectRef:r}=e;if(!r)throw Error("projectRef is required");let{data:n,error:s}=await (0,a.Jt)("/platform/auth/{ref}/config",{params:{path:{ref:r}},signal:t});return s&&(0,a.H4)(s),n}let d=function(e){let{projectRef:t}=e,{enabled:r=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.I)({queryKey:c.Z.authConfig(t),queryFn:e=>{let{signal:r}=e;return l({projectRef:t},r)},enabled:r&&o.pe&&void 0!==t,...s})},u=e=>{let{projectRef:t}=e,r=(0,s.jE)();return(0,i.useCallback)(()=>{t&&r.prefetchQuery({queryKey:c.Z.authConfig(t),queryFn:e=>{let{signal:r}=e;return l({projectRef:t},r)}})},[r,t])}},39624:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(80263),s=r(12123);let a=e=>{let{resourceText:t,isFullPage:r=!1}=e,a=()=>(0,n.jsx)("div",{className:"block w-full rounded border border-opacity-20 py-4 px-6 border-overlay bg-surface-200","data-sentry-component":"NoPermissionMessage","data-sentry-source-file":"NoPermission.tsx",children:(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(s.A,{size:20,"data-sentry-element":"AlertCircle","data-sentry-source-file":"NoPermission.tsx"})}),(0,n.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("p",{className:"text-sm",children:["You need additional permissions to ",t]}),(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Contact your organization owner or administrator for assistance."})})]})})]})});return r?(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,n.jsx)("div",{className:"w-[550px]",children:(0,n.jsx)(a,{})})}):(0,n.jsx)(a,{})}},42459:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(80263),s=r(52555),a=r.n(s),o=r(80100),i=r(99779),c=r(44725);let l=e=>{let{urlBack:t,fullHeight:r=!0}=e;return(0,n.jsx)("div",{className:(0,o.cn)("w-full flex items-center justify-center",r&&"h-full"),"data-sentry-component":"UnknownInterface","data-sentry-source-file":"UnknownInterface.tsx",children:(0,n.jsx)(c.Z,{type:"note",className:"max-w-xl",title:"Looking for something?",description:"We couldn't find the page that you're looking for","data-sentry-element":"Admonition","data-sentry-source-file":"UnknownInterface.tsx",children:(0,n.jsx)(i.$,{asChild:!0,type:"default",className:"mt-2","data-sentry-element":"Button","data-sentry-source-file":"UnknownInterface.tsx",children:(0,n.jsx)(a(),{href:t,"data-sentry-element":"Link","data-sentry-source-file":"UnknownInterface.tsx",children:"Head back"})})})})}},64511:(e,t,r)=>{"use strict";r.d(t,{t:()=>a});var n=r(17085),s=r(87494);function a(e,t,r){return void 0===t&&(t={}),void 0===r&&(r={}),function(a,o,i){try{return Promise.resolve(function(s,c){try{var l=(t.context,Promise.resolve(e["sync"===r.mode?"validateSync":"validate"](a,Object.assign({abortEarly:!1},t,{context:o}))).then(function(e){return i.shouldUseNativeValidation&&(0,n.w)({},i),{values:r.raw?a:e,errors:{}}}))}catch(e){return c(e)}return l&&l.then?l.then(void 0,c):l}(0,function(e){var t;if(!e.inner)throw e;return{values:{},errors:(0,n.H)((t=!i.shouldUseNativeValidation&&"all"===i.criteriaMode,(e.inner||[]).reduce(function(e,r){if(e[r.path]||(e[r.path]={message:r.message,type:r.type}),t){var n=e[r.path].types,a=n&&n[r.type];e[r.path]=(0,s.Gb)(r.path,t,e,r.type,a?[].concat(a,r.message):r.message)}return e},{})),i)}}))}catch(e){return Promise.reject(e)}}}},87442:(e,t,r)=>{"use strict";r.d(t,{A:()=>E});var n=r(80263),s=r(80814),a=r(22891),o=r(91958),i=r(93873),c=r(37631),l=r(2657),d=r(9497),u=r(29471),h=r(1458);let S=()=>{let e=(0,s.useRouter)(),{ref:t="default"}=(0,a.g)(),r=(0,a._P)("authOverviewPage"),d=(0,a._P)("EnableOAuth21"),u=(0,o.hN)(),{authenticationSignInProviders:S,authenticationRateLimits:E,authenticationEmails:_,authenticationMultiFactor:A,authenticationAttackProtection:x,authenticationAdvanced:f}=(0,l.x)(["authentication:sign_in_providers","authentication:rate_limits","authentication:emails","authentication:multi_factor","authentication:attack_protection","authentication:advanced"]);(0,c.$E)({projectRef:t});let m=e.pathname.split("/")[4];return(0,n.jsx)(i.l,{page:m,menu:(0,h.B)(t,{authenticationSignInProviders:S,authenticationRateLimits:E,authenticationEmails:_,authenticationMultiFactor:A,authenticationAttackProtection:x,authenticationAdvanced:f,authenticationShowOverview:r,authenticationShowSecurityNotifications:u,authenticationOauth21:d}),"data-sentry-element":"ProductMenu","data-sentry-component":"AuthProductMenu","data-sentry-source-file":"AuthLayout.tsx"})},E=(0,d.r)(e=>{let{children:t}=e;return(0,n.jsx)(u.k,{title:"Authentication",product:"Authentication",productMenu:(0,n.jsx)(S,{}),isBlocking:!1,"data-sentry-element":"ProjectLayout","data-sentry-component":"AuthLayout","data-sentry-source-file":"AuthLayout.tsx",children:t})})},95525:(e,t,r)=>{"use strict";r.d(t,{F:()=>d,r:()=>l});let n=/^((ftp|http|https):\/\/)?(www.)?(?!.*(ftp|http|https|www.))[a-zA-Z0-9_*-]+(\.[a-zA-Z0-9_*-]+)+((\/)[\w#]+)*(\/\w+\?[a-zA-Z0-9_]+=\w+(&[a-zA-Z0-9_]+=\w+)*)+(?:\.[a-z]+)*(?::\d+)?(?![^<]*(?:<\/\w+>|\/?>))(.*)?\/?(.)*?$/gm,s=/^[a-z0-9-]+([.][a-z0-9]+)*:\/(\/[-a-z0-9._~!$&'()*+,;=:@%]+)+(?:\.[a-z]+)*(?::\d+)?(?![^<]*(?:<\/\w+>|\/?>))(.*)?\/?(.)*?$/i,a=/^(?:^|\s)((https?:\/\/)?(?:localhost|[\w-]+(?:\.[\w-]+)+)(:\d+)?(\/\S*)?)/i,o=/chrome-extension:\/\/([a-zA-Z]*)/gm,i=/^([a-zA-Z][a-zA-Z0-9+.-]*):(?:\/{1,3})?([a-zA-Z0-9_.-]*)$/,c=/^[a-zA-Z0-9-]+\.[a-zA-Z]{2,}$/;function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{excludeSimpleDomains:!0},{excludeSimpleDomains:t}=e,r=t?"(?!".concat(c.source,")"):"";return RegExp("".concat(r,"((").concat(n.source,")|(").concat(a.source,")|(").concat(s.source,")|(").concat(o.source,")|(").concat(i.source,"))"),"i")}let d="NO_REQUIRED_CHARS"},98197:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>W});var n=r(80263),s=r(72112),a=r(22891),o=r(64511),i=r(93901),c=r(23169),l=r(52555),d=r.n(l),u=r(53239),h=r(87494),S=r(73969),E=r(86692),_=r(37873),A=r(44168),x=r(10723),f=r(39624),m=r(37631),p=r(97492),y=r(80090),N=r(85039),I=r(65887),C=r(78039),R=r(72608),j=r(66329),g=r(5879),T=r(99779),P=r(27371),v=r(21650),U=r(16488),b=r(44053),D=r(95525);let L=[{key:"hcaptcha",label:"hCaptcha"},{key:"turnstile",label:"Turnstile by Cloudflare"}],w=(0,E.Ik)({DISABLE_SIGNUP:(0,E.zM)().required(),EXTERNAL_ANONYMOUS_USERS_ENABLED:(0,E.zM)().required(),SECURITY_MANUAL_LINKING_ENABLED:(0,E.zM)().required(),SITE_URL:(0,E.Yj)().required("Must have a Site URL"),SECURITY_CAPTCHA_ENABLED:(0,E.zM)().required(),SECURITY_CAPTCHA_SECRET:(0,E.Yj)().when("SECURITY_CAPTCHA_ENABLED",{is:!0,then:e=>e.required("Must have a Captcha secret")}),SECURITY_CAPTCHA_PROVIDER:(0,E.Yj)().when("SECURITY_CAPTCHA_ENABLED",{is:!0,then:e=>e.oneOf(["hcaptcha","turnstile"]).required("Captcha provider must be either hcaptcha or turnstile")}),SESSIONS_TIMEBOX:(0,E.ai)().min(0,"Must be a positive number"),SESSIONS_INACTIVITY_TIMEOUT:(0,E.ai)().min(0,"Must be a positive number"),SESSIONS_SINGLE_PER_USER:(0,E.zM)(),PASSWORD_MIN_LENGTH:(0,E.ai)().min(6,"Must be greater or equal to 6."),PASSWORD_REQUIRED_CHARACTERS:(0,E.Yj)(),PASSWORD_HIBP_ENABLED:(0,E.zM)()}),O=()=>{let{ref:e}=(0,a.g)(),{data:t,error:r,isError:l,isLoading:E}=(0,m.op)({projectRef:e}),{mutate:O,isPending:B}=(0,p.U)({onError:e=>{S.oR.error("Failed to update settings: ".concat(null==e?void 0:e.message))},onSuccess:()=>{S.oR.success("Successfully updated settings")}}),[M,H]=(0,u.useState)(!0),{can:k}=(0,y.Qp)(s.aG.READ,"custom_config_gotrue"),{can:Y}=(0,y.Qp)(s.aG.UPDATE,"custom_config_gotrue"),F=(0,h.mN)({resolver:(0,o.t)(w),defaultValues:{DISABLE_SIGNUP:!0,EXTERNAL_ANONYMOUS_USERS_ENABLED:!1,SECURITY_MANUAL_LINKING_ENABLED:!1,SITE_URL:"",SECURITY_CAPTCHA_ENABLED:!1,SECURITY_CAPTCHA_SECRET:"",SECURITY_CAPTCHA_PROVIDER:"hcaptcha",SESSIONS_TIMEBOX:0,SESSIONS_INACTIVITY_TIMEOUT:0,SESSIONS_SINGLE_PER_USER:!1,PASSWORD_MIN_LENGTH:6,PASSWORD_REQUIRED_CHARACTERS:D.F,PASSWORD_HIBP_ENABLED:!1}});return((0,u.useEffect)(()=>{t&&!B&&F.reset({DISABLE_SIGNUP:!t.DISABLE_SIGNUP,EXTERNAL_ANONYMOUS_USERS_ENABLED:t.EXTERNAL_ANONYMOUS_USERS_ENABLED||!1,SECURITY_MANUAL_LINKING_ENABLED:t.SECURITY_MANUAL_LINKING_ENABLED||!1,SITE_URL:t.SITE_URL||"",SECURITY_CAPTCHA_ENABLED:t.SECURITY_CAPTCHA_ENABLED||!1,SECURITY_CAPTCHA_SECRET:t.SECURITY_CAPTCHA_SECRET||"",SECURITY_CAPTCHA_PROVIDER:t.SECURITY_CAPTCHA_PROVIDER||"hcaptcha",SESSIONS_TIMEBOX:t.SESSIONS_TIMEBOX||0,SESSIONS_INACTIVITY_TIMEOUT:t.SESSIONS_INACTIVITY_TIMEOUT||0,SESSIONS_SINGLE_PER_USER:t.SESSIONS_SINGLE_PER_USER||!1,PASSWORD_MIN_LENGTH:t.PASSWORD_MIN_LENGTH||6,PASSWORD_REQUIRED_CHARACTERS:t.PASSWORD_REQUIRED_CHARACTERS||D.F,PASSWORD_HIBP_ENABLED:t.PASSWORD_HIBP_ENABLED||!1})},[t,B]),l)?(0,n.jsx)(_.gu,{isFullWidth:!0,children:(0,n.jsx)(A.A,{error:r,subject:"Failed to retrieve auth configuration"})}):k?E?(0,n.jsx)(_.gu,{isFullWidth:!0,children:(0,n.jsx)(U.yV,{})}):(0,n.jsxs)(_.gu,{isFullWidth:!0,"data-sentry-element":"ScaffoldSection","data-sentry-component":"ProtectionAuthSettingsForm","data-sentry-source-file":"ProtectionAuthSettingsForm.tsx",children:[(0,n.jsx)(_.sZ,{className:"mb-4","data-sentry-element":"ScaffoldSectionTitle","data-sentry-source-file":"ProtectionAuthSettingsForm.tsx",children:"Bot and Abuse Protection"}),(0,n.jsx)(I.lV,{...F,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"ProtectionAuthSettingsForm.tsx",children:(0,n.jsx)("form",{onSubmit:F.handleSubmit(t=>{let r={...t};r.DISABLE_SIGNUP=!t.DISABLE_SIGNUP,r.PASSWORD_REQUIRED_CHARACTERS===D.F&&(r.PASSWORD_REQUIRED_CHARACTERS=""),O({projectRef:e,config:r})}),className:"space-y-4",children:(0,n.jsxs)(C.Zp,{"data-sentry-element":"Card","data-sentry-source-file":"ProtectionAuthSettingsForm.tsx",children:[(0,n.jsx)(C.Wu,{"data-sentry-element":"CardContent","data-sentry-source-file":"ProtectionAuthSettingsForm.tsx",children:(0,n.jsx)(I.zB,{control:F.control,name:"SECURITY_CAPTCHA_ENABLED",render:e=>{let{field:t}=e;return(0,n.jsx)(b.M,{layout:"flex-row-reverse",label:"Enable Captcha protection",description:"Protect authentication endpoints from bots and abuse.",children:(0,n.jsx)(I.MJ,{children:(0,n.jsx)(R.d,{checked:t.value,onCheckedChange:t.onChange,disabled:!Y})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"ProtectionAuthSettingsForm.tsx"})}),F.watch("SECURITY_CAPTCHA_ENABLED")&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.Wu,{children:(0,n.jsx)(I.zB,{control:F.control,name:"SECURITY_CAPTCHA_PROVIDER",render:e=>{let{field:t}=e,r=L.find(e=>e.key===t.value);return(0,n.jsxs)(b.M,{layout:"flex-row-reverse",label:"Choose Captcha Provider",children:[(0,n.jsx)(I.MJ,{children:(0,n.jsxs)(j.l6,{value:t.value,onValueChange:t.onChange,disabled:!Y,children:[(0,n.jsx)(j.bq,{children:(0,n.jsx)(j.yv,{placeholder:"Select provider"})}),(0,n.jsx)(j.gC,{align:"end",children:L.map(e=>(0,n.jsx)(j.eb,{value:e.key,children:e.label},e.key))})]})}),(0,n.jsxs)(x.g,{href:"hcaptcha"===t.value?"".concat(N.aq,"/guides/auth/auth-captcha?queryGroups=captcha-method&captcha-method=hcaptcha-1"):"turnstile"===t.value?"".concat(N.aq,"/guides/auth/auth-captcha?queryGroups=captcha-method&captcha-method=turnstile-1"):"/",className:"mt-2 text-xs text-foreground-light hover:text-foreground no-underline",children:["How to set up ",null==r?void 0:r.label,"?"]})]})}})}),(0,n.jsx)(C.Wu,{children:(0,n.jsx)(I.zB,{control:F.control,name:"SECURITY_CAPTCHA_SECRET",render:e=>{let{field:t}=e;return(0,n.jsx)(b.M,{layout:"flex-row-reverse",label:"Captcha secret",description:"Obtain this secret from the provider.",children:(0,n.jsx)(I.MJ,{children:(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(g.j,{postTab:(0,n.jsx)(T.$,{type:"text",className:"p-0",onClick:()=>H(!M),icon:M?(0,n.jsx)(i.A,{}):(0,n.jsx)(c.A,{})}),children:(0,n.jsx)(P.p,{...t,type:M?"password":"text",disabled:!Y})})})})})}})})]}),(0,n.jsx)(C.Wu,{"data-sentry-element":"CardContent","data-sentry-source-file":"ProtectionAuthSettingsForm.tsx",children:(0,n.jsx)(I.zB,{control:F.control,name:"PASSWORD_HIBP_ENABLED",render:t=>{let{field:r}=t;return(0,n.jsx)(b.M,{layout:"flex-row-reverse",label:"Prevent use of leaked passwords",description:"Rejects the use of known or easy to guess passwords on sign up or password change. ",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(v.E,{variant:r.value?"success":"default",children:r.value?"Enabled":"Disabled"}),(0,n.jsx)(d(),{href:"/project/".concat(e,"/auth/providers?provider=Email"),children:(0,n.jsx)(T.$,{type:"default",children:"Configure email provider"})})]})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"ProtectionAuthSettingsForm.tsx"})}),(0,n.jsxs)(C.wL,{className:"justify-end space-x-2","data-sentry-element":"CardFooter","data-sentry-source-file":"ProtectionAuthSettingsForm.tsx",children:[F.formState.isDirty&&(0,n.jsx)(T.$,{type:"default",onClick:()=>F.reset(),children:"Cancel"}),(0,n.jsx)(T.$,{type:"primary",htmlType:"submit",disabled:!Y||B||!F.formState.isDirty,loading:B,"data-sentry-element":"Button","data-sentry-source-file":"ProtectionAuthSettingsForm.tsx",children:"Save changes"})]})]})})})]}):(0,n.jsx)(_.gu,{isFullWidth:!0,children:(0,n.jsx)(f.A,{resourceText:"view auth configuration settings"})})};var B=r(87442),M=r(10508),H=r(8750),k=r(53931),Y=r(42459),F=r(2657);let z=()=>{let{ref:e}=(0,a.g)(),t=(0,F.x)("authentication:attack_protection"),{can:r,isSuccess:o}=(0,y.Qp)(s.aG.READ,"custom_config_gotrue");return t?o&&!r?(0,n.jsx)(f.A,{isFullPage:!0,resourceText:"access your project's auth provider settings"}):(0,n.jsx)(_.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-component":"ProtectionPage","data-sentry-source-file":"protection.tsx",children:o?(0,n.jsx)(O,{}):(0,n.jsx)(_.gu,{isFullWidth:!0,children:(0,n.jsx)(k.yV,{})})}):(0,n.jsx)(Y.c,{urlBack:"/project/".concat(e,"/auth/users")})};z.getLayout=e=>(0,n.jsx)(M.A,{children:(0,n.jsx)(B.A,{children:(0,n.jsx)(H.M,{title:"Attack Protection",subtitle:"Configure security settings to protect your project from attacks",children:e})})});let W=z}},e=>{e.O(0,[60858,15599,16110,27764,36538,44033,86692,76984,72391,35035,40545,596,10508,48340,75187,29471,8750,50143,90636,46593,38792],()=>e(e.s=13685)),_N_E=e.O()}]);