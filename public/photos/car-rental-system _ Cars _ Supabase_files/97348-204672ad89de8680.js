try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="552e1b07-5e66-4ee6-aaa8-387d5080ed27",e._sentryDebugIdIdentifier="sentry-dbid-552e1b07-5e66-4ee6-aaa8-387d5080ed27")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[97348],{21874:(e,s,l)=>{l.d(s,{e:()=>d});var t=l(72391),a=l(67850),n=l(32510),r=l(59356);let c=t.A.functions.list();async function i(e,s,l){let{projectRef:t,connectionString:a}=e,n=new Headers(l),{result:i}=await (0,r.E)({projectRef:t,connectionString:a,sql:c.sql,queryKey:["database-functions"]},s,n);return i}let d=function(e){let{projectRef:s,connectionString:l}=e,{enabled:t=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.I)({queryKey:n.c.databaseFunctions(s),queryFn:e=>{let{signal:t}=e;return i({projectRef:s,connectionString:l},t)},enabled:t&&void 0!==s,...r})}},26819:(e,s,l)=>{l.d(s,{s:()=>d,v:()=>o});var t=l(80263),a=l(10115),n=l(53239),r=l(37724),c=l(883),i=l(80100);let d=n.forwardRef((e,s)=>{let{className:l,...n}=e;return(0,t.jsx)(a.bL,{className:(0,i.cn)("flex flex-col -space-y-px w-full",l),...n,ref:s})});d.displayName="RadioGroupStacked";let o=n.forwardRef((e,s)=>{let{image:l,label:n,showIndicator:d=!0,...o}=e;return(0,t.jsx)(a.q7,{ref:s,...o,className:(0,i.cn)("flex flex-col gap-2","w-full","bg-overlay/50 disabled:opacity-50","border","first-of-type:rounded-t-lg last-of-type:rounded-b-lg","shadow-sm","enabled:hover:bg-surface-300","enabled:hover:border-foreground-muted","enabled:cursor-pointer disabled:cursor-not-allowed","hover:z-[1] focus-visible:z-[1]","data-[state=checked]:z-[1]","data-[state=checked]:ring-1 data-[state=checked]:ring-border","data-[state=checked]:bg-surface-300","data-[state=checked]:border-foreground-muted","transition","group",o.className),children:(0,t.jsxs)("div",{className:"flex gap-3 w-full px-[21px] py-3",children:[d&&(0,t.jsx)("div",{className:(0,i.cn)("aspect-square h-4 w-4 min-w-4 min-h-4","rounded-full border group-data-[state=checked]:border-foreground-muted","group-focus:border-foreground-muted","group-hover:border-foreground-muted","ring-offset-background","group-focus:outline-none","group-focus-visible:ring-2 group-focus-visible:ring-ring group-focus-visible:ring-offset-2","flex items-center justify-center","transition"),children:(0,t.jsx)(a.C1,{className:"flex items-center justify-center",children:(0,t.jsx)(r.A,{className:"h-2.5 w-2.5 fill-current text-current"})})}),(0,t.jsxs)("div",{className:"flex flex-col gap-0.25 items-start",children:[(0,t.jsx)(c.J,{htmlFor:o.value,className:(0,i.cn)("block","-mt-[0.15rem]","text-sm transition-colors text-left","text-light","enabled:group-hover:text-foreground group-data-[state=checked]:text-foreground"),children:n}),o.description&&(0,t.jsx)("p",{className:"text-sm text-foreground-lighter",children:o.description}),o.children]})]})})});o.displayName="RadioGroupStackedItem"},28168:(e,s,l)=>{l.d(s,{A:()=>w});var t=l(80263),a=l(86727),n=l.n(a),r=l(32157),c=l(23892),i=l(90376),d=l(53239),o=l(22891),u=l(21874),h=l(52555),x=l.n(h),f=l(80814),m=l(99779),p=l(20033),g=l(61548),j=l(29244),b=l(97757),N=l(9620);let w=e=>{let{className:s,size:l="tiny",showError:a=!0,disabled:h=!1,schema:w,value:y,onChange:v,filterFunction:k=()=>!0,noResultsLabel:S=(0,t.jsx)("span",{children:"No functions found in this schema."})}=e,A=(0,f.useRouter)(),{ref:C}=(0,o.g)(),{data:_}=(0,N.YA)(),[z,F]=(0,d.useState)(!1),{data:L,error:R,isLoading:I,isError:W,isSuccess:$,refetch:E}=(0,u.e)({projectRef:null==_?void 0:_.ref,connectionString:null==_?void 0:_.connectionString}),T=(null!=L?L:[]).filter(e=>w&&e.schema===w).filter(k),q=n()(T,e=>e.name);return(0,t.jsxs)("div",{className:s,"data-sentry-component":"FunctionSelector","data-sentry-source-file":"FunctionSelector.tsx",children:[I&&(0,t.jsx)(m.$,{type:"default",className:"justify-start",block:!0,size:l,loading:!0,children:"Loading functions..."}),a&&W&&(0,t.jsxs)(p.Fc,{variant:"warning",className:"!px-3 !py-3",children:[(0,t.jsx)(p.XL,{className:"text-xs text-amber-900",children:"Failed to load functions"}),(0,t.jsxs)(p.TN,{className:"text-xs mb-2",children:["Error: ",R.message]}),(0,t.jsx)(m.$,{type:"default",size:"tiny",onClick:()=>E(),children:"Reload functions"})]}),$&&(0,t.jsxs)(g.AM,{open:z,onOpenChange:F,modal:!1,children:[(0,t.jsx)(g.Wv,{asChild:!0,children:(0,t.jsx)(m.$,{size:l,disabled:!!h,type:"default",className:"w-full [&>span]:w-full ".concat("small"===l?"py-1.5":""),iconRight:(0,t.jsx)(r.A,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:y?(0,t.jsxs)("div",{className:"w-full flex gap-1",children:[(0,t.jsx)("p",{className:"text-foreground-lighter",children:"function:"}),(0,t.jsx)("p",{className:"text-foreground",children:y})]}):(0,t.jsx)("div",{className:"w-full flex gap-1",children:(0,t.jsx)("p",{className:"text-foreground-lighter",children:"Select a function"})})})}),(0,t.jsx)(g.hl,{className:"p-0",side:"bottom",align:"start",sameWidthAsTrigger:!0,children:(0,t.jsxs)(j.uB,{children:[(0,t.jsx)(j.G7,{placeholder:"Search functions..."}),(0,t.jsxs)(j.oI,{children:[(0,t.jsx)(j.xL,{children:"No functions found"}),(0,t.jsx)(j.L$,{children:(0,t.jsxs)(b.FK,{className:(q||[]).length>7?"h-[210px]":"",children:[!q.length&&(0,t.jsx)(j.h_,{disabled:!0,className:"flex items-center justify-between space-x-2 w-full",children:S},"no-function-found"),q.map(e=>(0,t.jsxs)(j.h_,{value:e.name.replaceAll('"',""),className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{v(e.name),F(!1)},onClick:()=>{v(e.name),F(!1)},children:[(0,t.jsx)("span",{children:e.name}),y===e.name&&(0,t.jsx)(c.A,{className:"text-brand",size:14,strokeWidth:2})]},e.id))]})}),(0,t.jsx)(j.fx,{}),(0,t.jsx)(j.L$,{children:(0,t.jsx)(j.h_,{className:"cursor-pointer w-full",onSelect:()=>{F(!1),A.push("/project/".concat(C,"/database/functions"))},onClick:()=>F(!1),children:(0,t.jsxs)(x(),{href:"/project/".concat(C,"/database/functions"),onClick:()=>{F(!1)},className:"w-full flex items-center gap-2",children:[(0,t.jsx)(i.A,{size:14,strokeWidth:1.5}),(0,t.jsx)("p",{children:"New function"})]})})})]})]})})]})]})}},84438:(e,s,l)=>{l.d(s,{A:()=>j});var t=l(80263),a=l(72112),n=l(32157),r=l(23892),c=l(90376),i=l(53239),d=l(32775),o=l(80090),u=l(9620),h=l(99779),x=l(73640),f=l(20033),m=l(61548),p=l(29244),g=l(97757);let j=e=>{let{className:s,disabled:l=!1,size:j="tiny",showError:b=!0,selectedSchemaName:N,supportSelectAll:w=!1,excludedSchemas:y=[],onSelectSchema:v,onSelectCreateSchema:k,portal:S=!0,align:A="start"}=e,[C,_]=(0,i.useState)(!1),{can:z}=(0,o.Qp)(a.aG.TENANT_SQL_ADMIN_WRITE,"schemas"),{data:F}=(0,u.YA)(),{data:L,isLoading:R,isSuccess:I,isError:W,error:$,refetch:E}=(0,d.w$)({projectRef:null==F?void 0:F.ref,connectionString:null==F?void 0:F.connectionString}),T=(L||[]).filter(e=>!y.includes(e.name)).sort((e,s)=>e.name.localeCompare(s.name));return(0,t.jsxs)("div",{className:s,"data-sentry-component":"SchemaSelector","data-sentry-source-file":"SchemaSelector.tsx",children:[R&&(0,t.jsx)(h.$,{type:"default",className:"w-full [&>span]:w-full",size:j,disabled:!0,children:(0,t.jsx)(x.E,{className:"w-full h-3 bg-foreground-muted"})},"schema-selector-skeleton"),b&&W&&(0,t.jsxs)(f.Fc,{variant:"warning",className:"!px-3 !py-3",children:[(0,t.jsx)(f.XL,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,t.jsxs)(f.TN,{className:"text-xs mb-2 break-words",children:["Error: ",null==$?void 0:$.message]}),(0,t.jsx)(h.$,{type:"default",size:"tiny",onClick:()=>E(),children:"Reload schemas"})]}),I&&(0,t.jsxs)(m.AM,{open:C,onOpenChange:_,modal:!1,children:[(0,t.jsx)(m.Wv,{asChild:!0,children:(0,t.jsx)(h.$,{size:j,disabled:l,type:"default","data-testid":"schema-selector",className:"w-full [&>span]:w-full !pr-1 space-x-1",iconRight:(0,t.jsx)(n.A,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:N?(0,t.jsxs)("div",{className:"w-full flex gap-1",children:[(0,t.jsx)("p",{className:"text-foreground-lighter",children:"schema"}),(0,t.jsx)("p",{className:"text-foreground",children:"*"===N?"All schemas":N})]}):(0,t.jsx)("div",{className:"w-full flex gap-1",children:(0,t.jsx)("p",{className:"text-foreground-lighter",children:"Choose a schema..."})})})}),(0,t.jsx)(m.hl,{className:"p-0 min-w-[200px] pointer-events-auto",side:"bottom",align:A,portal:S,sameWidthAsTrigger:!0,children:(0,t.jsxs)(p.uB,{children:[(0,t.jsx)(p.G7,{placeholder:"Find schema..."}),(0,t.jsxs)(p.oI,{children:[(0,t.jsx)(p.xL,{children:"No schemas found"}),(0,t.jsx)(p.L$,{children:(0,t.jsxs)(g.FK,{className:(T||[]).length>7?"h-[210px]":"",children:[w&&(0,t.jsxs)(p.h_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{v("*"),_(!1)},onClick:()=>{v("*"),_(!1)},children:[(0,t.jsx)("span",{children:"All schemas"}),"*"===N&&(0,t.jsx)(r.A,{className:"text-brand",strokeWidth:2,size:16})]},"select-all"),null==T?void 0:T.map(e=>(0,t.jsxs)(p.h_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{v(e.name),_(!1)},onClick:()=>{v(e.name),_(!1)},children:[(0,t.jsx)("span",{children:e.name}),N===e.name&&(0,t.jsx)(r.A,{className:"text-brand",strokeWidth:2,size:16})]},e.id))]})}),void 0!==k&&z&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.fx,{}),(0,t.jsx)(p.L$,{children:(0,t.jsxs)(p.h_,{className:"cursor-pointer flex items-center gap-x-2 w-full",onSelect:()=>{k(),_(!1)},onClick:()=>{k(),_(!1)},children:[(0,t.jsx)(c.A,{size:12}),"Create a new schema"]})})]})]})]})})]})]})}}}]);