try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="336a1bcd-0364-448d-9b56-096b1257a058",e._sentryDebugIdIdentifier="sentry-dbid-336a1bcd-0364-448d-9b56-096b1257a058")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[570],{262:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/auth/templates",function(){return s(81216)}])},42459:(e,t,s)=>{"use strict";s.d(t,{c:()=>o});var a=s(80263),l=s(52555),r=s.n(l),n=s(80100),i=s(99779),c=s(44725);let o=e=>{let{urlBack:t,fullHeight:s=!0}=e;return(0,a.jsx)("div",{className:(0,n.cn)("w-full flex items-center justify-center",s&&"h-full"),"data-sentry-component":"UnknownInterface","data-sentry-source-file":"UnknownInterface.tsx",children:(0,a.jsx)(c.Z,{type:"note",className:"max-w-xl",title:"Looking for something?",description:"We couldn't find the page that you're looking for","data-sentry-element":"Admonition","data-sentry-source-file":"UnknownInterface.tsx",children:(0,a.jsx)(i.$,{asChild:!0,type:"default",className:"mt-2","data-sentry-element":"Button","data-sentry-source-file":"UnknownInterface.tsx",children:(0,a.jsx)(r(),{href:t,"data-sentry-element":"Link","data-sentry-source-file":"UnknownInterface.tsx",children:"Head back"})})})})}},58273:(e,t,s)=>{"use strict";s.d(t,{M:()=>o});var a=s(80263),l=s(22891),r=s(8750),n=s(42459),i=s(2657),c=s(87442);let o=e=>{let{children:t}=e,{ref:s}=(0,l.g)(),o=(0,i.x)("authentication:emails");return(0,a.jsx)(c.A,{"data-sentry-element":"AuthLayout","data-sentry-component":"AuthEmailsLayout","data-sentry-source-file":"AuthEmailsLayout.tsx",children:o?(0,a.jsx)(r.M,{title:"Emails",subtitle:"Configure what emails your users receive and how they are sent",navigationItems:[{label:"Templates",href:"/project/".concat(s,"/auth/templates")},{label:"SMTP Settings",href:"/project/".concat(s,"/auth/smtp")}],children:t}):(0,a.jsx)(n.c,{urlBack:"/project/".concat(s,"/auth/users")})})}},81216:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Y});var a,l=s(80263),r=s(72112),n=s(32981),i=s(76196),c=s(68152),o=s(86510),d=s(52555),u=s.n(d),m=s(53239),h=s(87494),x=s(73969),p=s(10663),f=s(22891),j=s(68424),y=s(91958),g=s(37873),N=s(44168),v=s(10723),b=s(53931),T=s(37631),I=s(97492),_=s(80090),w=s(28202),E=s(85039),A=s(78039),S=s(30404),k=s(21650),C=s(99779),L=s(65887),O=s(72608),P=s(11101),R=s(44725),D=s(85967);let U=()=>{let{ref:e}=(0,f.g)();return(0,l.jsxs)(R.Z,{type:"warning",title:"Set up custom SMTP",className:"bg-warning-200 border-warning-400","data-sentry-element":"Admonition","data-sentry-component":"EmailRateLimitsAlert","data-sentry-source-file":"EmailRateLimitsAlert.tsx",children:[(0,l.jsxs)("p",{children:["You’re using the built-in email service. This service has rate limits and is not meant to be used for production apps."," ",(0,l.jsx)(v.g,{href:"".concat(E.aq,"/guides/platform/going-into-prod#auth-rate-limits"),"data-sentry-element":"InlineLink","data-sentry-source-file":"EmailRateLimitsAlert.tsx",children:"Learn more"})," "]}),(0,l.jsx)(C.$,{asChild:!0,type:"default",className:"mt-2","data-sentry-element":"Button","data-sentry-source-file":"EmailRateLimitsAlert.tsx",children:(0,l.jsx)(u(),{href:"/project/".concat(e,"/auth/smtp"),"data-sentry-element":"Link","data-sentry-source-file":"EmailRateLimitsAlert.tsx",children:"Set up SMTP"})})]})};var F=s(56144),M=s(15605);let W=D.x.filter(e=>{var t;return(null==(t=e.misc)?void 0:t.emailTemplateType)==="security"}).map(e=>{var t;return"MAILER_NOTIFICATIONS_".concat(null==(t=e.id)?void 0:t.replace("_NOTIFICATION",""),"_ENABLED")}),Z=p.Ik({...W.reduce((e,t)=>(e[t]=p.zM(),e),{})}),B=null==(a=j.v.find(e=>e.key===f.rS.UI_PREVIEW_SECURITY_NOTIFICATIONS))?void 0:a.discussionsUrl,$=()=>{let{ref:e}=(0,f.g)(),t=(0,y.hN)(),{can:s}=(0,_.Qp)(r.aG.UPDATE,"custom_config_gotrue"),[a,d]=(0,w.U)(f.rS.SECURITY_NOTIFICATIONS_ACKNOWLEDGED(null!=e?e:""),!1),{data:p,error:j,isLoading:$,isError:z,isSuccess:V}=(0,T.op)({projectRef:e}),{mutate:q,isPending:G}=(0,I.U)({onError:e=>{x.oR.error("Failed to update settings: ".concat(null==e?void 0:e.message))},onSuccess:()=>{x.oR.success("Successfully updated settings")}}),X=V&&p&&(!p.SMTP_HOST||!p.SMTP_USER||!p.SMTP_PASS),Y=W.reduce((e,t)=>(e[t]=!!p&&!!p[t],e),{}),H=(0,h.mN)({resolver:(0,n.u)(Z),defaultValues:Y});return(0,m.useEffect)(()=>{p&&H.reset(Y)},[p]),(0,l.jsxs)(g.gu,{isFullWidth:!0,className:"!pt-0","data-sentry-element":"ScaffoldSection","data-sentry-component":"EmailTemplates","data-sentry-source-file":"EmailTemplates.tsx",children:[z&&(0,l.jsx)(N.A,{className:"mt-12",error:j,subject:"Failed to retrieve auth configuration"}),$&&(0,l.jsx)("div",{className:"w-[854px] mt-12",children:(0,l.jsx)(b.yV,{})}),V&&(0,l.jsxs)(l.Fragment,{children:[X?(0,l.jsx)("div",{className:"mt-12",children:(0,l.jsx)(U,{})}):null,t?(0,l.jsxs)("div",{className:"mt-12 space-y-12",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(g.sZ,{className:"mb-4",children:"Authentication"}),(0,l.jsx)(A.Zp,{children:D.x.filter(e=>{var t;return(null==(t=e.misc)?void 0:t.emailTemplateType)==="authentication"}).map(t=>{let s=(0,F.i)(t.title);return(0,l.jsx)(A.Wu,{className:"p-0",children:(0,l.jsxs)(u(),{href:"/project/".concat(e,"/auth/templates/").concat(s),className:"flex items-center justify-between hover:bg-surface-200 transition-colors py-4 px-6 w-full h-full",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("h3",{className:"text-sm text-foreground",children:t.title}),t.purpose&&(0,l.jsx)("p",{className:"text-sm text-foreground-lighter",children:t.purpose})]}),(0,l.jsx)("div",{className:"flex items-center gap-4",children:(0,l.jsx)(i.A,{size:16,className:"text-foreground-muted"})})]})},"".concat(t.id))})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(g.sZ,{className:"mb-4",children:"Security"}),!a&&(0,l.jsxs)(R.Z,{showIcon:!1,type:"tip",className:"relative mb-6",children:[(0,l.jsxs)(S.m_,{children:[(0,l.jsx)(S.k$,{onClick:()=>d(!0),className:"absolute top-3 right-3 opacity-30 hover:opacity-100 transition-opacity",children:(0,l.jsx)(c.A,{size:14,className:"text-foreground-light"})}),(0,l.jsx)(S.ZI,{side:"bottom",children:"Dismiss"})]}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-y-2 md:gap-x-8 justify-between px-2 py-1",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-y-2 items-start",children:[(0,l.jsx)(k.E,{variant:"success",className:"-ml-0.5 uppercase",children:"New"}),(0,l.jsx)("p",{className:"text-sm font-medium",children:"Notify users about security-sensitive actions on their accounts"})]}),(0,l.jsxs)("p",{className:"text-sm text-foreground-lighter text-balance",children:["We’ve expanded our email templates to handle security-sensitive actions. The list of templates will continue to grow as our feature-set changes",B&&(0,l.jsxs)(l.Fragment,{children:[" ","and as we"," ",(0,l.jsx)(v.g,{href:B,target:"_blank",children:"gather feedback"})," ","from our community"]}),"."]})]}),(0,l.jsx)(C.$,{asChild:!0,type:"default",icon:(0,l.jsx)(o.A,{strokeWidth:1.5}),className:"mt-2",children:(0,l.jsx)(u(),{href:"".concat(E.aq,"/guides/auth/auth-email-templates"),target:"_blank",children:"Docs"})})]})]}),(0,l.jsx)(L.lV,{...H,children:(0,l.jsx)("form",{onSubmit:H.handleSubmit(t=>{if(!e)return console.error("Project ref is required");q({projectRef:e,config:{...t}})}),className:"space-y-4",children:(0,l.jsxs)(A.Zp,{children:[D.x.filter(e=>{var t;return(null==(t=e.misc)?void 0:t.emailTemplateType)==="security"}).map(t=>{var a;let r=(0,F.i)(t.title),n="MAILER_NOTIFICATIONS_".concat(null==(a=t.id)?void 0:a.replace("_NOTIFICATION",""),"_ENABLED");return(0,l.jsxs)(A.Wu,{className:"p-0 flex items-center justify-between hover:bg-surface-200 transition-colors w-full h-full",children:[(0,l.jsxs)(u(),{href:"/project/".concat(e,"/auth/templates/").concat(r),className:"flex flex-col flex-1 py-4 px-6",children:[(0,l.jsx)("h3",{className:"text-sm text-foreground",children:t.title}),t.purpose&&(0,l.jsx)("p",{className:"text-sm text-foreground-lighter",children:t.purpose})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4 h-full pl-2 relative",children:[(0,l.jsx)(L.zB,{control:H.control,name:n,render:e=>{let{field:t}=e;return(0,l.jsx)(L.MJ,{children:(0,l.jsx)(O.d,{checked:t.value,onCheckedChange:t.onChange,disabled:!s})})}}),(0,l.jsx)(u(),{href:"/project/".concat(e,"/auth/templates/").concat(r),className:"py-6 pr-6",children:(0,l.jsx)(i.A,{size:16,className:"text-foreground-muted"})})]})]},"".concat(t.id))}),(0,l.jsxs)(A.wL,{className:"justify-end space-x-2",children:[H.formState.isDirty&&(0,l.jsx)(C.$,{type:"default",onClick:()=>H.reset(),children:"Cancel"}),(0,l.jsx)(C.$,{type:"primary",htmlType:"submit",disabled:!s||G||!H.formState.isDirty,loading:G,children:"Save changes"})]})]})})})]})]}):(0,l.jsx)(A.Zp,{className:"mt-12",children:(0,l.jsxs)(P.tU,{defaultValue:(0,F.i)(D.x[0].title),children:[(0,l.jsx)(P.j7,{className:"pt-2 px-6 gap-5 mb-0 overflow-x-scroll no-scrollbar mb-4",children:D.x.filter(e=>{var t;return(null==(t=e.misc)?void 0:t.emailTemplateType)==="authentication"}).map(e=>(0,l.jsx)(P.Xi,{value:(0,F.i)(e.title),children:e.title},"".concat(e.id)))}),D.x.filter(e=>{var t;return(null==(t=e.misc)?void 0:t.emailTemplateType)==="authentication"}).map(e=>{let t=(0,F.i)(e.title);return(0,l.jsx)(P.av,{value:t,className:"mt-0",children:(0,l.jsx)(M.K,{template:e},e.title)},t)})]})})]})]})};var z=s(58273),V=s(10508),q=s(39624),G=s(16488);let X=()=>{let{can:e,isSuccess:t}=(0,_.Qp)(r.aG.READ,"custom_config_gotrue");return t&&!e?(0,l.jsx)(q.A,{isFullPage:!0,resourceText:"access your project's email settings"}):(0,l.jsx)(g.eh,{bottomPadding:!0,"data-sentry-element":"ScaffoldContainer","data-sentry-component":"TemplatesPage","data-sentry-source-file":"index.tsx",children:t?(0,l.jsx)($,{}):(0,l.jsx)(g.gu,{isFullWidth:!0,children:(0,l.jsx)(G.yV,{})})})};X.getLayout=e=>(0,l.jsx)(V.A,{children:(0,l.jsx)(z.M,{children:e})});let Y=X}},e=>{e.O(0,[60858,15599,16110,27764,36538,44033,86692,76984,72391,35035,40545,596,10508,48340,75187,29471,8750,50143,23968,90636,46593,38792],()=>e(e.s=262)),_N_E=e.O()}]);